import{s as U,r as A,x as p,v as M,C as E,J as g,c as h,h as l,b as _,T as S,a as n,w as u,z as m,g as i,F as H,i as N,o as r,D as z}from"./app-6ca4d7f9.js";import{a as I,r as f}from"./AuthStore-87755225.js";import{M as L,a as R}from"./MobileDashboardHeader-62b789db.js";import W from"./ProjectDisplay-6eaf91f0.js";import{B as J}from"./BidDisplay-6ffb4b37.js";import O from"./mediaDispay-9c1a6084.js";import q from"./chatsDisplay-50bd31eb.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./MobileProjectBreakdownDisplayCard-0ffd4ac0.js";import"./followersFormat-58554cdc.js";import"./Modal-cb95c12b.js";import"./pdf-ac36aa31.js";import"./convertDate-873f89eb.js";const K={class:"w-[100%] h-[50px] items-center flex justify-around"},Q={class:"container"},X={__name:"ViewProject",props:{canLogin:Boolean,canRegister:Boolean,laravelVersion:String,phpVersion:String,project:Object},setup(D){const a=D,x=N("currentUser"),j=I();x!=null&&j.authenticate(),U(j);const o=A("Project"),y=p(a.project),c={properties:p({visible:!1,bid:null}),openModal:t=>{document.body.style.overflow="hidden",c.properties.visible=!0,c.properties.bid=t},closeModal:()=>{document.body.style.overflow="auto",c.properties.visible=!1,c.properties.bid=null}};M({amount:null,comment:null});const k=M({fileUpload:null}),v=p({is_assigned:b(),assignment:B()});let C=p([]);E(()=>{g().props.errors!=null&&g().props.errors.WorkspaceError!=null&&(C[0]=g().props.errors)});function d(t){o.value=t}function b(){let t=!1;if(a.project!=null&&a.project.bids!=null){for(let e of a.project.bids)if(e.assignment!=null){t=!0;break}}return t}function B(){let t=null;if(a.project!=null&&a.project.bids!=null){for(let e of a.project.bids)if(e.assignment!=null){t=e.assignment;break}}return t}function P(t){k.fileUpload=t,axios.post(f("uploadFile"),{project:a.project,fileData:k.fileUpload},{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.status?(alert("File Uploaded"),window.location.reload()):alert(e.data.error)}).catch(e=>{alert("File is missing or is unsupported")})}function F(t){let e={project:y,message:t.message};axios.post(f("sendMessage"),e).then(s=>{let w=$("#chatWindow");a.project.chats||(a.project.chats=[]),a.project.chats.push(s.data.chat),w.animate({scrollTop:w.get(0).scrollHeight},1e3)}).catch(s=>{console.log(s)})}function V(t){confirm("Are you sure you want to delete this media?")&&axios.delete(f("DeleteMedia",{media:t})).then(e=>{e.data.status?(alert("Media deleted successfully."),window.location.reload()):alert("Error deleting media.")}).catch(e=>{alert("Error deleting media.")})}function T(t){axios.post(f("MarketerMarkAsComplete",t)).then(e=>{e.data.status&&window.location.reload()}).catch(e=>{})}return z("assignmentDetails",v),(t,e)=>(r(),h(H,null,[(r(),l(S,{to:"body"},[_(L,{activePage:"Projects"})])),_(R,{backButton:!0,title:"Projects"}),n("nav",null,[n("ul",K,[n("li",{onClick:e[0]||(e[0]=u(s=>d("Project"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Project"?"active-tab":""])},"Project ",2),n("li",{onClick:e[1]||(e[1]=u(s=>d("Bids"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Bids"?"active-tab":""])},"Bids ",2),b()?(r(),h("li",{key:0,onClick:e[2]||(e[2]=u(s=>d("Media"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Media"?"active-tab":""])},"Media ",2)):i("",!0),b()?(r(),h("li",{key:1,onClick:e[3]||(e[3]=u(s=>d("Chat"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Chat"?"active-tab":""])},"Chat ",2)):i("",!0)])]),n("div",Q,[o.value=="Project"?(r(),l(W,{key:0,onMarkAsComplete:T,assignmentDetails:v,project:y},null,8,["assignmentDetails","project"])):i("",!0),o.value=="Bids"?(r(),l(J,{key:1,bids:a.project.bids,marketerHandle:!0,influencer:!1},null,8,["bids"])):i("",!0),o.value=="Media"?(r(),l(O,{key:2,onUploadFile:P,onDeleteMedia:V,assignmentDetails:v},null,8,["assignmentDetails"])):i("",!0),o.value=="Chat"?(r(),l(q,{key:3,onSendMessage:F,chats:a.project.chats},null,8,["chats"])):i("",!0)])],64))}},pe=G(X,[["__scopeId","data-v-b849d372"]]);export{pe as default};
