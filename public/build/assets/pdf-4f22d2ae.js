var Ke=Object.defineProperty;var Je=(ct,m,Z)=>m in ct?Ke(ct,m,{enumerable:!0,configurable:!0,writable:!0,value:Z}):ct[m]=Z;var Ot=(ct,m,Z)=>(Je(ct,typeof m!="symbol"?m+"":m,Z),Z),re=(ct,m,Z)=>{if(!m.has(ct))throw TypeError("Cannot "+Z)};var g=(ct,m,Z)=>(re(ct,m,"read from private field"),Z?Z.call(ct):m.get(ct)),st=(ct,m,Z)=>{if(m.has(ct))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(ct):m.set(ct,Z)},_t=(ct,m,Z,b)=>(re(ct,m,"write to private field"),b?b.call(ct,Z):m.set(ct,Z),Z),ae=(ct,m,Z,b)=>({set _(w){_t(ct,m,w,Z)},get _(){return g(ct,m,b)}}),dt=(ct,m,Z)=>(re(ct,m,"access private method"),Z);import{N as require$$5}from"./app-7ce278c5.js";function commonjsRequire(ct){throw new Error('Could not dynamically require "'+ct+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(ct){pdfExports=ct}};(function(module,exports){(function(m,Z){module.exports=Z()})(globalThis,()=>(()=>{var __webpack_modules__=[,(ct,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.VerbosityLevel=m.Util=m.UnknownErrorException=m.UnexpectedResponseException=m.UNSUPPORTED_FEATURES=m.TextRenderingMode=m.RenderingIntentFlag=m.PermissionFlag=m.PasswordResponses=m.PasswordException=m.PageActionEventType=m.OPS=m.MissingPDFException=m.LINE_FACTOR=m.LINE_DESCENT_FACTOR=m.InvalidPDFException=m.ImageKind=m.IDENTITY_MATRIX=m.FormatError=m.FeatureTest=m.FONT_IDENTITY_MATRIX=m.DocumentActionEventType=m.CMapCompressionType=m.BaseException=m.BASELINE_FACTOR=m.AnnotationType=m.AnnotationStateModelType=m.AnnotationReviewState=m.AnnotationReplyType=m.AnnotationMode=m.AnnotationMarkedState=m.AnnotationFlag=m.AnnotationFieldFlag=m.AnnotationEditorType=m.AnnotationEditorPrefix=m.AnnotationEditorParamsType=m.AnnotationBorderStyleType=m.AnnotationActionEventType=m.AbortException=void 0,m.assert=k,m.bytesToString=Y,m.createPromiseCapability=St,m.createValidAbsoluteUrl=r,m.getModificationDate=Tt,m.getVerbosityLevel=W,m.info=H,m.isArrayBuffer=At,m.isArrayEqual=Et,m.objectFromMap=R,m.objectSize=S,m.setVerbosityLevel=X,m.shadow=A,m.string32=h,m.stringToBytes=a,m.stringToPDFString=mt,m.stringToUTF8String=gt,m.unreachable=ht,m.utf8StringToString=bt,m.warn=rt;const Z=[1,0,0,1,0,0];m.IDENTITY_MATRIX=Z;const b=[.001,0,0,.001,0,0];m.FONT_IDENTITY_MATRIX=b;const w=1.35;m.LINE_FACTOR=w;const V=.35;m.LINE_DESCENT_FACTOR=V;const G=V/w;m.BASELINE_FACTOR=G;const Q={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};m.RenderingIntentFlag=Q;const j={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};m.AnnotationMode=j;const y="pdfjs_internal_editor_";m.AnnotationEditorPrefix=y;const E={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};m.AnnotationEditorType=E;const O={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};m.AnnotationEditorParamsType=O;const C={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};m.PermissionFlag=C;const _={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};m.TextRenderingMode=_;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};m.ImageKind=f;const u={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};m.AnnotationType=u;const i={MARKED:"Marked",REVIEW:"Review"};m.AnnotationStateModelType=i;const l={MARKED:"Marked",UNMARKED:"Unmarked"};m.AnnotationMarkedState=l;const c={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};m.AnnotationReviewState=c;const n={GROUP:"Group",REPLY:"R"};m.AnnotationReplyType=n;const s={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};m.AnnotationFlag=s;const t={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};m.AnnotationFieldFlag=t;const e={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};m.AnnotationBorderStyleType=e;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};m.AnnotationActionEventType=d;const v={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};m.DocumentActionEventType=v;const P={O:"PageOpen",C:"PageClose"};m.PageActionEventType=P;const N={ERRORS:0,WARNINGS:1,INFOS:5};m.VerbosityLevel=N;const p={NONE:0,BINARY:1};m.CMapCompressionType=p;const q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};m.OPS=q;const lt={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};m.UNSUPPORTED_FEATURES=lt;const tt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};m.PasswordResponses=tt;let at=N.WARNINGS;function X(F){Number.isInteger(F)&&(at=F)}function W(){return at}function H(F){at>=N.INFOS&&console.log(`Info: ${F}`)}function rt(F){at>=N.WARNINGS&&console.log(`Warning: ${F}`)}function ht(F){throw new Error(F)}function k(F,D){F||ht(D)}function o(F){if(!F)return!1;switch(F.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function r(F,D=null,L=null){if(!F)return null;try{if(L&&typeof F=="string"){if(L.addDefaultProtocol&&F.startsWith("www.")){const Ct=F.match(/\./g);Ct&&Ct.length>=2&&(F=`http://${F}`)}if(L.tryConvertEncoding)try{F=gt(F)}catch{}}const pt=D?new URL(F,D):new URL(F);if(o(pt))return pt}catch{}return null}function A(F,D,L,pt=!1){return Object.defineProperty(F,D,{value:L,enumerable:!pt,configurable:!0,writable:!1}),L}const x=function(){function D(L,pt){this.constructor===D&&ht("Cannot initialize BaseException."),this.message=L,this.name=pt}return D.prototype=new Error,D.constructor=D,D}();m.BaseException=x;class M extends x{constructor(D,L){super(D,"PasswordException"),this.code=L}}m.PasswordException=M;class I extends x{constructor(D,L){super(D,"UnknownErrorException"),this.details=L}}m.UnknownErrorException=I;class U extends x{constructor(D){super(D,"InvalidPDFException")}}m.InvalidPDFException=U;class z extends x{constructor(D){super(D,"MissingPDFException")}}m.MissingPDFException=z;class it extends x{constructor(D,L){super(D,"UnexpectedResponseException"),this.status=L}}m.UnexpectedResponseException=it;class J extends x{constructor(D){super(D,"FormatError")}}m.FormatError=J;class et extends x{constructor(D){super(D,"AbortException")}}m.AbortException=et;function Y(F){(typeof F!="object"||F===null||F.length===void 0)&&ht("Invalid argument for bytesToString");const D=F.length,L=8192;if(D<L)return String.fromCharCode.apply(null,F);const pt=[];for(let Ct=0;Ct<D;Ct+=L){const Mt=Math.min(Ct+L,D),$=F.subarray(Ct,Mt);pt.push(String.fromCharCode.apply(null,$))}return pt.join("")}function a(F){typeof F!="string"&&ht("Invalid argument for stringToBytes");const D=F.length,L=new Uint8Array(D);for(let pt=0;pt<D;++pt)L[pt]=F.charCodeAt(pt)&255;return L}function h(F){return String.fromCharCode(F>>24&255,F>>16&255,F>>8&255,F&255)}function S(F){return Object.keys(F).length}function R(F){const D=Object.create(null);for(const[L,pt]of F)D[L]=pt;return D}function T(){const F=new Uint8Array(4);return F[0]=1,new Uint32Array(F.buffer,0,1)[0]===1}function B(){try{return new Function(""),!0}catch{return!1}}class nt{static get isLittleEndian(){return A(this,"isLittleEndian",T())}static get isEvalSupported(){return A(this,"isEvalSupported",B())}static get isOffscreenCanvasSupported(){return A(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?A(this,"platform",{isWin:!1,isMac:!1}):A(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}m.FeatureTest=nt;const ot=[...Array(256).keys()].map(F=>F.toString(16).padStart(2,"0"));class ut{static makeHexColor(D,L,pt){return`#${ot[D]}${ot[L]}${ot[pt]}`}static scaleMinMax(D,L){let pt;D[0]?(D[0]<0&&(pt=L[0],L[0]=L[1],L[1]=pt),L[0]*=D[0],L[1]*=D[0],D[3]<0&&(pt=L[2],L[2]=L[3],L[3]=pt),L[2]*=D[3],L[3]*=D[3]):(pt=L[0],L[0]=L[2],L[2]=pt,pt=L[1],L[1]=L[3],L[3]=pt,D[1]<0&&(pt=L[2],L[2]=L[3],L[3]=pt),L[2]*=D[1],L[3]*=D[1],D[2]<0&&(pt=L[0],L[0]=L[1],L[1]=pt),L[0]*=D[2],L[1]*=D[2]),L[0]+=D[4],L[1]+=D[4],L[2]+=D[5],L[3]+=D[5]}static transform(D,L){return[D[0]*L[0]+D[2]*L[1],D[1]*L[0]+D[3]*L[1],D[0]*L[2]+D[2]*L[3],D[1]*L[2]+D[3]*L[3],D[0]*L[4]+D[2]*L[5]+D[4],D[1]*L[4]+D[3]*L[5]+D[5]]}static applyTransform(D,L){const pt=D[0]*L[0]+D[1]*L[2]+L[4],Ct=D[0]*L[1]+D[1]*L[3]+L[5];return[pt,Ct]}static applyInverseTransform(D,L){const pt=L[0]*L[3]-L[1]*L[2],Ct=(D[0]*L[3]-D[1]*L[2]+L[2]*L[5]-L[4]*L[3])/pt,Mt=(-D[0]*L[1]+D[1]*L[0]+L[4]*L[1]-L[5]*L[0])/pt;return[Ct,Mt]}static getAxialAlignedBoundingBox(D,L){const pt=ut.applyTransform(D,L),Ct=ut.applyTransform(D.slice(2,4),L),Mt=ut.applyTransform([D[0],D[3]],L),$=ut.applyTransform([D[2],D[1]],L);return[Math.min(pt[0],Ct[0],Mt[0],$[0]),Math.min(pt[1],Ct[1],Mt[1],$[1]),Math.max(pt[0],Ct[0],Mt[0],$[0]),Math.max(pt[1],Ct[1],Mt[1],$[1])]}static inverseTransform(D){const L=D[0]*D[3]-D[1]*D[2];return[D[3]/L,-D[1]/L,-D[2]/L,D[0]/L,(D[2]*D[5]-D[4]*D[3])/L,(D[4]*D[1]-D[5]*D[0])/L]}static singularValueDecompose2dScale(D){const L=[D[0],D[2],D[1],D[3]],pt=D[0]*L[0]+D[1]*L[2],Ct=D[0]*L[1]+D[1]*L[3],Mt=D[2]*L[0]+D[3]*L[2],$=D[2]*L[1]+D[3]*L[3],ft=(pt+$)/2,yt=Math.sqrt((pt+$)**2-4*(pt*$-Mt*Ct))/2,vt=ft+yt||1,Pt=ft-yt||1;return[Math.sqrt(vt),Math.sqrt(Pt)]}static normalizeRect(D){const L=D.slice(0);return D[0]>D[2]&&(L[0]=D[2],L[2]=D[0]),D[1]>D[3]&&(L[1]=D[3],L[3]=D[1]),L}static intersect(D,L){const pt=Math.max(Math.min(D[0],D[2]),Math.min(L[0],L[2])),Ct=Math.min(Math.max(D[0],D[2]),Math.max(L[0],L[2]));if(pt>Ct)return null;const Mt=Math.max(Math.min(D[1],D[3]),Math.min(L[1],L[3])),$=Math.min(Math.max(D[1],D[3]),Math.max(L[1],L[3]));return Mt>$?null:[pt,Mt,Ct,$]}static bezierBoundingBox(D,L,pt,Ct,Mt,$,ft,yt){const vt=[],Pt=[[],[]];let Ft,xt,kt,wt,Rt,Ut,It,Lt;for(let Bt=0;Bt<2;++Bt){if(Bt===0?(xt=6*D-12*pt+6*Mt,Ft=-3*D+9*pt-9*Mt+3*ft,kt=3*pt-3*D):(xt=6*L-12*Ct+6*$,Ft=-3*L+9*Ct-9*$+3*yt,kt=3*Ct-3*L),Math.abs(Ft)<1e-12){if(Math.abs(xt)<1e-12)continue;wt=-kt/xt,0<wt&&wt<1&&vt.push(wt);continue}It=xt*xt-4*kt*Ft,Lt=Math.sqrt(It),!(It<0)&&(Rt=(-xt+Lt)/(2*Ft),0<Rt&&Rt<1&&vt.push(Rt),Ut=(-xt-Lt)/(2*Ft),0<Ut&&Ut<1&&vt.push(Ut))}let Nt=vt.length,Dt;const jt=Nt;for(;Nt--;)wt=vt[Nt],Dt=1-wt,Pt[0][Nt]=Dt*Dt*Dt*D+3*Dt*Dt*wt*pt+3*Dt*wt*wt*Mt+wt*wt*wt*ft,Pt[1][Nt]=Dt*Dt*Dt*L+3*Dt*Dt*wt*Ct+3*Dt*wt*wt*$+wt*wt*wt*yt;return Pt[0][jt]=D,Pt[1][jt]=L,Pt[0][jt+1]=ft,Pt[1][jt+1]=yt,Pt[0].length=Pt[1].length=jt+2,[Math.min(...Pt[0]),Math.min(...Pt[1]),Math.max(...Pt[0]),Math.max(...Pt[1])]}}m.Util=ut;const K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function mt(F){if(F[0]>="ï"){let L;if(F[0]==="þ"&&F[1]==="ÿ"?L="utf-16be":F[0]==="ÿ"&&F[1]==="þ"?L="utf-16le":F[0]==="ï"&&F[1]==="»"&&F[2]==="¿"&&(L="utf-8"),L)try{const pt=new TextDecoder(L,{fatal:!0}),Ct=a(F);return pt.decode(Ct)}catch(pt){rt(`stringToPDFString: "${pt}".`)}}const D=[];for(let L=0,pt=F.length;L<pt;L++){const Ct=K[F.charCodeAt(L)];D.push(Ct?String.fromCharCode(Ct):F.charAt(L))}return D.join("")}function gt(F){return decodeURIComponent(escape(F))}function bt(F){return unescape(encodeURIComponent(F))}function At(F){return typeof F=="object"&&F!==null&&F.byteLength!==void 0}function Et(F,D){if(F.length!==D.length)return!1;for(let L=0,pt=F.length;L<pt;L++)if(F[L]!==D[L])return!1;return!0}function Tt(F=new Date){return[F.getUTCFullYear().toString(),(F.getUTCMonth()+1).toString().padStart(2,"0"),F.getUTCDate().toString().padStart(2,"0"),F.getUTCHours().toString().padStart(2,"0"),F.getUTCMinutes().toString().padStart(2,"0"),F.getUTCSeconds().toString().padStart(2,"0")].join("")}function St(){const F=Object.create(null);let D=!1;return Object.defineProperty(F,"settled",{get(){return D}}),F.promise=new Promise(function(L,pt){F.resolve=function(Ct){D=!0,L(Ct)},F.reject=function(Ct){D=!0,pt(Ct)}}),F}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var ct,m,b,w,V,G,Q,j,y,E,oe,C,_,le,u,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:c,NodeCMapReaderFactory:n,NodeStandardFontDataFactory:s}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=c,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=n,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=s}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:c}=__w_pdfjs_require__(21);createPDFNetworkStream=n=>new c(n)}else{const{PDFNetworkStream:c}=__w_pdfjs_require__(24),{PDFFetchStream:n}=__w_pdfjs_require__(25);createPDFNetworkStream=s=>(0,_display_utils.isValidFetchUrl)(s.url)?new n(s):new c(s)}function getDocument(c){if(typeof c=="string"||c instanceof URL)c={url:c};else if((0,_util.isArrayBuffer)(c))c={data:c};else if(c instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),c={range:c};else if(typeof c!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!c.url&&!c.data&&!c.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const n=new PDFDocumentLoadingTask,s=c.url?getUrlProp(c.url):null,t=c.data?getDataProp(c.data):null,e=c.httpHeaders||null,d=c.withCredentials===!0,v=c.password??null,P=c.range instanceof PDFDataRangeTransport?c.range:null,N=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let p=c.worker instanceof PDFWorker?c.worker:null;const q=c.verbosity,lt=typeof c.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(c.docBaseUrl)?c.docBaseUrl:null,tt=typeof c.cMapUrl=="string"?c.cMapUrl:null,at=c.cMapPacked!==!1,X=c.CMapReaderFactory||DefaultCMapReaderFactory,W=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,H=c.StandardFontDataFactory||DefaultStandardFontDataFactory,rt=c.stopAtErrors!==!0,ht=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,k=c.isEvalSupported!==!1,o=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!_is_node.isNodeJS,r=typeof c.disableFontFace=="boolean"?c.disableFontFace:_is_node.isNodeJS,A=c.fontExtraProperties===!0,x=c.enableXfa===!0,M=c.ownerDocument||globalThis.document,I=c.disableRange===!0,U=c.disableStream===!0,z=c.disableAutoFetch===!0,it=c.pdfBug===!0,J=P?P.length:c.length??NaN,et=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!_is_node.isNodeJS&&!r,Y=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:X===_display_utils.DOMCMapReaderFactory&&H===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(tt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(W,document.baseURI),a=null;(0,_util.setVerbosityLevel)(q);const h=Y?null:{cMapReaderFactory:new X({baseUrl:tt,isCompressed:at}),standardFontDataFactory:new H({baseUrl:W})};if(!p){const B={verbosity:q,port:_worker_options.GlobalWorkerOptions.workerPort};p=B.port?PDFWorker.fromPort(B):new PDFWorker(B),n._worker=p}const S=n.docId,R={docId:S,apiVersion:"3.4.120",data:t,password:v,disableAutoFetch:z,rangeChunkSize:N,length:J,docBaseUrl:lt,enableXfa:x,evaluatorOptions:{maxImageSize:ht,disableFontFace:r,ignoreErrors:rt,isEvalSupported:k,isOffscreenCanvasSupported:o,fontExtraProperties:A,useSystemFonts:et,cMapUrl:Y?tt:null,standardFontDataUrl:Y?W:null}},T={ignoreErrors:rt,isEvalSupported:k,disableFontFace:r,fontExtraProperties:A,enableXfa:x,ownerDocument:M,disableAutoFetch:z,pdfBug:it,styleElement:a};return p.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");const B=_fetchDocument(p,R),nt=new Promise(function(ot){let ut;P?ut=new _transport_stream.PDFDataTransportStream({length:J,initialData:P.initialData,progressiveDone:P.progressiveDone,contentDispositionFilename:P.contentDispositionFilename,disableRange:I,disableStream:U},P):t||(ut=createPDFNetworkStream({url:s,length:J,httpHeaders:e,withCredentials:d,rangeChunkSize:N,disableRange:I,disableStream:U})),ot(ut)});return Promise.all([B,nt]).then(function([ot,ut]){if(n.destroyed)throw new Error("Loading aborted");const K=new _message_handler.MessageHandler(S,ot,p.port),mt=new WorkerTransport(K,n,ut,T,h);n._transport=mt,K.send("Ready",null)})}).catch(n._capability.reject),n}async function _fetchDocument(c,n){if(c.destroyed)throw new Error("Worker was destroyed");const s=await c.messageHandler.sendWithPromise("GetDocRequest",n,n.data?[n.data.buffer]:null);if(c.destroyed)throw new Error("Worker was destroyed");return s}function getUrlProp(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(_is_node.isNodeJS&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(c){if(_is_node.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(c);if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return(0,_util.stringToBytes)(c);if(typeof c=="object"&&!isNaN(c==null?void 0:c.length)||(0,_util.isArrayBuffer)(c))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const Z=class{constructor(){st(this,m,null);this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ae(Z,ct)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return g(this,m)}set onUnsupportedFeature(n){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),_t(this,m,n)}get promise(){return this._capability.promise}async destroy(){var n;this.destroyed=!0,await((n=this._transport)==null?void 0:n.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=Z;ct=new WeakMap,m=new WeakMap,st(PDFDocumentLoadingTask,ct,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(n,s,t=!1,e=null){this.length=n,this.initialData=s,this.progressiveDone=t,this.contentDispositionFilename=e,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(n){this._rangeListeners.push(n)}addProgressListener(n){this._progressListeners.push(n)}addProgressiveReadListener(n){this._progressiveReadListeners.push(n)}addProgressiveDoneListener(n){this._progressiveDoneListeners.push(n)}onDataRange(n,s){for(const t of this._rangeListeners)t(n,s)}onDataProgress(n,s){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners)t(n,s)})}onDataProgressiveRead(n){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(n)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const n of this._progressiveDoneListeners)n()})}transportReady(){this._readyCapability.resolve()}requestDataRange(n,s){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(n,s){this._pdfInfo=n,this._transport=s}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(n){return this._transport.getPage(n)}getPageIndex(n){return this._transport.getPageIndex(n)}getDestinations(){return this._transport.getDestinations()}getDestination(n){return this._transport.getDestination(n)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(n=!1){return this._transport.startCleanup(n||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(n,s,t,e,d=!1){this._pageIndex=n,this._pageInfo=s,this._ownerDocument=e,this._transport=t,this._stats=d?new _display_utils.StatTimer:null,this._pdfBug=d,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:n,rotation:s=this.rotate,offsetX:t=0,offsetY:e=0,dontFlip:d=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:n,rotation:s,offsetX:t,offsetY:e,dontFlip:d})}getAnnotations({intent:n="display"}={}){const s=this._transport.getRenderingIntent(n);return this._transport.getAnnotations(this._pageIndex,s.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var n;return((n=this._transport._htmlForXfa)==null?void 0:n.children[this._pageIndex])||null}render({canvasContext:n,viewport:s,intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE,transform:d=null,canvasFactory:v=null,background:P=null,optionalContentConfigPromise:N=null,annotationCanvasMap:p=null,pageColors:q=null,printAnnotationStorage:lt=null}){var k,o;(k=this._stats)==null||k.time("Overall");const tt=this._transport.getRenderingIntent(t,e,lt);this.pendingCleanup=!1,N||(N=this._transport.getOptionalContentConfig());let at=this._intentStates.get(tt.cacheKey);at||(at=Object.create(null),this._intentStates.set(tt.cacheKey,at)),at.streamReaderCancelTimeout&&(clearTimeout(at.streamReaderCancelTimeout),at.streamReaderCancelTimeout=null);const X=v||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),W=!!(tt.renderingIntent&_util.RenderingIntentFlag.PRINT);at.displayReadyCapability||(at.displayReadyCapability=(0,_util.createPromiseCapability)(),at.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(o=this._stats)==null||o.time("Page Request"),this._pumpOperatorList(tt));const H=r=>{var A,x;at.renderTasks.delete(rt),(this.cleanupAfterRender||W)&&(this.pendingCleanup=!0),this._tryCleanup(),r?(rt.capability.reject(r),this._abortOperatorList({intentState:at,reason:r instanceof Error?r:new Error(r)})):rt.capability.resolve(),(A=this._stats)==null||A.timeEnd("Rendering"),(x=this._stats)==null||x.timeEnd("Overall")},rt=new InternalRenderTask({callback:H,params:{canvasContext:n,viewport:s,transform:d,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:at.operatorList,pageIndex:this._pageIndex,canvasFactory:X,useRequestAnimationFrame:!W,pdfBug:this._pdfBug,pageColors:q});(at.renderTasks||(at.renderTasks=new Set)).add(rt);const ht=rt.task;return Promise.all([at.displayReadyCapability.promise,N]).then(([r,A])=>{var x;if(this.pendingCleanup){H();return}(x=this._stats)==null||x.time("Rendering"),rt.initializeGraphics({transparency:r,optionalContentConfig:A}),rt.operatorListChanged()}).catch(H),ht}getOperatorList({intent:n="display",annotationMode:s=_util.AnnotationMode.ENABLE,printAnnotationStorage:t=null}={}){var N;function e(){v.operatorList.lastChunk&&(v.opListReadCapability.resolve(v.operatorList),v.renderTasks.delete(P))}const d=this._transport.getRenderingIntent(n,s,t,!0);let v=this._intentStates.get(d.cacheKey);v||(v=Object.create(null),this._intentStates.set(d.cacheKey,v));let P;return v.opListReadCapability||(P=Object.create(null),P.operatorListChanged=e,v.opListReadCapability=(0,_util.createPromiseCapability)(),(v.renderTasks||(v.renderTasks=new Set)).add(P),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(d)),v.opListReadCapability.promise}streamTextContent({disableCombineTextItems:n=!1,includeMarkedContent:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:n!==!0,includeMarkedContent:s===!0},{highWaterMark:100,size(e){return e.items.length}})}getTextContent(n={}){if(this._transport._htmlForXfa)return this.getXfa().then(t=>_xfa_text.XfaText.textContent(t));const s=this.streamTextContent(n);return new Promise(function(t,e){function d(){v.read().then(function({value:N,done:p}){if(p){t(P);return}Object.assign(P.styles,N.styles),P.items.push(...N.items),d()},e)}const v=s.getReader(),P={items:[],styles:Object.create(null)};d()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const n=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const t of s.renderTasks)n.push(t.completed),t.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(n)}cleanup(n=!1){return this.pendingCleanup=!0,this._tryCleanup(n)}_tryCleanup(n=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:s,operatorList:t}of this._intentStates.values())if(s.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),n&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(n,s){var e,d;const t=this._intentStates.get(s);t&&((e=this._stats)==null||e.timeEnd("Page Request"),(d=t.displayReadyCapability)==null||d.resolve(n))}_renderPageChunk(n,s){for(let t=0,e=n.length;t<e;t++)s.operatorList.fnArray.push(n.fnArray[t]),s.operatorList.argsArray.push(n.argsArray[t]);s.operatorList.lastChunk=n.lastChunk,s.operatorList.separateAnnots=n.separateAnnots;for(const t of s.renderTasks)t.operatorListChanged();n.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:n,cacheKey:s,annotationStorageMap:t}){const d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:s,annotationStorage:t}).getReader(),v=this._intentStates.get(s);v.streamReader=d;const P=()=>{d.read().then(({value:N,done:p})=>{if(p){v.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(N,v),P())},N=>{if(v.streamReader=null,!this._transport.destroyed){if(v.operatorList){v.operatorList.lastChunk=!0;for(const p of v.renderTasks)p.operatorListChanged();this._tryCleanup()}if(v.displayReadyCapability)v.displayReadyCapability.reject(N);else if(v.opListReadCapability)v.opListReadCapability.reject(N);else throw N}})};P()}_abortOperatorList({intentState:n,reason:s,force:t=!1}){if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!t){if(n.renderTasks.size>0)return;if(s instanceof _display_utils.RenderingCancelledException){let e=RENDERING_CANCELLED_TIMEOUT;s.extraDelay>0&&s.extraDelay<1e3&&(e+=s.extraDelay),n.streamReaderCancelTimeout=setTimeout(()=>{n.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:n,reason:s,force:!0})},e);return}}if(n.streamReader.cancel(new _util.AbortException(s.message)).catch(()=>{}),n.streamReader=null,!this._transport.destroyed){for(const[e,d]of this._intentStates)if(d===n){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){st(this,b,new Set);st(this,w,Promise.resolve())}postMessage(n,s){const t={data:structuredClone(n,s)};g(this,w).then(()=>{for(const e of g(this,b))e.call(this,t)})}addEventListener(n,s){g(this,b).add(s)}removeEventListener(n,s){g(this,b).delete(s)}terminate(){g(this,b).clear()}}b=new WeakMap,w=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const c=(V=document==null?void 0:document.currentScript)==null?void 0:V.src;c&&(PDFWorkerUtil.fallbackWorkerSrc=c.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(c,n){let s;try{if(s=new URL(c),!s.origin||s.origin==="null")return!1}catch{return!1}const t=new URL(n,s);return s.origin===t.origin},PDFWorkerUtil.createCDNWrapper=function(c){const n=`importScripts("${c}");`;return URL.createObjectURL(new Blob([n]))}}const _PDFWorker=class{constructor({name:c=null,port:n=null,verbosity:s=(0,_util.getVerbosityLevel)()}={}){if(n&&g(_PDFWorker,G).has(n))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=c,this.destroyed=!1,this.verbosity=s,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,n){g(_PDFWorker,G).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(c){this._port=c,this._messageHandler=new _message_handler.MessageHandler("main","worker",c),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:c}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,c)||(c=PDFWorkerUtil.createCDNWrapper(new URL(c,window.location).href));const n=new Worker(c),s=new _message_handler.MessageHandler("main","worker",n),t=()=>{n.removeEventListener("error",e),s.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},e=()=>{this._webWorker||t()};n.addEventListener("error",e),s.on("test",v=>{if(n.removeEventListener("error",e),this.destroyed){t();return}v?(this._messageHandler=s,this._port=n,this._webWorker=n,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),n.terminate())}),s.on("ready",v=>{if(n.removeEventListener("error",e),this.destroyed){t();return}try{d()}catch{this._setupFakeWorker()}});const d=()=>{const v=new Uint8Array;s.send("test",v,[v.buffer])};d();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(c=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new LoopbackPort;this._port=n;const s=`fake${PDFWorkerUtil.fakeWorkerId++}`,t=new _message_handler.MessageHandler(s+"_worker",s,n);c.setup(t,n);const e=new _message_handler.MessageHandler(s,s+"_worker",n);this._messageHandler=e,this._readyCapability.resolve(),e.send("configure",{verbosity:this.verbosity})}).catch(c=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${c.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),g(_PDFWorker,G).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(c){if(!(c!=null&&c.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return g(this,G).has(c.port)?g(this,G).get(c.port):new _PDFWorker(c)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var c;try{return((c=globalThis.pdfjsWorker)==null?void 0:c.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;G=new WeakMap,st(PDFWorker,G,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(n,s,t,e,d){st(this,E);st(this,Q,new Map);st(this,j,new Map);st(this,y,new Map);this.messageHandler=n,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:e.ownerDocument,styleElement:e.styleElement}),this._params=e,this.cMapReaderFactory=d==null?void 0:d.cMapReaderFactory,this.standardFontDataFactory=d==null?void 0:d.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(n,s=_util.AnnotationMode.ENABLE,t=null,e=!1){let d=_util.RenderingIntentFlag.DISPLAY,v=null;switch(n){case"any":d=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":d=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${n}`)}switch(s){case _util.AnnotationMode.DISABLE:d+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:d+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:d+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,v=(d&_util.RenderingIntentFlag.PRINT&&t instanceof _annotation_storage.PrintAnnotationStorage?t:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${s}`)}return e&&(d+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:d,cacheKey:`${d}_${_annotation_storage.AnnotationStorage.getHash(v)}`,annotationStorageMap:v}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const n=[];for(const t of g(this,j).values())n.push(t._destroy());g(this,j).clear(),g(this,y).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return n.push(s),Promise.all(n).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),g(this,Q).clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:n,loadingTask:s}=this;n.on("GetReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=d=>{this._lastProgress={loaded:d.loaded,total:d.total}},e.onPull=()=>{this._fullReader.read().then(function({value:d,done:v}){if(v){e.close();return}(0,_util.assert)(d instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{e.error(d)})},e.onCancel=d=>{this._fullReader.cancel(d),e.ready.catch(v=>{if(!this.destroyed)throw v})}}),n.on("ReaderHeadersReady",t=>{const e=(0,_util.createPromiseCapability)(),d=this._fullReader;return d.headersReady.then(()=>{var v;(!d.isStreamingSupported||!d.isRangeSupported)&&(this._lastProgress&&((v=s.onProgress)==null||v.call(s,this._lastProgress)),d.onProgress=P=>{var N;(N=s.onProgress)==null||N.call(s,{loaded:P.loaded,total:P.total})}),e.resolve({isStreamingSupported:d.isStreamingSupported,isRangeSupported:d.isRangeSupported,contentLength:d.contentLength})},e.reject),e.promise}),n.on("GetRangeReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const d=this._networkStream.getRangeReader(t.begin,t.end);if(!d){e.close();return}e.onPull=()=>{d.read().then(function({value:v,done:P}){if(P){e.close();return}(0,_util.assert)(v instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(v),1,[v])}).catch(v=>{e.error(v)})},e.onCancel=v=>{d.cancel(v),e.ready.catch(P=>{if(!this.destroyed)throw P})}}),n.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(t,this))}),n.on("DocException",function(t){let e;switch(t.name){case"PasswordException":e=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":e=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":e=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":e=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":e=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}s._capability.reject(e)}),n.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),s.onPassword){const e=d=>{d instanceof Error?this._passwordCapability.reject(d):this._passwordCapability.resolve({password:d})};try{s.onPassword(e,t.code)}catch(d){this._passwordCapability.reject(d)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),n.on("DataLoaded",t=>{var e;(e=s.onProgress)==null||e.call(s,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),n.on("StartRenderPage",t=>{if(this.destroyed)return;g(this,j).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),n.on("commonobj",([t,e,d])=>{var v;if(!this.destroyed&&!this.commonObjs.has(t))switch(e){case"Font":const P=this._params;if("error"in d){const q=d.error;(0,_util.warn)(`Error during font loading: ${q}`),this.commonObjs.resolve(t,q);break}let N=null;P.pdfBug&&((v=globalThis.FontInspector)!=null&&v.enabled)&&(N={registerFont(q,lt){globalThis.FontInspector.fontAdded(q,lt)}});const p=new _font_loader.FontFaceObject(d,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:N});this.fontLoader.bind(p).catch(q=>n.sendWithPromise("FontFallback",{id:t})).finally(()=>{!P.fontExtraProperties&&p.data&&(p.data=null),this.commonObjs.resolve(t,p)});break;case"FontPath":case"Image":this.commonObjs.resolve(t,d);break;default:throw new Error(`Got unknown common object type ${e}`)}}),n.on("obj",([t,e,d,v])=>{var N;if(this.destroyed)return;const P=g(this,j).get(e);if(!P.objs.has(t))switch(d){case"Image":P.objs.resolve(t,v);const p=8e6;if(v){let q;if(v.bitmap){const{width:lt,height:tt}=v;q=lt*tt*4}else q=((N=v.data)==null?void 0:N.length)||0;q>p&&(P.cleanupAfterRender=!0)}break;case"Pattern":P.objs.resolve(t,v);break;default:throw new Error(`Got unknown object type ${d}`)}}),n.on("DocProgress",t=>{var e;this.destroyed||(e=s.onProgress)==null||e.call(s,{loaded:t.loaded,total:t.total})}),n.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),n.on("FetchBuiltInCMap",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),n.on("FetchStandardFontData",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:n}){var s,t;this.destroyed||(t=(s=this.loadingTask).onUnsupportedFeature)==null||t.call(s,n)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((n=this._fullReader)==null?void 0:n.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(n){if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=n-1,t=g(this,y).get(s);if(t)return t;const e=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(d=>{if(this.destroyed)throw new Error("Transport destroyed");const v=new PDFPageProxy(s,d,this,this._params.ownerDocument,this._params.pdfBug);return g(this,j).set(s,v),v});return g(this,y).set(s,e),e}getPageIndex(n){return typeof n!="object"||n===null||!Number.isInteger(n.num)||n.num<0||!Number.isInteger(n.gen)||n.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:n.num,gen:n.gen})}getAnnotations(n,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:s})}getFieldObjects(){return dt(this,E,oe).call(this,"GetFieldObjects")}hasJSActions(){return dt(this,E,oe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(n){return typeof n!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}getStructTree(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(n=>new _optional_content_config.OptionalContentConfig(n))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const n="GetMetadata",s=g(this,Q).get(n);if(s)return s;const t=this.messageHandler.sendWithPromise(n,null).then(e=>{var d,v;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:((d=this._fullReader)==null?void 0:d.filename)??null,contentLength:((v=this._fullReader)==null?void 0:v.contentLength)??null}});return g(this,Q).set(n,t),t}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(n=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of g(this,j).values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),n||this.fontLoader.clear(),g(this,Q).clear()}}get loadingParams(){const{disableAutoFetch:n,enableXfa:s}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:n,enableXfa:s})}}Q=new WeakMap,j=new WeakMap,y=new WeakMap,E=new WeakSet,oe=function(n,s=null){const t=g(this,Q).get(n);if(t)return t;const e=this.messageHandler.sendWithPromise(n,s);return g(this,Q).set(n,e),e};class PDFObjects{constructor(){st(this,_);st(this,C,Object.create(null))}get(n,s=null){if(s){const e=dt(this,_,le).call(this,n);return e.capability.promise.then(()=>s(e.data)),null}const t=g(this,C)[n];if(!(t!=null&&t.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${n}.`);return t.data}has(n){const s=g(this,C)[n];return(s==null?void 0:s.capability.settled)||!1}resolve(n,s=null){const t=dt(this,_,le).call(this,n);t.data=s,t.capability.resolve()}clear(){var n;for(const s in g(this,C)){const{data:t}=g(this,C)[s];(n=t==null?void 0:t.bitmap)==null||n.close()}_t(this,C,Object.create(null))}}C=new WeakMap,_=new WeakSet,le=function(n){const s=g(this,C)[n];return s||(g(this,C)[n]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(n){st(this,u,null);_t(this,u,n),this.onContinue=null}get promise(){return g(this,u).capability.promise}cancel(n=0){g(this,u).cancel(null,n)}get separateAnnots(){const{separateAnnots:n}=g(this,u).operatorList;if(!n)return!1;const{annotationCanvasMap:s}=g(this,u);return n.form||n.canvas&&(s==null?void 0:s.size)>0}}u=new WeakMap,exports.RenderTask=RenderTask;const l=class{constructor({callback:n,params:s,objs:t,commonObjs:e,annotationCanvasMap:d,operatorList:v,pageIndex:P,canvasFactory:N,useRequestAnimationFrame:p=!1,pdfBug:q=!1,pageColors:lt=null}){this.callback=n,this.params=s,this.objs=t,this.commonObjs=e,this.annotationCanvasMap=d,this.operatorListIdx=null,this.operatorList=v,this._pageIndex=P,this.canvasFactory=N,this._pdfBug=q,this.pageColors=lt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:n=!1,optionalContentConfig:s}){var P,N;if(this.cancelled)return;if(this._canvas){if(g(l,i).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");g(l,i).add(this._canvas)}this._pdfBug&&((P=globalThis.StepperManager)!=null&&P.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:t,viewport:e,transform:d,background:v}=this.params;this.gfx=new _canvas.CanvasGraphics(t,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:d,viewport:e,transparency:n,background:v}),this.operatorListIdx=0,this.graphicsReady=!0,(N=this.graphicsReadyCallback)==null||N.call(this)}cancel(n=null,s=0){var t;this.running=!1,this.cancelled=!0,(t=this.gfx)==null||t.endDrawing(),this._canvas&&g(l,i).delete(this._canvas),this.callback(n||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",s))}operatorListChanged(){var n;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(n=this.stepper)==null||n.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&g(l,i).delete(this._canvas),this.callback())))}};let InternalRenderTask=l;i=new WeakMap,st(InternalRenderTask,i,new WeakSet);const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build},(ct,m,Z)=>{var j,y,E,we,C;Object.defineProperty(m,"__esModule",{value:!0}),m.PrintAnnotationStorage=m.AnnotationStorage=void 0;var b=Z(1),w=Z(4),V=Z(8);class G{constructor(){st(this,E);st(this,j,!1);st(this,y,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(f,u){const i=g(this,y).get(f);return i===void 0?u:Object.assign(u,i)}getRawValue(f){return g(this,y).get(f)}remove(f){if(g(this,y).delete(f),g(this,y).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const u of g(this,y).values())if(u instanceof w.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(f,u){const i=g(this,y).get(f);let l=!1;if(i!==void 0)for(const[c,n]of Object.entries(u))i[c]!==n&&(l=!0,i[c]=n);else l=!0,g(this,y).set(f,u);l&&dt(this,E,we).call(this),u instanceof w.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(u.constructor._type)}has(f){return g(this,y).has(f)}getAll(){return g(this,y).size>0?(0,b.objectFromMap)(g(this,y)):null}setAll(f){for(const[u,i]of Object.entries(f))this.setValue(u,i)}get size(){return g(this,y).size}resetModified(){g(this,j)&&(_t(this,j,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Q(this)}get serializable(){if(g(this,y).size===0)return null;const f=new Map;for(const[u,i]of g(this,y)){const l=i instanceof w.AnnotationEditor?i.serialize():i;l&&f.set(u,l)}return f}static getHash(f){if(!f)return"";const u=new V.MurmurHash3_64;for(const[i,l]of f)u.update(`${i}:${JSON.stringify(l)}`);return u.hexdigest()}}j=new WeakMap,y=new WeakMap,E=new WeakSet,we=function(){g(this,j)||(_t(this,j,!0),typeof this.onSetModified=="function"&&this.onSetModified())},m.AnnotationStorage=G;class Q extends G{constructor(u){super();st(this,C,null);_t(this,C,structuredClone(u.serializable))}get print(){(0,b.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return g(this,C)}}C=new WeakMap,m.PrintAnnotationStorage=Q},(ct,m,Z)=>{var G,Q,j,y,E,O;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditor=void 0;var b=Z(5),w=Z(1);const C=class{constructor(f){st(this,G,this.focusin.bind(this));st(this,Q,this.focusout.bind(this));st(this,j,!1);st(this,y,!1);st(this,E,!1);Ot(this,"_uiManager",null);st(this,O,C._zIndex++);this.constructor===C&&(0,w.unreachable)("Cannot initialize AnnotationEditor."),this.parent=f.parent,this.id=f.id,this.width=this.height=null,this.pageIndex=f.parent.pageIndex,this.name=f.name,this.div=null,this._uiManager=f.uiManager;const{rotation:u,rawDims:{pageWidth:i,pageHeight:l,pageX:c,pageY:n}}=this.parent.viewport;this.rotation=u,this.pageDimensions=[i,l],this.pageTranslation=[c,n];const[s,t]=this.parentDimensions;this.x=f.x/s,this.y=f.y/t,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,w.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(f){this._uiManager.addCommands(f)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=g(this,O)}setParent(f){f!==null&&(this.pageIndex=f.pageIndex,this.pageDimensions=f.pageDimensions),this.parent=f}focusin(f){g(this,j)?_t(this,j,!1):this.parent.setSelected(this)}focusout(f){var i;if(!this.isAttachedToDOM)return;const u=f.relatedTarget;u!=null&&u.closest(`#${this.id}`)||(f.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(f){const u=this.parent.div.getBoundingClientRect();this.startX=f.clientX-u.x,this.startY=f.clientY-u.y,f.dataTransfer.setData("text/plain",this.id),f.dataTransfer.effectAllowed="move"}setAt(f,u,i,l){const[c,n]=this.parentDimensions;[i,l]=this.screenToPageTranslation(i,l),this.x=(f+i)/c,this.y=(u+l)/n,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(f,u){const[i,l]=this.parentDimensions;[f,u]=this.screenToPageTranslation(f,u),this.x+=f/i,this.y+=u/l,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(f,u){switch(this.parentRotation){case 90:return[u,-f];case 180:return[-f,-u];case 270:return[-u,f];default:return[f,u]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:f}=this._uiManager.viewParameters,[u,i]=this.pageDimensions;return[u*f,i*f]}setDims(f,u){const[i,l]=this.parentDimensions;this.div.style.width=`${100*f/i}%`,this.div.style.height=`${100*u/l}%`}fixDims(){const{style:f}=this.div,{height:u,width:i}=f,l=i.endsWith("%"),c=u.endsWith("%");if(l&&c)return;const[n,s]=this.parentDimensions;l||(f.width=`${100*parseFloat(i)/n}%`),c||(f.height=`${100*parseFloat(u)/s}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",g(this,G)),this.div.addEventListener("focusout",g(this,Q));const[f,u]=this.getInitialTranslation();return this.translate(f,u),(0,b.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(f){const{isMac:u}=w.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&u){f.preventDefault();return}f.ctrlKey&&!u||f.shiftKey||f.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this),_t(this,j,!0)}getRect(f,u){const i=this.parentScale,[l,c]=this.pageDimensions,[n,s]=this.pageTranslation,t=f/i,e=u/i,d=this.x*l,v=this.y*c,P=this.width*l,N=this.height*c;switch(this.rotation){case 0:return[d+t+n,c-v-e-N+s,d+t+P+n,c-v-e+s];case 90:return[d+e+n,c-v+t+s,d+e+N+n,c-v+t+P+s];case 180:return[d-t-P+n,c-v+e+s,d-t+n,c-v+e+N+s];case 270:return[d-e-N+n,c-v-t-P+s,d-e+n,c-v-t+s];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(f,u){const[i,l,c,n]=f,s=c-i,t=n-l;switch(this.rotation){case 0:return[i,u-n,s,t];case 90:return[i,u-l,t,s];case 180:return[c,u-l,s,t];case 270:return[c,u-n,t,s];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_t(this,E,!0)}disableEditMode(){_t(this,E,!1)}isInEditMode(){return g(this,E)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var f;(f=this.div)==null||f.addEventListener("focusin",g(this,G))}serialize(){(0,w.unreachable)("An editor must be serializable")}static deserialize(f,u,i){const l=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:i});l.rotation=f.rotation;const[c,n]=l.pageDimensions,[s,t,e,d]=l.getRectInCurrentCoords(f.rect,n);return l.x=s/c,l.y=t/n,l.width=e/c,l.height=d/n,l}remove(){this.div.removeEventListener("focusin",g(this,G)),this.div.removeEventListener("focusout",g(this,Q)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var f;(f=this.div)==null||f.classList.add("selectedEditor")}unselect(){var f;(f=this.div)==null||f.classList.remove("selectedEditor")}updateParams(f,u){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return g(this,y)}set isEditing(f){_t(this,y,f),f?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let V=C;G=new WeakMap,Q=new WeakMap,j=new WeakMap,y=new WeakMap,E=new WeakMap,O=new WeakMap,Ot(V,"_colorManager",new b.ColorManager),Ot(V,"_zIndex",1),m.AnnotationEditor=V},(ct,m,Z)=>{var C,_,f,u,i,l,ke,s,t,e,d,v,P,N,p,q,lt,tt,at,X,W,H,rt,ht,k,o,r,A,x,M,I,Re,z,ce,J,Fe,Y,Me,h,Ht,R,$t,B,De,ot,Oe,K,he,gt,Yt,At,de;Object.defineProperty(m,"__esModule",{value:!0}),m.KeyboardManager=m.CommandManager=m.ColorManager=m.AnnotationEditorUIManager=void 0,m.bindEvents=V,m.opacityToHex=G;var b=Z(1),w=Z(6);function V(St,F,D){for(const L of D)F.addEventListener(L,St[L].bind(St))}function G(St){return Math.round(Math.min(255,Math.max(1,255*St))).toString(16).padStart(2,"0")}class Q{constructor(){st(this,C,0)}getId(){return`${b.AnnotationEditorPrefix}${ae(this,C)._++}`}}C=new WeakMap;class j{constructor(F=128){st(this,_,[]);st(this,f,!1);st(this,u,void 0);st(this,i,-1);_t(this,u,F)}add({cmd:F,undo:D,mustExec:L,type:pt=NaN,overwriteIfSameType:Ct=!1,keepUndo:Mt=!1}){if(L&&F(),g(this,f))return;const $={cmd:F,undo:D,type:pt};if(g(this,i)===-1){g(this,_).length>0&&(g(this,_).length=0),_t(this,i,0),g(this,_).push($);return}if(Ct&&g(this,_)[g(this,i)].type===pt){Mt&&($.undo=g(this,_)[g(this,i)].undo),g(this,_)[g(this,i)]=$;return}const ft=g(this,i)+1;ft===g(this,u)?g(this,_).splice(0,1):(_t(this,i,ft),ft<g(this,_).length&&g(this,_).splice(ft)),g(this,_).push($)}undo(){g(this,i)!==-1&&(_t(this,f,!0),g(this,_)[g(this,i)].undo(),_t(this,f,!1),_t(this,i,g(this,i)-1))}redo(){g(this,i)<g(this,_).length-1&&(_t(this,i,g(this,i)+1),_t(this,f,!0),g(this,_)[g(this,i)].cmd(),_t(this,f,!1))}hasSomethingToUndo(){return g(this,i)!==-1}hasSomethingToRedo(){return g(this,i)<g(this,_).length-1}destroy(){_t(this,_,null)}}_=new WeakMap,f=new WeakMap,u=new WeakMap,i=new WeakMap,m.CommandManager=j;class y{constructor(F){st(this,l);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:D}=b.FeatureTest.platform;for(const[L,pt]of F)for(const Ct of L){const Mt=Ct.startsWith("mac+");D&&Mt?(this.callbacks.set(Ct.slice(4),pt),this.allKeys.add(Ct.split("+").at(-1))):!D&&!Mt&&(this.callbacks.set(Ct,pt),this.allKeys.add(Ct.split("+").at(-1)))}}exec(F,D){if(!this.allKeys.has(D.key))return;const L=this.callbacks.get(dt(this,l,ke).call(this,D));L&&(L.bind(F)(),D.stopPropagation(),D.preventDefault())}}l=new WeakSet,ke=function(F){F.altKey&&this.buffer.push("alt"),F.ctrlKey&&this.buffer.push("ctrl"),F.metaKey&&this.buffer.push("meta"),F.shiftKey&&this.buffer.push("shift"),this.buffer.push(F.key);const D=this.buffer.join("+");return this.buffer.length=0,D},m.KeyboardManager=y;const n=class{get _colors(){const F=new Map([["CanvasText",null],["Canvas",null]]);return(0,w.getColorValues)(F),(0,b.shadow)(this,"_colors",F)}convert(F){const D=(0,w.getRGB)(F);if(!window.matchMedia("(forced-colors: active)").matches)return D;for(const[L,pt]of this._colors)if(pt.every((Ct,Mt)=>Ct===D[Mt]))return n._colorsMapping.get(L);return D}getHexCode(F){const D=this._colors.get(F);return D?b.Util.makeHexColor(...D):F}};let E=n;Ot(E,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),m.ColorManager=E;const Tt=class{constructor(F,D,L){st(this,I);st(this,z);st(this,J);st(this,Y);st(this,h);st(this,R);st(this,B);st(this,ot);st(this,K);st(this,gt);st(this,At);st(this,s,null);st(this,t,new Map);st(this,e,new Map);st(this,d,null);st(this,v,new j);st(this,P,0);st(this,N,null);st(this,p,new Set);st(this,q,null);st(this,lt,new Q);st(this,tt,!1);st(this,at,b.AnnotationEditorType.NONE);st(this,X,new Set);st(this,W,this.copy.bind(this));st(this,H,this.cut.bind(this));st(this,rt,this.paste.bind(this));st(this,ht,this.keydown.bind(this));st(this,k,this.onEditingAction.bind(this));st(this,o,this.onPageChanging.bind(this));st(this,r,this.onScaleChanging.bind(this));st(this,A,this.onRotationChanging.bind(this));st(this,x,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});st(this,M,null);_t(this,M,F),_t(this,q,D),g(this,q)._on("editingaction",g(this,k)),g(this,q)._on("pagechanging",g(this,o)),g(this,q)._on("scalechanging",g(this,r)),g(this,q)._on("rotationchanging",g(this,A)),_t(this,d,L),this.viewParameters={realScale:w.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){dt(this,z,ce).call(this),g(this,q)._off("editingaction",g(this,k)),g(this,q)._off("pagechanging",g(this,o)),g(this,q)._off("scalechanging",g(this,r)),g(this,q)._off("rotationchanging",g(this,A));for(const F of g(this,e).values())F.destroy();g(this,e).clear(),g(this,t).clear(),g(this,p).clear(),_t(this,s,null),g(this,X).clear(),g(this,v).destroy()}onPageChanging({pageNumber:F}){_t(this,P,F-1)}focusMainContainer(){g(this,M).focus()}addShouldRescale(F){g(this,p).add(F)}removeShouldRescale(F){g(this,p).delete(F)}onScaleChanging({scale:F}){this.commitOrRemove(),this.viewParameters.realScale=F*w.PixelsPerInch.PDF_TO_CSS_UNITS;for(const D of g(this,p))D.onScaleChanging()}onRotationChanging({pagesRotation:F}){this.commitOrRemove(),this.viewParameters.rotation=F}addToAnnotationStorage(F){!F.isEmpty()&&g(this,d)&&!g(this,d).has(F.id)&&g(this,d).setValue(F.id,F)}copy(F){if(F.preventDefault(),g(this,s)&&g(this,s).commitOrRemove(),!this.hasSelection)return;const D=[];for(const L of g(this,X))L.isEmpty()||D.push(L.serialize());D.length!==0&&F.clipboardData.setData("application/pdfjs",JSON.stringify(D))}cut(F){this.copy(F),this.delete()}paste(F){F.preventDefault();let D=F.clipboardData.getData("application/pdfjs");if(!D)return;try{D=JSON.parse(D)}catch(pt){(0,b.warn)(`paste: "${pt.message}".`);return}if(!Array.isArray(D))return;this.unselectAll();const L=g(this,e).get(g(this,P));try{const pt=[];for(const $ of D){const ft=L.deserialize($);if(!ft)return;pt.push(ft)}const Ct=()=>{for(const $ of pt)dt(this,K,he).call(this,$);dt(this,At,de).call(this,pt)},Mt=()=>{for(const $ of pt)$.remove()};this.addCommands({cmd:Ct,undo:Mt,mustExec:!0})}catch(pt){(0,b.warn)(`paste: "${pt.message}".`)}}keydown(F){var D;(D=this.getActive())!=null&&D.shouldGetKeyboardEvents()||Tt._keyboardManager.exec(this,F)}onEditingAction(F){["undo","redo","delete","selectAll"].includes(F.name)&&this[F.name]()}setEditingState(F){F?(dt(this,I,Re).call(this),dt(this,J,Fe).call(this),dt(this,h,Ht).call(this,{isEditing:g(this,at)!==b.AnnotationEditorType.NONE,isEmpty:dt(this,gt,Yt).call(this),hasSomethingToUndo:g(this,v).hasSomethingToUndo(),hasSomethingToRedo:g(this,v).hasSomethingToRedo(),hasSelectedEditor:!1})):(dt(this,z,ce).call(this),dt(this,Y,Me).call(this),dt(this,h,Ht).call(this,{isEditing:!1}))}registerEditorTypes(F){if(!g(this,N)){_t(this,N,F);for(const D of g(this,N))dt(this,R,$t).call(this,D.defaultPropertiesToUpdate)}}getId(){return g(this,lt).getId()}get currentLayer(){return g(this,e).get(g(this,P))}get currentPageIndex(){return g(this,P)}addLayer(F){g(this,e).set(F.pageIndex,F),g(this,tt)?F.enable():F.disable()}removeLayer(F){g(this,e).delete(F.pageIndex)}updateMode(F){if(_t(this,at,F),F===b.AnnotationEditorType.NONE)this.setEditingState(!1),dt(this,ot,Oe).call(this);else{this.setEditingState(!0),dt(this,B,De).call(this);for(const D of g(this,e).values())D.updateMode(F)}}updateToolbar(F){F!==g(this,at)&&g(this,q).dispatch("switchannotationeditormode",{source:this,mode:F})}updateParams(F,D){if(g(this,N)){for(const L of g(this,X))L.updateParams(F,D);for(const L of g(this,N))L.updateDefaultParams(F,D)}}getEditors(F){const D=[];for(const L of g(this,t).values())L.pageIndex===F&&D.push(L);return D}getEditor(F){return g(this,t).get(F)}addEditor(F){g(this,t).set(F.id,F)}removeEditor(F){var D;g(this,t).delete(F.id),this.unselect(F),(D=g(this,d))==null||D.remove(F.id)}setActiveEditor(F){g(this,s)!==F&&(_t(this,s,F),F&&dt(this,R,$t).call(this,F.propertiesToUpdate))}toggleSelected(F){if(g(this,X).has(F)){g(this,X).delete(F),F.unselect(),dt(this,h,Ht).call(this,{hasSelectedEditor:this.hasSelection});return}g(this,X).add(F),F.select(),dt(this,R,$t).call(this,F.propertiesToUpdate),dt(this,h,Ht).call(this,{hasSelectedEditor:!0})}setSelected(F){for(const D of g(this,X))D!==F&&D.unselect();g(this,X).clear(),g(this,X).add(F),F.select(),dt(this,R,$t).call(this,F.propertiesToUpdate),dt(this,h,Ht).call(this,{hasSelectedEditor:!0})}isSelected(F){return g(this,X).has(F)}unselect(F){F.unselect(),g(this,X).delete(F),dt(this,h,Ht).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return g(this,X).size!==0}undo(){g(this,v).undo(),dt(this,h,Ht).call(this,{hasSomethingToUndo:g(this,v).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:dt(this,gt,Yt).call(this)})}redo(){g(this,v).redo(),dt(this,h,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:g(this,v).hasSomethingToRedo(),isEmpty:dt(this,gt,Yt).call(this)})}addCommands(F){g(this,v).add(F),dt(this,h,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:dt(this,gt,Yt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const F=[...g(this,X)],D=()=>{for(const pt of F)pt.remove()},L=()=>{for(const pt of F)dt(this,K,he).call(this,pt)};this.addCommands({cmd:D,undo:L,mustExec:!0})}commitOrRemove(){var F;(F=g(this,s))==null||F.commitOrRemove()}selectAll(){for(const F of g(this,X))F.commit();dt(this,At,de).call(this,g(this,t).values())}unselectAll(){if(g(this,s)){g(this,s).commitOrRemove();return}if(g(this,X).size!==0){for(const F of g(this,X))F.unselect();g(this,X).clear(),dt(this,h,Ht).call(this,{hasSelectedEditor:!1})}}isActive(F){return g(this,s)===F}getActive(){return g(this,s)}getMode(){return g(this,at)}};let O=Tt;s=new WeakMap,t=new WeakMap,e=new WeakMap,d=new WeakMap,v=new WeakMap,P=new WeakMap,N=new WeakMap,p=new WeakMap,q=new WeakMap,lt=new WeakMap,tt=new WeakMap,at=new WeakMap,X=new WeakMap,W=new WeakMap,H=new WeakMap,rt=new WeakMap,ht=new WeakMap,k=new WeakMap,o=new WeakMap,r=new WeakMap,A=new WeakMap,x=new WeakMap,M=new WeakMap,I=new WeakSet,Re=function(){g(this,M).addEventListener("keydown",g(this,ht))},z=new WeakSet,ce=function(){g(this,M).removeEventListener("keydown",g(this,ht))},J=new WeakSet,Fe=function(){document.addEventListener("copy",g(this,W)),document.addEventListener("cut",g(this,H)),document.addEventListener("paste",g(this,rt))},Y=new WeakSet,Me=function(){document.removeEventListener("copy",g(this,W)),document.removeEventListener("cut",g(this,H)),document.removeEventListener("paste",g(this,rt))},h=new WeakSet,Ht=function(F){Object.entries(F).some(([L,pt])=>g(this,x)[L]!==pt)&&g(this,q).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(g(this,x),F)})},R=new WeakSet,$t=function(F){g(this,q).dispatch("annotationeditorparamschanged",{source:this,details:F})},B=new WeakSet,De=function(){if(!g(this,tt)){_t(this,tt,!0);for(const F of g(this,e).values())F.enable()}},ot=new WeakSet,Oe=function(){if(this.unselectAll(),g(this,tt)){_t(this,tt,!1);for(const F of g(this,e).values())F.disable()}},K=new WeakSet,he=function(F){const D=g(this,e).get(F.pageIndex);D?D.addOrRebuild(F):this.addEditor(F)},gt=new WeakSet,Yt=function(){if(g(this,t).size===0)return!0;if(g(this,t).size===1)for(const F of g(this,t).values())return F.isEmpty();return!1},At=new WeakSet,de=function(F){g(this,X).clear();for(const D of F)D.isEmpty()||(g(this,X).add(D),D.select());dt(this,h,Ht).call(this,{hasSelectedEditor:!0})},Ot(O,"_keyboardManager",new y([[["ctrl+a","mac+meta+a"],Tt.prototype.selectAll],[["ctrl+z","mac+meta+z"],Tt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Tt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Tt.prototype.delete],[["Escape","mac+Escape"],Tt.prototype.unselectAll]])),m.AnnotationEditorUIManager=O},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.StatTimer=m.RenderingCancelledException=m.PixelsPerInch=m.PageViewport=m.PDFDateString=m.DOMStandardFontDataFactory=m.DOMSVGFactory=m.DOMCanvasFactory=m.DOMCMapReaderFactory=m.AnnotationPrefix=void 0,m.deprecated=e,m.getColorValues=p,m.getCurrentTransform=q,m.getCurrentTransformInverse=lt,m.getFilenameFromUrl=l,m.getPdfFilenameFromUrl=c,m.getRGB=N,m.getXfaPageViewport=P,m.isDataScheme=u,m.isPdfFile=i,m.isValidFetchUrl=s,m.loadScript=t,m.setLayerDimensions=tt;var b=Z(7),w=Z(1);const V="http://www.w3.org/2000/svg",G="pdfjs_internal_id_";m.AnnotationPrefix=G;const at=class{};let Q=at;Ot(Q,"CSS",96),Ot(Q,"PDF",72),Ot(Q,"PDF_TO_CSS_UNITS",at.CSS/at.PDF),m.PixelsPerInch=Q;class j extends b.BaseCanvasFactory{constructor({ownerDocument:W=globalThis.document}={}){super(),this._document=W}_createCanvas(W,H){const rt=this._document.createElement("canvas");return rt.width=W,rt.height=H,rt}}m.DOMCanvasFactory=j;async function y(X,W=!1){if(s(X,document.baseURI)){const H=await fetch(X);if(!H.ok)throw new Error(H.statusText);return W?new Uint8Array(await H.arrayBuffer()):(0,w.stringToBytes)(await H.text())}return new Promise((H,rt)=>{const ht=new XMLHttpRequest;ht.open("GET",X,!0),W&&(ht.responseType="arraybuffer"),ht.onreadystatechange=()=>{if(ht.readyState===XMLHttpRequest.DONE){if(ht.status===200||ht.status===0){let k;if(W&&ht.response?k=new Uint8Array(ht.response):!W&&ht.responseText&&(k=(0,w.stringToBytes)(ht.responseText)),k){H(k);return}}rt(new Error(ht.statusText))}},ht.send(null)})}class E extends b.BaseCMapReaderFactory{_fetchData(W,H){return y(W,this.isCompressed).then(rt=>({cMapData:rt,compressionType:H}))}}m.DOMCMapReaderFactory=E;class O extends b.BaseStandardFontDataFactory{_fetchData(W){return y(W,!0)}}m.DOMStandardFontDataFactory=O;class C extends b.BaseSVGFactory{_createSVG(W){return document.createElementNS(V,W)}}m.DOMSVGFactory=C;class _{constructor({viewBox:W,scale:H,rotation:rt,offsetX:ht=0,offsetY:k=0,dontFlip:o=!1}){this.viewBox=W,this.scale=H,this.rotation=rt,this.offsetX=ht,this.offsetY=k;const r=(W[2]+W[0])/2,A=(W[3]+W[1])/2;let x,M,I,U;switch(rt%=360,rt<0&&(rt+=360),rt){case 180:x=-1,M=0,I=0,U=1;break;case 90:x=0,M=1,I=1,U=0;break;case 270:x=0,M=-1,I=-1,U=0;break;case 0:x=1,M=0,I=0,U=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(I=-I,U=-U);let z,it,J,et;x===0?(z=Math.abs(A-W[1])*H+ht,it=Math.abs(r-W[0])*H+k,J=(W[3]-W[1])*H,et=(W[2]-W[0])*H):(z=Math.abs(r-W[0])*H+ht,it=Math.abs(A-W[1])*H+k,J=(W[2]-W[0])*H,et=(W[3]-W[1])*H),this.transform=[x*H,M*H,I*H,U*H,z-x*H*r-I*H*A,it-M*H*r-U*H*A],this.width=J,this.height=et}get rawDims(){const{viewBox:W}=this;return(0,w.shadow)(this,"rawDims",{pageWidth:W[2]-W[0],pageHeight:W[3]-W[1],pageX:W[0],pageY:W[1]})}clone({scale:W=this.scale,rotation:H=this.rotation,offsetX:rt=this.offsetX,offsetY:ht=this.offsetY,dontFlip:k=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:W,rotation:H,offsetX:rt,offsetY:ht,dontFlip:k})}convertToViewportPoint(W,H){return w.Util.applyTransform([W,H],this.transform)}convertToViewportRectangle(W){const H=w.Util.applyTransform([W[0],W[1]],this.transform),rt=w.Util.applyTransform([W[2],W[3]],this.transform);return[H[0],H[1],rt[0],rt[1]]}convertToPdfPoint(W,H){return w.Util.applyInverseTransform([W,H],this.transform)}}m.PageViewport=_;class f extends w.BaseException{constructor(W,H,rt=0){super(W,"RenderingCancelledException"),this.type=H,this.extraDelay=rt}}m.RenderingCancelledException=f;function u(X){const W=X.length;let H=0;for(;H<W&&X[H].trim()==="";)H++;return X.substring(H,H+5).toLowerCase()==="data:"}function i(X){return typeof X=="string"&&/\.pdf$/i.test(X)}function l(X,W=!1){return W||([X]=X.split(/[#?]/,1)),X.substring(X.lastIndexOf("/")+1)}function c(X,W="document.pdf"){if(typeof X!="string")return W;if(u(X))return(0,w.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),W;const H=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,rt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ht=H.exec(X);let k=rt.exec(ht[1])||rt.exec(ht[2])||rt.exec(ht[3]);if(k&&(k=k[0],k.includes("%")))try{k=rt.exec(decodeURIComponent(k))[0]}catch{}return k||W}class n{constructor(){Ot(this,"started",Object.create(null));Ot(this,"times",[])}time(W){W in this.started&&(0,w.warn)(`Timer is already running for ${W}`),this.started[W]=Date.now()}timeEnd(W){W in this.started||(0,w.warn)(`Timer has not been started for ${W}`),this.times.push({name:W,start:this.started[W],end:Date.now()}),delete this.started[W]}toString(){const W=[];let H=0;for(const{name:rt}of this.times)H=Math.max(rt.length,H);for(const{name:rt,start:ht,end:k}of this.times)W.push(`${rt.padEnd(H)} ${k-ht}ms
`);return W.join("")}}m.StatTimer=n;function s(X,W){try{const{protocol:H}=W?new URL(X,W):new URL(X);return H==="http:"||H==="https:"}catch{return!1}}function t(X,W=!1){return new Promise((H,rt)=>{const ht=document.createElement("script");ht.src=X,ht.onload=function(k){W&&ht.remove(),H(k)},ht.onerror=function(){rt(new Error(`Cannot load script at: ${ht.src}`))},(document.head||document.documentElement).append(ht)})}function e(X){console.log("Deprecated API usage: "+X)}let d;class v{static toDateObject(W){if(!W||typeof W!="string")return null;d||(d=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const H=d.exec(W);if(!H)return null;const rt=parseInt(H[1],10);let ht=parseInt(H[2],10);ht=ht>=1&&ht<=12?ht-1:0;let k=parseInt(H[3],10);k=k>=1&&k<=31?k:1;let o=parseInt(H[4],10);o=o>=0&&o<=23?o:0;let r=parseInt(H[5],10);r=r>=0&&r<=59?r:0;let A=parseInt(H[6],10);A=A>=0&&A<=59?A:0;const x=H[7]||"Z";let M=parseInt(H[8],10);M=M>=0&&M<=23?M:0;let I=parseInt(H[9],10)||0;return I=I>=0&&I<=59?I:0,x==="-"?(o+=M,r+=I):x==="+"&&(o-=M,r-=I),new Date(Date.UTC(rt,ht,k,o,r,A))}}m.PDFDateString=v;function P(X,{scale:W=1,rotation:H=0}){const{width:rt,height:ht}=X.attributes.style,k=[0,0,parseInt(rt),parseInt(ht)];return new _({viewBox:k,scale:W,rotation:H})}function N(X){if(X.startsWith("#")){const W=parseInt(X.slice(1),16);return[(W&16711680)>>16,(W&65280)>>8,W&255]}return X.startsWith("rgb(")?X.slice(4,-1).split(",").map(W=>parseInt(W)):X.startsWith("rgba(")?X.slice(5,-1).split(",").map(W=>parseInt(W)).slice(0,3):((0,w.warn)(`Not a valid color format: "${X}"`),[0,0,0])}function p(X){const W=document.createElement("span");W.style.visibility="hidden",document.body.append(W);for(const H of X.keys()){W.style.color=H;const rt=window.getComputedStyle(W).color;X.set(H,N(rt))}W.remove()}function q(X){const{a:W,b:H,c:rt,d:ht,e:k,f:o}=X.getTransform();return[W,H,rt,ht,k,o]}function lt(X){const{a:W,b:H,c:rt,d:ht,e:k,f:o}=X.getTransform().invertSelf();return[W,H,rt,ht,k,o]}function tt(X,W,H=!1,rt=!0){if(W instanceof _){const{pageWidth:ht,pageHeight:k}=W.rawDims,{style:o}=X,r=`calc(var(--scale-factor) * ${ht}px)`,A=`calc(var(--scale-factor) * ${k}px)`;!H||W.rotation%180===0?(o.width=r,o.height=A):(o.width=A,o.height=r)}rt&&X.setAttribute("data-main-rotation",W.rotation)}},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.BaseStandardFontDataFactory=m.BaseSVGFactory=m.BaseCanvasFactory=m.BaseCMapReaderFactory=void 0;var b=Z(1);class w{constructor(){this.constructor===w&&(0,b.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,E){if(y<=0||E<=0)throw new Error("Invalid canvas size");const O=this._createCanvas(y,E);return{canvas:O,context:O.getContext("2d")}}reset(y,E,O){if(!y.canvas)throw new Error("Canvas is not specified");if(E<=0||O<=0)throw new Error("Invalid canvas size");y.canvas.width=E,y.canvas.height=O}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,E){(0,b.unreachable)("Abstract method `_createCanvas` called.")}}m.BaseCanvasFactory=w;class V{constructor({baseUrl:y=null,isCompressed:E=!0}){this.constructor===V&&(0,b.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=E}async fetch({name:y}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const E=this.baseUrl+y+(this.isCompressed?".bcmap":""),O=this.isCompressed?b.CMapCompressionType.BINARY:b.CMapCompressionType.NONE;return this._fetchData(E,O).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${E}`)})}_fetchData(y,E){(0,b.unreachable)("Abstract method `_fetchData` called.")}}m.BaseCMapReaderFactory=V;class G{constructor({baseUrl:y=null}){this.constructor===G&&(0,b.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}async fetch({filename:y}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const E=`${this.baseUrl}${y}`;return this._fetchData(E).catch(O=>{throw new Error(`Unable to load font data at: ${E}`)})}_fetchData(y){(0,b.unreachable)("Abstract method `_fetchData` called.")}}m.BaseStandardFontDataFactory=G;class Q{constructor(){this.constructor===Q&&(0,b.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,E,O=!1){if(y<=0||E<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),O||(C.setAttribute("width",`${y}px`),C.setAttribute("height",`${E}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${y} ${E}`),C}createElement(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,b.unreachable)("Abstract method `_createSVG` called.")}}m.BaseSVGFactory=Q},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.MurmurHash3_64=void 0;var b=Z(1);const w=3285377520,V=4294901760,G=65535;class Q{constructor(y){this.h1=y?y&4294967295:w,this.h2=y?y&4294967295:w}update(y){let E,O;if(typeof y=="string"){E=new Uint8Array(y.length*2),O=0;for(let d=0,v=y.length;d<v;d++){const P=y.charCodeAt(d);P<=255?E[O++]=P:(E[O++]=P>>>8,E[O++]=P&255)}}else if((0,b.isArrayBuffer)(y))E=y.slice(),O=E.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const C=O>>2,_=O-C*4,f=new Uint32Array(E.buffer,0,C);let u=0,i=0,l=this.h1,c=this.h2;const n=3432918353,s=461845907,t=n&G,e=s&G;for(let d=0;d<C;d++)d&1?(u=f[d],u=u*n&V|u*t&G,u=u<<15|u>>>17,u=u*s&V|u*e&G,l^=u,l=l<<13|l>>>19,l=l*5+3864292196):(i=f[d],i=i*n&V|i*t&G,i=i<<15|i>>>17,i=i*s&V|i*e&G,c^=i,c=c<<13|c>>>19,c=c*5+3864292196);switch(u=0,_){case 3:u^=E[C*4+2]<<16;case 2:u^=E[C*4+1]<<8;case 1:u^=E[C*4],u=u*n&V|u*t&G,u=u<<15|u>>>17,u=u*s&V|u*e&G,C&1?l^=u:c^=u}this.h1=l,this.h2=c}hexdigest(){let y=this.h1,E=this.h2;return y^=E>>>1,y=y*3981806797&V|y*36045&G,E=E*4283543511&V|((E<<16|y>>>16)*2950163797&V)>>>16,y^=E>>>1,y=y*444984403&V|y*60499&G,E=E*3301882366&V|((E<<16|y>>>16)*3120437893&V)>>>16,y^=E>>>1,(y>>>0).toString(16).padStart(8,"0")+(E>>>0).toString(16).padStart(8,"0")}}m.MurmurHash3_64=Q},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.FontLoader=m.FontFaceObject=void 0;var b=Z(1),w=Z(10);class V{constructor({onUnsupportedFeature:j,ownerDocument:y=globalThis.document,styleElement:E=null}){this._onUnsupportedFeature=j,this._document=y,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(j){this.nativeFontFaces.push(j),this._document.fonts.add(j)}insertRule(j){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const y=this.styleElement.sheet;y.insertRule(j,y.cssRules.length)}clear(){for(const j of this.nativeFontFaces)this._document.fonts.delete(j);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(j){if(j.attached||j.missingFile)return;if(j.attached=!0,this.isFontLoadingAPISupported){const E=j.createNativeFontFace();if(E){this.addNativeFontFace(E);try{await E.loaded}catch(O){throw this._onUnsupportedFeature({featureId:b.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,b.warn)(`Failed to load font '${E.family}': '${O}'.`),j.disableFontFace=!0,O}}return}const y=j.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(E=>{const O=this._queueLoadingCallback(E);this._prepareFontLoadEvent(j,O)})}}get isFontLoadingAPISupported(){var y;const j=!!((y=this._document)!=null&&y.fonts);return(0,b.shadow)(this,"isFontLoadingAPISupported",j)}get isSyncFontLoadingSupported(){let j=!1;return(w.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(j=!0),(0,b.shadow)(this,"isSyncFontLoadingSupported",j)}_queueLoadingCallback(j){function y(){for((0,b.assert)(!O.done,"completeRequest() cannot be called twice."),O.done=!0;E.length>0&&E[0].done;){const C=E.shift();setTimeout(C.callback,0)}}const{loadingRequests:E}=this,O={done:!1,complete:y,callback:j};return E.push(O),O}get _loadTestFont(){const j=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,b.shadow)(this,"_loadTestFont",j)}_prepareFontLoadEvent(j,y){function E(p,q){return p.charCodeAt(q)<<24|p.charCodeAt(q+1)<<16|p.charCodeAt(q+2)<<8|p.charCodeAt(q+3)&255}function O(p,q,lt,tt){const at=p.substring(0,q),X=p.substring(q+lt);return at+tt+X}let C,_;const f=this._document.createElement("canvas");f.width=1,f.height=1;const u=f.getContext("2d");let i=0;function l(p,q){if(++i>30){(0,b.warn)("Load test font never loaded."),q();return}if(u.font="30px "+p,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){q();return}setTimeout(l.bind(null,p,q))}const c=`lt${Date.now()}${this.loadTestFontId++}`;let n=this._loadTestFont;n=O(n,976,c.length,c);const t=16,e=1482184792;let d=E(n,t);for(C=0,_=c.length-3;C<_;C+=4)d=d-e+E(c,C)|0;C<c.length&&(d=d-e+E(c+"XXX",C)|0),n=O(n,t,4,(0,b.string32)(d));const v=`url(data:font/opentype;base64,${btoa(n)});`,P=`@font-face {font-family:"${c}";src:${v}}`;this.insertRule(P);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const p of[j.loadedName,c]){const q=this._document.createElement("span");q.textContent="Hi",q.style.fontFamily=p,N.append(q)}this._document.body.append(N),l(c,()=>{N.remove(),y.complete()})}}m.FontLoader=V;class G{constructor(j,{isEvalSupported:y=!0,disableFontFace:E=!1,ignoreErrors:O=!1,onUnsupportedFeature:C,fontRegistry:_=null}){this.compiledGlyphs=Object.create(null);for(const f in j)this[f]=j[f];this.isEvalSupported=y!==!1,this.disableFontFace=E===!0,this.ignoreErrors=O===!0,this._onUnsupportedFeature=C,this.fontRegistry=_}createNativeFontFace(){var y;if(!this.data||this.disableFontFace)return null;let j;if(!this.cssFontInfo)j=new FontFace(this.loadedName,this.data,{});else{const E={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(E.style=`oblique ${this.cssFontInfo.italicAngle}deg`),j=new FontFace(this.cssFontInfo.fontFamily,this.data,E)}return(y=this.fontRegistry)==null||y.registerFont(this),j}createFontFaceRule(){var O;if(!this.data||this.disableFontFace)return null;const j=(0,b.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(j)});`;let E;if(!this.cssFontInfo)E=`@font-face {font-family:"${this.loadedName}";src:${y}}`;else{let C=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(C+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),E=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${C}src:${y}}`}return(O=this.fontRegistry)==null||O.registerFont(this,y),E}getPathGenerator(j,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let E;try{E=j.get(this.loadedName+"_path_"+y)}catch(O){if(!this.ignoreErrors)throw O;return this._onUnsupportedFeature({featureId:b.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,b.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[y]=function(C,_){}}if(this.isEvalSupported&&b.FeatureTest.isEvalSupported){const O=[];for(const C of E){const _=C.args!==void 0?C.args.join(","):"";O.push("c.",C.cmd,"(",_,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",O.join(""))}return this.compiledGlyphs[y]=function(O,C){for(const _ of E)_.cmd==="scale"&&(_.args=[C,-C]),O[_.cmd].apply(O,_.args)}}}m.FontFaceObject=G},(ct,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.isNodeJS=void 0;const Z=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");m.isNodeJS=Z},(ct,m,Z)=>{var H,ue;Object.defineProperty(m,"__esModule",{value:!0}),m.CanvasGraphics=void 0;var b=Z(1),w=Z(6),V=Z(12),G=Z(13);const Q=16,j=100,y=4096,E=15,O=10,C=1e3,_=16;function f(k,o){if(k._removeMirroring)throw new Error("Context is already forwarding operations.");k.__originalSave=k.save,k.__originalRestore=k.restore,k.__originalRotate=k.rotate,k.__originalScale=k.scale,k.__originalTranslate=k.translate,k.__originalTransform=k.transform,k.__originalSetTransform=k.setTransform,k.__originalResetTransform=k.resetTransform,k.__originalClip=k.clip,k.__originalMoveTo=k.moveTo,k.__originalLineTo=k.lineTo,k.__originalBezierCurveTo=k.bezierCurveTo,k.__originalRect=k.rect,k.__originalClosePath=k.closePath,k.__originalBeginPath=k.beginPath,k._removeMirroring=()=>{k.save=k.__originalSave,k.restore=k.__originalRestore,k.rotate=k.__originalRotate,k.scale=k.__originalScale,k.translate=k.__originalTranslate,k.transform=k.__originalTransform,k.setTransform=k.__originalSetTransform,k.resetTransform=k.__originalResetTransform,k.clip=k.__originalClip,k.moveTo=k.__originalMoveTo,k.lineTo=k.__originalLineTo,k.bezierCurveTo=k.__originalBezierCurveTo,k.rect=k.__originalRect,k.closePath=k.__originalClosePath,k.beginPath=k.__originalBeginPath,delete k._removeMirroring},k.save=function(){o.save(),this.__originalSave()},k.restore=function(){o.restore(),this.__originalRestore()},k.translate=function(A,x){o.translate(A,x),this.__originalTranslate(A,x)},k.scale=function(A,x){o.scale(A,x),this.__originalScale(A,x)},k.transform=function(A,x,M,I,U,z){o.transform(A,x,M,I,U,z),this.__originalTransform(A,x,M,I,U,z)},k.setTransform=function(A,x,M,I,U,z){o.setTransform(A,x,M,I,U,z),this.__originalSetTransform(A,x,M,I,U,z)},k.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},k.rotate=function(A){o.rotate(A),this.__originalRotate(A)},k.clip=function(A){o.clip(A),this.__originalClip(A)},k.moveTo=function(r,A){o.moveTo(r,A),this.__originalMoveTo(r,A)},k.lineTo=function(r,A){o.lineTo(r,A),this.__originalLineTo(r,A)},k.bezierCurveTo=function(r,A,x,M,I,U){o.bezierCurveTo(r,A,x,M,I,U),this.__originalBezierCurveTo(r,A,x,M,I,U)},k.rect=function(r,A,x,M){o.rect(r,A,x,M),this.__originalRect(r,A,x,M)},k.closePath=function(){o.closePath(),this.__originalClosePath()},k.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}class u{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,r,A){let x;return this.cache[o]!==void 0?(x=this.cache[o],this.canvasFactory.reset(x,r,A)):(x=this.canvasFactory.create(r,A),this.cache[o]=x),x}delete(o){delete this.cache[o]}clear(){for(const o in this.cache){const r=this.cache[o];this.canvasFactory.destroy(r),delete this.cache[o]}}}function i(k,o,r,A,x,M,I,U,z,it){const[J,et,Y,a,h,S]=(0,w.getCurrentTransform)(k);if(et===0&&Y===0){const B=I*J+h,nt=Math.round(B),ot=U*a+S,ut=Math.round(ot),K=(I+z)*J+h,mt=Math.abs(Math.round(K)-nt)||1,gt=(U+it)*a+S,bt=Math.abs(Math.round(gt)-ut)||1;return k.setTransform(Math.sign(J),0,0,Math.sign(a),nt,ut),k.drawImage(o,r,A,x,M,0,0,mt,bt),k.setTransform(J,et,Y,a,h,S),[mt,bt]}if(J===0&&a===0){const B=U*Y+h,nt=Math.round(B),ot=I*et+S,ut=Math.round(ot),K=(U+it)*Y+h,mt=Math.abs(Math.round(K)-nt)||1,gt=(I+z)*et+S,bt=Math.abs(Math.round(gt)-ut)||1;return k.setTransform(0,Math.sign(et),Math.sign(Y),0,nt,ut),k.drawImage(o,r,A,x,M,0,0,bt,mt),k.setTransform(J,et,Y,a,h,S),[bt,mt]}k.drawImage(o,r,A,x,M,I,U,z,it);const R=Math.hypot(J,et),T=Math.hypot(Y,a);return[R*z,T*it]}function l(k){const{width:o,height:r}=k;if(o>C||r>C)return null;const A=1e3,x=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),M=o+1;let I=new Uint8Array(M*(r+1)),U,z,it;const J=o+7&-8;let et=new Uint8Array(J*r),Y=0;for(const T of k.data){let B=128;for(;B>0;)et[Y++]=T&B?0:255,B>>=1}let a=0;for(Y=0,et[Y]!==0&&(I[0]=1,++a),z=1;z<o;z++)et[Y]!==et[Y+1]&&(I[z]=et[Y]?2:1,++a),Y++;for(et[Y]!==0&&(I[z]=2,++a),U=1;U<r;U++){Y=U*J,it=U*M,et[Y-J]!==et[Y]&&(I[it]=et[Y]?1:8,++a);let T=(et[Y]?4:0)+(et[Y-J]?8:0);for(z=1;z<o;z++)T=(T>>2)+(et[Y+1]?4:0)+(et[Y-J+1]?8:0),x[T]&&(I[it+z]=x[T],++a),Y++;if(et[Y-J]!==et[Y]&&(I[it+z]=et[Y]?2:4,++a),a>A)return null}for(Y=J*(r-1),it=U*M,et[Y]!==0&&(I[it]=8,++a),z=1;z<o;z++)et[Y]!==et[Y+1]&&(I[it+z]=et[Y]?4:8,++a),Y++;if(et[Y]!==0&&(I[it+z]=4,++a),a>A)return null;const h=new Int32Array([0,M,-1,0,-M,0,0,0,1]),S=new Path2D;for(U=0;a&&U<=r;U++){let T=U*M;const B=T+o;for(;T<B&&!I[T];)T++;if(T===B)continue;S.moveTo(T%M,U);const nt=T;let ot=I[T];do{const ut=h[ot];do T+=ut;while(!I[T]);const K=I[T];K!==5&&K!==10?(ot=K,I[T]=0):(ot=K&51*ot>>4,I[T]&=ot>>2|ot<<2),S.lineTo(T%M,T/M|0),I[T]||--a}while(nt!==T);--U}return et=null,I=null,function(T){T.save(),T.scale(1/o,-1/r),T.translate(0,-r),T.fill(S),T.beginPath(),T.restore()}}class c{constructor(o,r){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=b.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=b.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=b.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,o,r])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,r){this.x=o,this.y=r}updatePathMinMax(o,r,A){[r,A]=b.Util.applyTransform([r,A],o),this.minX=Math.min(this.minX,r),this.minY=Math.min(this.minY,A),this.maxX=Math.max(this.maxX,r),this.maxY=Math.max(this.maxY,A)}updateRectMinMax(o,r){const A=b.Util.applyTransform(r,o),x=b.Util.applyTransform(r.slice(2),o);this.minX=Math.min(this.minX,A[0],x[0]),this.minY=Math.min(this.minY,A[1],x[1]),this.maxX=Math.max(this.maxX,A[0],x[0]),this.maxY=Math.max(this.maxY,A[1],x[1])}updateScalingPathMinMax(o,r){b.Util.scaleMinMax(o,r),this.minX=Math.min(this.minX,r[0]),this.maxX=Math.max(this.maxX,r[1]),this.minY=Math.min(this.minY,r[2]),this.maxY=Math.max(this.maxY,r[3])}updateCurvePathMinMax(o,r,A,x,M,I,U,z,it,J){const et=b.Util.bezierBoundingBox(r,A,x,M,I,U,z,it);if(J){J[0]=Math.min(J[0],et[0],et[2]),J[1]=Math.max(J[1],et[0],et[2]),J[2]=Math.min(J[2],et[1],et[3]),J[3]=Math.max(J[3],et[1],et[3]);return}this.updateRectMinMax(o,et)}getPathBoundingBox(o=V.PathType.FILL,r=null){const A=[this.minX,this.minY,this.maxX,this.maxY];if(o===V.PathType.STROKE){r||(0,b.unreachable)("Stroke bounding box must include transform.");const x=b.Util.singularValueDecompose2dScale(r),M=x[0]*this.lineWidth/2,I=x[1]*this.lineWidth/2;A[0]-=M,A[1]-=I,A[2]+=M,A[3]+=I}return A}updateClipFromPath(){const o=b.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=V.PathType.FILL,r=null){return b.Util.intersect(this.clipBox,this.getPathBoundingBox(o,r))}}function n(k,o,r=null){if(typeof ImageData<"u"&&o instanceof ImageData){k.putImageData(o,0,0);return}const A=o.height,x=o.width,M=A%_,I=(A-M)/_,U=M===0?I:I+1,z=k.createImageData(x,_);let it=0,J;const et=o.data,Y=z.data;let a,h,S,R,T,B,nt,ot;if(r)switch(r.length){case 1:T=r[0],B=r[0],nt=r[0],ot=r[0];break;case 4:T=r[0],B=r[1],nt=r[2],ot=r[3];break}if(o.kind===b.ImageKind.GRAYSCALE_1BPP){const ut=et.byteLength,K=new Uint32Array(Y.buffer,0,Y.byteLength>>2),mt=K.length,gt=x+7>>3;let bt=4294967295,At=b.FeatureTest.isLittleEndian?4278190080:255;for(ot&&ot[0]===255&&ot[255]===0&&([bt,At]=[At,bt]),a=0;a<U;a++){for(S=a<I?_:M,J=0,h=0;h<S;h++){const Et=ut-it;let Tt=0;const St=Et>gt?x:Et*8-7,F=St&-8;let D=0,L=0;for(;Tt<F;Tt+=8)L=et[it++],K[J++]=L&128?bt:At,K[J++]=L&64?bt:At,K[J++]=L&32?bt:At,K[J++]=L&16?bt:At,K[J++]=L&8?bt:At,K[J++]=L&4?bt:At,K[J++]=L&2?bt:At,K[J++]=L&1?bt:At;for(;Tt<St;Tt++)D===0&&(L=et[it++],D=128),K[J++]=L&D?bt:At,D>>=1}for(;J<mt;)K[J++]=0;k.putImageData(z,0,a*_)}}else if(o.kind===b.ImageKind.RGBA_32BPP){const ut=!!(T||B||nt);for(h=0,R=x*_*4,a=0;a<I;a++){if(Y.set(et.subarray(it,it+R)),it+=R,ut)for(let K=0;K<R;K+=4)T&&(Y[K+0]=T[Y[K+0]]),B&&(Y[K+1]=B[Y[K+1]]),nt&&(Y[K+2]=nt[Y[K+2]]);k.putImageData(z,0,h),h+=_}if(a<U){if(R=x*M*4,Y.set(et.subarray(it,it+R)),ut)for(let K=0;K<R;K+=4)T&&(Y[K+0]=T[Y[K+0]]),B&&(Y[K+1]=B[Y[K+1]]),nt&&(Y[K+2]=nt[Y[K+2]]);k.putImageData(z,0,h)}}else if(o.kind===b.ImageKind.RGB_24BPP){const ut=!!(T||B||nt);for(S=_,R=x*S,a=0;a<U;a++){for(a>=I&&(S=M,R=x*S),J=0,h=R;h--;)Y[J++]=et[it++],Y[J++]=et[it++],Y[J++]=et[it++],Y[J++]=255;if(ut)for(let K=0;K<J;K+=4)T&&(Y[K+0]=T[Y[K+0]]),B&&(Y[K+1]=B[Y[K+1]]),nt&&(Y[K+2]=nt[Y[K+2]]);k.putImageData(z,0,a*_)}}else throw new Error(`bad image kind: ${o.kind}`)}function s(k,o){if(o.bitmap){k.drawImage(o.bitmap,0,0);return}const r=o.height,A=o.width,x=r%_,M=(r-x)/_,I=x===0?M:M+1,U=k.createImageData(A,_);let z=0;const it=o.data,J=U.data;for(let et=0;et<I;et++){const Y=et<M?_:x;({srcPos:z}=(0,G.applyMaskImageData)({src:it,srcPos:z,dest:J,width:A,height:Y})),k.putImageData(U,0,et*_)}}function t(k,o){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const A of r)k[A]!==void 0&&(o[A]=k[A]);k.setLineDash!==void 0&&(o.setLineDash(k.getLineDash()),o.lineDashOffset=k.lineDashOffset)}function e(k,o){k.strokeStyle=k.fillStyle=o||"#000000",k.fillRule="nonzero",k.globalAlpha=1,k.lineWidth=1,k.lineCap="butt",k.lineJoin="miter",k.miterLimit=10,k.globalCompositeOperation="source-over",k.font="10px sans-serif",k.setLineDash!==void 0&&(k.setLineDash([]),k.lineDashOffset=0)}function d(k,o,r,A){const x=k.length;for(let M=3;M<x;M+=4){const I=k[M];if(I===0)k[M-3]=o,k[M-2]=r,k[M-1]=A;else if(I<255){const U=255-I;k[M-3]=k[M-3]*I+o*U>>8,k[M-2]=k[M-2]*I+r*U>>8,k[M-1]=k[M-1]*I+A*U>>8}}}function v(k,o,r){const A=k.length,x=1/255;for(let M=3;M<A;M+=4){const I=r?r[k[M]]:k[M];o[M]=o[M]*I*x|0}}function P(k,o,r){const A=k.length;for(let x=3;x<A;x+=4){const M=k[x-3]*77+k[x-2]*152+k[x-1]*28;o[x]=r?o[x]*r[M>>8]>>8:o[x]*M>>16}}function N(k,o,r,A,x,M,I,U,z,it,J){const et=!!M,Y=et?M[0]:0,a=et?M[1]:0,h=et?M[2]:0;let S;x==="Luminosity"?S=P:S=v;const T=Math.min(A,Math.ceil(1048576/r));for(let B=0;B<A;B+=T){const nt=Math.min(T,A-B),ot=k.getImageData(U-it,B+(z-J),r,nt),ut=o.getImageData(U,B+z,r,nt);et&&d(ot.data,Y,a,h),S(ot.data,ut.data,I),o.putImageData(ut,U,B+z)}}function p(k,o,r,A){const x=A[0],M=A[1],I=A[2]-x,U=A[3]-M;I===0||U===0||(N(o.context,r,I,U,o.subtype,o.backdrop,o.transferMap,x,M,o.offsetX,o.offsetY),k.save(),k.globalAlpha=1,k.globalCompositeOperation="source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(r.canvas,0,0),k.restore())}function q(k,o){const r=b.Util.singularValueDecompose2dScale(k);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const A=Math.fround((globalThis.devicePixelRatio||1)*w.PixelsPerInch.PDF_TO_CSS_UNITS);return o!==void 0?o:r[0]<=A||r[1]<=A}const lt=["butt","round","square"],tt=["miter","round","bevel"],at={},X={},ht=class{constructor(o,r,A,x,{optionalContentConfig:M,markedContentStack:I=null},U,z){st(this,H);this.ctx=o,this.current=new c(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=A,this.canvasFactory=x,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=M,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=U,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(z==null?void 0:z.background)||null,this.foregroundColor=(z==null?void 0:z.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(o,r=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):r}beginDrawing({transform:o,viewport:r,transparency:A=!1,background:x=null}){const M=this.ctx.canvas.width,I=this.ctx.canvas.height,U=x||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const z=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const it=this.backgroundColor=this.ctx.fillStyle;let J=!0,et=U;if(this.ctx.fillStyle=U,et=this.ctx.fillStyle,J=typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et),z==="#000000"&&it==="#ffffff"||z===it||!J)this.foregroundColor=this.backgroundColor=null;else{const[Y,a,h]=(0,w.getRGB)(et),S=T=>(T/=255,T<=.03928?T/12.92:((T+.055)/1.055)**2.4),R=Math.round(.2126*S(Y)+.7152*S(a)+.0722*S(h));this.selectColor=(T,B,nt)=>{const ot=.2126*S(T)+.7152*S(B)+.0722*S(nt);return Math.round(ot)===R?it:z}}}if(this.ctx.fillStyle=this.backgroundColor||U,this.ctx.fillRect(0,0,M,I),this.ctx.restore(),A){const z=this.cachedCanvases.getCanvas("transparent",M,I);this.compositeCtx=this.ctx,this.transparentCanvas=z.canvas,this.ctx=z.context,this.ctx.save(),this.ctx.transform(...(0,w.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),e(this.ctx,this.foregroundColor),o&&(this.ctx.transform(...o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=(0,w.getCurrentTransform)(this.ctx)}executeOperatorList(o,r,A,x){const M=o.argsArray,I=o.fnArray;let U=r||0;const z=M.length;if(z===U)return U;const it=z-U>O&&typeof A=="function",J=it?Date.now()+E:0;let et=0;const Y=this.commonObjs,a=this.objs;let h;for(;;){if(x!==void 0&&U===x.nextBreakPoint)return x.breakIt(U,A),U;if(h=I[U],h!==b.OPS.dependency)this[h].apply(this,M[U]);else for(const S of M[U]){const R=S.startsWith("g_")?Y:a;if(!R.has(S))return R.get(S,A),U}if(U++,U===z)return U;if(it&&++et>O){if(Date.now()>J)return A(),U;et=0}}}endDrawing(){dt(this,H,ue).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const o of this._cachedBitmapsMap.values()){for(const r of o.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);o.clear()}this._cachedBitmapsMap.clear()}_scaleImage(o,r){const A=o.width,x=o.height;let M=Math.max(Math.hypot(r[0],r[1]),1),I=Math.max(Math.hypot(r[2],r[3]),1),U=A,z=x,it="prescale1",J,et;for(;M>2&&U>1||I>2&&z>1;){let Y=U,a=z;M>2&&U>1&&(Y=Math.ceil(U/2),M/=U/Y),I>2&&z>1&&(a=Math.ceil(z/2),I/=z/a),J=this.cachedCanvases.getCanvas(it,Y,a),et=J.context,et.clearRect(0,0,Y,a),et.drawImage(o,0,0,U,z,0,0,Y,a),o=J.canvas,U=Y,z=a,it=it==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:U,paintHeight:z}}_createMaskCanvas(o){const r=this.ctx,{width:A,height:x}=o,M=this.current.fillColor,I=this.current.patternFill,U=(0,w.getCurrentTransform)(r);let z,it,J,et;if((o.bitmap||o.data)&&o.count>1){const mt=o.bitmap||o.data.buffer;it=JSON.stringify(I?U:[U.slice(0,4),M]),z=this._cachedBitmapsMap.get(mt),z||(z=new Map,this._cachedBitmapsMap.set(mt,z));const gt=z.get(it);if(gt&&!I){const bt=Math.round(Math.min(U[0],U[2])+U[4]),At=Math.round(Math.min(U[1],U[3])+U[5]);return{canvas:gt,offsetX:bt,offsetY:At}}J=gt}J||(et=this.cachedCanvases.getCanvas("maskCanvas",A,x),s(et.context,o));let Y=b.Util.transform(U,[1/A,0,0,-1/x,0,0]);Y=b.Util.transform(Y,[1,0,0,1,0,-x]);const a=b.Util.applyTransform([0,0],Y),h=b.Util.applyTransform([A,x],Y),S=b.Util.normalizeRect([a[0],a[1],h[0],h[1]]),R=Math.round(S[2]-S[0])||1,T=Math.round(S[3]-S[1])||1,B=this.cachedCanvases.getCanvas("fillCanvas",R,T),nt=B.context,ot=Math.min(a[0],h[0]),ut=Math.min(a[1],h[1]);nt.translate(-ot,-ut),nt.transform(...Y),J||(J=this._scaleImage(et.canvas,(0,w.getCurrentTransformInverse)(nt)),J=J.img,z&&I&&z.set(it,J)),nt.imageSmoothingEnabled=q((0,w.getCurrentTransform)(nt),o.interpolate),i(nt,J,0,0,J.width,J.height,0,0,A,x),nt.globalCompositeOperation="source-in";const K=b.Util.transform((0,w.getCurrentTransformInverse)(nt),[1,0,0,1,-ot,-ut]);return nt.fillStyle=I?M.getPattern(r,this,K,V.PathType.FILL):M,nt.fillRect(0,0,A,x),z&&!I&&(this.cachedCanvases.delete("fillCanvas"),z.set(it,B.canvas)),{canvas:B.canvas,offsetX:Math.round(ot),offsetY:Math.round(ut)}}setLineWidth(o){o!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=lt[o]}setLineJoin(o){this.ctx.lineJoin=tt[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,r){const A=this.ctx;A.setLineDash!==void 0&&(A.setLineDash(o),A.lineDashOffset=r)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[r,A]of o)switch(r){case"LW":this.setLineWidth(A);break;case"LC":this.setLineCap(A);break;case"LJ":this.setLineJoin(A);break;case"ML":this.setMiterLimit(A);break;case"D":this.setDash(A[0],A[1]);break;case"RI":this.setRenderingIntent(A);break;case"FL":this.setFlatness(A);break;case"Font":this.setFont(A[0],A[1]);break;case"CA":this.current.strokeAlpha=A;break;case"ca":this.current.fillAlpha=A,this.ctx.globalAlpha=A;break;case"BM":this.ctx.globalCompositeOperation=A;break;case"SMask":this.current.activeSMask=A?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=A}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.ctx.canvas.width,r=this.ctx.canvas.height,A="smaskGroupAt"+this.groupLevel,x=this.cachedCanvases.getCanvas(A,o,r);this.suspendedCtx=this.ctx,this.ctx=x.context;const M=this.ctx;M.setTransform(...(0,w.getCurrentTransform)(this.suspendedCtx)),t(this.suspendedCtx,M),f(M,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),t(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){if(!this.current.activeSMask)return;o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,A=this.suspendedCtx;p(A,r,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(t(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),t(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(o,r,A,x,M,I){this.ctx.transform(o,r,A,x,M,I),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(o,r,A){const x=this.ctx,M=this.current;let I=M.x,U=M.y,z,it;const J=(0,w.getCurrentTransform)(x),et=J[0]===0&&J[3]===0||J[1]===0&&J[2]===0,Y=et?A.slice(0):null;for(let a=0,h=0,S=o.length;a<S;a++)switch(o[a]|0){case b.OPS.rectangle:I=r[h++],U=r[h++];const R=r[h++],T=r[h++],B=I+R,nt=U+T;x.moveTo(I,U),R===0||T===0?x.lineTo(B,nt):(x.lineTo(B,U),x.lineTo(B,nt),x.lineTo(I,nt)),et||M.updateRectMinMax(J,[I,U,B,nt]),x.closePath();break;case b.OPS.moveTo:I=r[h++],U=r[h++],x.moveTo(I,U),et||M.updatePathMinMax(J,I,U);break;case b.OPS.lineTo:I=r[h++],U=r[h++],x.lineTo(I,U),et||M.updatePathMinMax(J,I,U);break;case b.OPS.curveTo:z=I,it=U,I=r[h+4],U=r[h+5],x.bezierCurveTo(r[h],r[h+1],r[h+2],r[h+3],I,U),M.updateCurvePathMinMax(J,z,it,r[h],r[h+1],r[h+2],r[h+3],I,U,Y),h+=6;break;case b.OPS.curveTo2:z=I,it=U,x.bezierCurveTo(I,U,r[h],r[h+1],r[h+2],r[h+3]),M.updateCurvePathMinMax(J,z,it,I,U,r[h],r[h+1],r[h+2],r[h+3],Y),I=r[h+2],U=r[h+3],h+=4;break;case b.OPS.curveTo3:z=I,it=U,I=r[h+2],U=r[h+3],x.bezierCurveTo(r[h],r[h+1],I,U,I,U),M.updateCurvePathMinMax(J,z,it,r[h],r[h+1],I,U,I,U,Y),h+=4;break;case b.OPS.closePath:x.closePath();break}et&&M.updateScalingPathMinMax(J,Y),M.setCurrentPoint(I,U)}closePath(){this.ctx.closePath()}stroke(o=!0){const r=this.ctx,A=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof A=="object"&&(A!=null&&A.getPattern)?(r.save(),r.strokeStyle=A.getPattern(r,this,(0,w.getCurrentTransformInverse)(r),V.PathType.STROKE),this.rescaleAndStroke(!1),r.restore()):this.rescaleAndStroke(!0)),o&&this.consumePath(this.current.getClippedPathBoundingBox()),r.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o=!0){const r=this.ctx,A=this.current.fillColor,x=this.current.patternFill;let M=!1;x&&(r.save(),r.fillStyle=A.getPattern(r,this,(0,w.getCurrentTransformInverse)(r),V.PathType.FILL),M=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),M&&r.restore(),o&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=at}eoClip(){this.pendingClip=X}beginText(){this.current.textMatrix=b.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,r=this.ctx;if(o===void 0){r.beginPath();return}r.save(),r.beginPath();for(const A of o)r.setTransform(...A.transform),r.translate(A.x,A.y),A.addToPath(r,A.fontSize);r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,r){const A=this.commonObjs.get(o),x=this.current;if(!A)throw new Error(`Can't find font for ${o}`);if(x.fontMatrix=A.fontMatrix||b.FONT_IDENTITY_MATRIX,(x.fontMatrix[0]===0||x.fontMatrix[3]===0)&&(0,b.warn)("Invalid font matrix for font "+o),r<0?(r=-r,x.fontDirection=-1):x.fontDirection=1,this.current.font=A,this.current.fontSize=r,A.isType3Font)return;const M=A.loadedName||"sans-serif";let I="normal";A.black?I="900":A.bold&&(I="bold");const U=A.italic?"italic":"normal",z=`"${M}", ${A.fallbackName}`;let it=r;r<Q?it=Q:r>j&&(it=j),this.current.fontSizeScale=r/it,this.ctx.font=`${U} ${I} ${it}px ${z}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,r){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=r}setLeadingMoveText(o,r){this.setLeading(-r),this.moveText(o,r)}setTextMatrix(o,r,A,x,M,I){this.current.textMatrix=[o,r,A,x,M,I],this.current.textMatrixScale=Math.hypot(o,r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,r,A,x){const M=this.ctx,I=this.current,U=I.font,z=I.textRenderingMode,it=I.fontSize/I.fontSizeScale,J=z&b.TextRenderingMode.FILL_STROKE_MASK,et=!!(z&b.TextRenderingMode.ADD_TO_PATH_FLAG),Y=I.patternFill&&!U.missingFile;let a;(U.disableFontFace||et||Y)&&(a=U.getPathGenerator(this.commonObjs,o)),U.disableFontFace||Y?(M.save(),M.translate(r,A),M.beginPath(),a(M,it),x&&M.setTransform(...x),(J===b.TextRenderingMode.FILL||J===b.TextRenderingMode.FILL_STROKE)&&M.fill(),(J===b.TextRenderingMode.STROKE||J===b.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((J===b.TextRenderingMode.FILL||J===b.TextRenderingMode.FILL_STROKE)&&M.fillText(o,r,A),(J===b.TextRenderingMode.STROKE||J===b.TextRenderingMode.FILL_STROKE)&&M.strokeText(o,r,A)),et&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,w.getCurrentTransform)(M),x:r,y:A,fontSize:it,addToPath:a})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const r=o.getImageData(0,0,10,10).data;let A=!1;for(let x=3;x<r.length;x+=4)if(r[x]>0&&r[x]<255){A=!0;break}return(0,b.shadow)(this,"isFontSubpixelAAEnabled",A)}showText(o){const r=this.current,A=r.font;if(A.isType3Font)return this.showType3Text(o);const x=r.fontSize;if(x===0)return;const M=this.ctx,I=r.fontSizeScale,U=r.charSpacing,z=r.wordSpacing,it=r.fontDirection,J=r.textHScale*it,et=o.length,Y=A.vertical,a=Y?1:-1,h=A.defaultVMetrics,S=x*r.fontMatrix[0],R=r.textRenderingMode===b.TextRenderingMode.FILL&&!A.disableFontFace&&!r.patternFill;M.save(),M.transform(...r.textMatrix),M.translate(r.x,r.y+r.textRise),it>0?M.scale(J,-1):M.scale(J,1);let T;if(r.patternFill){M.save();const K=r.fillColor.getPattern(M,this,(0,w.getCurrentTransformInverse)(M),V.PathType.FILL);T=(0,w.getCurrentTransform)(M),M.restore(),M.fillStyle=K}let B=r.lineWidth;const nt=r.textMatrixScale;if(nt===0||B===0){const K=r.textRenderingMode&b.TextRenderingMode.FILL_STROKE_MASK;(K===b.TextRenderingMode.STROKE||K===b.TextRenderingMode.FILL_STROKE)&&(B=this.getSinglePixelWidth())}else B/=nt;if(I!==1&&(M.scale(I,I),B/=I),M.lineWidth=B,A.isInvalidPDFjsFont){const K=[];let mt=0;for(const gt of o)K.push(gt.unicode),mt+=gt.width;M.fillText(K.join(""),0,0),r.x+=mt*S*J,M.restore(),this.compose();return}let ot=0,ut;for(ut=0;ut<et;++ut){const K=o[ut];if(typeof K=="number"){ot+=a*K*x/1e3;continue}let mt=!1;const gt=(K.isSpace?z:0)+U,bt=K.fontChar,At=K.accent;let Et,Tt,St=K.width;if(Y){const D=K.vmetric||h,L=-(K.vmetric?D[1]:St*.5)*S,pt=D[2]*S;St=D?-D[0]:St,Et=L/I,Tt=(ot+pt)/I}else Et=ot/I,Tt=0;if(A.remeasure&&St>0){const D=M.measureText(bt).width*1e3/x*I;if(St<D&&this.isFontSubpixelAAEnabled){const L=St/D;mt=!0,M.save(),M.scale(L,1),Et/=L}else St!==D&&(Et+=(St-D)/2e3*x/I)}if(this.contentVisible&&(K.isInFont||A.missingFile)){if(R&&!At)M.fillText(bt,Et,Tt);else if(this.paintChar(bt,Et,Tt,T),At){const D=Et+x*At.offset.x/I,L=Tt-x*At.offset.y/I;this.paintChar(At.fontChar,D,L,T)}}let F;Y?F=St*S-gt*it:F=St*S+gt*it,ot+=F,mt&&M.restore()}Y?r.y-=ot:r.x+=ot*J,M.restore(),this.compose()}showType3Text(o){const r=this.ctx,A=this.current,x=A.font,M=A.fontSize,I=A.fontDirection,U=x.vertical?1:-1,z=A.charSpacing,it=A.wordSpacing,J=A.textHScale*I,et=A.fontMatrix||b.FONT_IDENTITY_MATRIX,Y=o.length,a=A.textRenderingMode===b.TextRenderingMode.INVISIBLE;let h,S,R,T;if(!(a||M===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...A.textMatrix),r.translate(A.x,A.y),r.scale(J,I),h=0;h<Y;++h){if(S=o[h],typeof S=="number"){T=U*S*M/1e3,this.ctx.translate(T,0),A.x+=T*J;continue}const B=(S.isSpace?it:0)+z,nt=x.charProcOperatorList[S.operatorListId];if(!nt){(0,b.warn)(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),r.scale(M,M),r.transform(...et),this.executeOperatorList(nt),this.restore()),R=b.Util.applyTransform([S.width,0],et)[0]*M+B,r.translate(R,0),A.x+=R*J}r.restore(),this.processingType3=null}}setCharWidth(o,r){}setCharWidthAndBounds(o,r,A,x,M,I){this.ctx.rect(A,x,M-A,I-x),this.ctx.clip(),this.endPath()}getColorN_Pattern(o){let r;if(o[0]==="TilingPattern"){const A=o[1],x=this.baseTransform||(0,w.getCurrentTransform)(this.ctx),M={createCanvasGraphics:I=>new ht(I,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new V.TilingPattern(o,A,this.ctx,M,x)}else r=this._getPattern(o[1],o[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,r,A){var M;const x=((M=this.selectColor)==null?void 0:M.call(this,o,r,A))||b.Util.makeHexColor(o,r,A);this.ctx.strokeStyle=x,this.current.strokeColor=x}setFillRGBColor(o,r,A){var M;const x=((M=this.selectColor)==null?void 0:M.call(this,o,r,A))||b.Util.makeHexColor(o,r,A);this.ctx.fillStyle=x,this.current.fillColor=x,this.current.patternFill=!1}_getPattern(o,r=null){let A;return this.cachedPatterns.has(o)?A=this.cachedPatterns.get(o):(A=(0,V.getShadingPattern)(this.objs.get(o)),this.cachedPatterns.set(o,A)),r&&(A.matrix=r),A}shadingFill(o){if(!this.contentVisible)return;const r=this.ctx;this.save();const A=this._getPattern(o);r.fillStyle=A.getPattern(r,this,(0,w.getCurrentTransformInverse)(r),V.PathType.SHADING);const x=(0,w.getCurrentTransformInverse)(r);if(x){const M=r.canvas,I=M.width,U=M.height,z=b.Util.applyTransform([0,0],x),it=b.Util.applyTransform([0,U],x),J=b.Util.applyTransform([I,0],x),et=b.Util.applyTransform([I,U],x),Y=Math.min(z[0],it[0],J[0],et[0]),a=Math.min(z[1],it[1],J[1],et[1]),h=Math.max(z[0],it[0],J[0],et[0]),S=Math.max(z[1],it[1],J[1],et[1]);this.ctx.fillRect(Y,a,h-Y,S-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,b.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,b.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform(...o),this.baseTransform=(0,w.getCurrentTransform)(this.ctx),r)){const A=r[2]-r[0],x=r[3]-r[1];this.ctx.rect(r[0],r[1],A,x),this.current.updateRectMinMax((0,w.getCurrentTransform)(this.ctx),r),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;o.isolated||(0,b.info)("TODO: Support non-isolated groups."),o.knockout&&(0,b.warn)("Knockout groups not supported.");const A=(0,w.getCurrentTransform)(r);if(o.matrix&&r.transform(...o.matrix),!o.bbox)throw new Error("Bounding box is required.");let x=b.Util.getAxialAlignedBoundingBox(o.bbox,(0,w.getCurrentTransform)(r));const M=[0,0,r.canvas.width,r.canvas.height];x=b.Util.intersect(x,M)||[0,0,0,0];const I=Math.floor(x[0]),U=Math.floor(x[1]);let z=Math.max(Math.ceil(x[2])-I,1),it=Math.max(Math.ceil(x[3])-U,1),J=1,et=1;z>y&&(J=z/y,z=y),it>y&&(et=it/y,it=y),this.current.startNewPathAndClipBox([0,0,z,it]);let Y="groupAt"+this.groupLevel;o.smask&&(Y+="_smask_"+this.smaskCounter++%2);const a=this.cachedCanvases.getCanvas(Y,z,it),h=a.context;h.scale(1/J,1/et),h.translate(-I,-U),h.transform(...A),o.smask?this.smaskStack.push({canvas:a.canvas,context:h,offsetX:I,offsetY:U,scaleX:J,scaleY:et,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(I,U),r.scale(J,et),r.save()),t(r,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,A=this.groupStack.pop();if(this.ctx=A,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const x=(0,w.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...x);const M=b.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],x);this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(M)}}beginAnnotation(o,r,A,x,M){if(dt(this,H,ue).call(this),e(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(r)&&r.length===4){const I=r[2]-r[0],U=r[3]-r[1];if(M&&this.annotationCanvasMap){A=A.slice(),A[4]-=r[0],A[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=I,r[3]=U;const[z,it]=b.Util.singularValueDecompose2dScale((0,w.getCurrentTransform)(this.ctx)),{viewportScale:J}=this,et=Math.ceil(I*this.outputScaleX*J),Y=Math.ceil(U*this.outputScaleY*J);this.annotationCanvas=this.canvasFactory.create(et,Y);const{canvas:a,context:h}=this.annotationCanvas;this.annotationCanvasMap.set(o,a),this.annotationCanvas.savedCtx=this.ctx,this.ctx=h,this.ctx.setTransform(z,0,0,-it,0,U*it),e(this.ctx,this.foregroundColor)}else e(this.ctx,this.foregroundColor),this.ctx.rect(r[0],r[1],I,U),this.ctx.clip(),this.endPath()}this.current=new c(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...A),this.transform(...x)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(o){if(!this.contentVisible)return;const r=o.count;o=this.getObject(o.data,o),o.count=r;const A=this.ctx,x=this.processingType3;if(x&&(x.compiled===void 0&&(x.compiled=l(o)),x.compiled)){x.compiled(A);return}const M=this._createMaskCanvas(o),I=M.canvas;A.save(),A.setTransform(1,0,0,1,0,0),A.drawImage(I,M.offsetX,M.offsetY),A.restore(),this.compose()}paintImageMaskXObjectRepeat(o,r,A=0,x=0,M,I){if(!this.contentVisible)return;o=this.getObject(o.data,o);const U=this.ctx;U.save();const z=(0,w.getCurrentTransform)(U);U.transform(r,A,x,M,0,0);const it=this._createMaskCanvas(o);U.setTransform(1,0,0,1,it.offsetX-z[4],it.offsetY-z[5]);for(let J=0,et=I.length;J<et;J+=2){const Y=b.Util.transform(z,[r,A,x,M,I[J],I[J+1]]),[a,h]=b.Util.applyTransform([0,0],Y);U.drawImage(it.canvas,a,h)}U.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const r=this.ctx,A=this.current.fillColor,x=this.current.patternFill;for(const M of o){const{data:I,width:U,height:z,transform:it}=M,J=this.cachedCanvases.getCanvas("maskCanvas",U,z),et=J.context;et.save();const Y=this.getObject(I,M);s(et,Y),et.globalCompositeOperation="source-in",et.fillStyle=x?A.getPattern(et,this,(0,w.getCurrentTransformInverse)(r),V.PathType.FILL):A,et.fillRect(0,0,U,z),et.restore(),r.save(),r.transform(...it),r.scale(1,-1),i(r,J.canvas,0,0,U,z,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const r=this.getObject(o);if(!r){(0,b.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(o,r,A,x){if(!this.contentVisible)return;const M=this.getObject(o);if(!M){(0,b.warn)("Dependent image isn't ready yet");return}const I=M.width,U=M.height,z=[];for(let it=0,J=x.length;it<J;it+=2)z.push({transform:[r,0,0,A,x[it],x[it+1]],x:0,y:0,w:I,h:U});this.paintInlineImageXObjectGroup(M,z)}paintInlineImageXObject(o){if(!this.contentVisible)return;const r=o.width,A=o.height,x=this.ctx;this.save(),x.scale(1/r,-1/A);let M;if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)M=o;else{const U=this.cachedCanvases.getCanvas("inlineImage",r,A),z=U.context;n(z,o,this.current.transferMaps),M=U.canvas}const I=this._scaleImage(M,(0,w.getCurrentTransformInverse)(x));x.imageSmoothingEnabled=q((0,w.getCurrentTransform)(x),o.interpolate),i(x,I.img,0,0,I.paintWidth,I.paintHeight,0,-A,r,A),this.compose(),this.restore()}paintInlineImageXObjectGroup(o,r){if(!this.contentVisible)return;const A=this.ctx,x=o.width,M=o.height,I=this.cachedCanvases.getCanvas("inlineImage",x,M),U=I.context;n(U,o,this.current.transferMaps);for(const z of r)A.save(),A.transform(...z.transform),A.scale(1,-1),i(A,I.canvas,z.x,z.y,z.w,z.h,0,-1,1,1),A.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,r){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,r){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const A=this.ctx;this.pendingClip&&(r||(this.pendingClip===X?A.clip("evenodd"):A.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),A.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const o=(0,w.getCurrentTransform)(this.ctx);if(o[1]===0&&o[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(o[0]),Math.abs(o[3]));else{const r=Math.abs(o[0]*o[3]-o[2]*o[1]),A=Math.hypot(o[0],o[2]),x=Math.hypot(o[1],o[3]);this._cachedGetSinglePixelWidth=Math.max(A,x)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:o}=this.current,r=(0,w.getCurrentTransform)(this.ctx);let A,x;if(r[1]===0&&r[2]===0){const M=Math.abs(r[0]),I=Math.abs(r[3]);if(o===0)A=1/M,x=1/I;else{const U=M*o,z=I*o;A=U<1?1/U:1,x=z<1?1/z:1}}else{const M=Math.abs(r[0]*r[3]-r[2]*r[1]),I=Math.hypot(r[0],r[1]),U=Math.hypot(r[2],r[3]);if(o===0)A=U/M,x=I/M;else{const z=o*M;A=U>z?U/z:1,x=I>z?I/z:1}}this._cachedScaleForStroking=[A,x]}return this._cachedScaleForStroking}rescaleAndStroke(o){const{ctx:r}=this,{lineWidth:A}=this.current,[x,M]=this.getScaleForStroking();if(r.lineWidth=A||1,x===1&&M===1){r.stroke();return}let I,U,z;o&&(I=(0,w.getCurrentTransform)(r),U=r.getLineDash().slice(),z=r.lineDashOffset),r.scale(x,M);const it=Math.max(x,M);r.setLineDash(r.getLineDash().map(J=>J/it)),r.lineDashOffset/=it,r.stroke(),o&&(r.setTransform(...I),r.setLineDash(U),r.lineDashOffset=z)}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}};let W=ht;H=new WeakSet,ue=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},m.CanvasGraphics=W;for(const k in b.OPS)W.prototype[k]!==void 0&&(W.prototype[b.OPS[k]]=W.prototype[k])},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TilingPattern=m.PathType=void 0,m.getShadingPattern=_;var b=Z(1),w=Z(6);const V={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};m.PathType=V;function G(i,l){if(!l)return;const c=l[2]-l[0],n=l[3]-l[1],s=new Path2D;s.rect(l[0],l[1],c,n),i.clip(s)}class Q{constructor(){this.constructor===Q&&(0,b.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,b.unreachable)("Abstract method `getPattern` called.")}}class j extends Q{constructor(l){super(),this._type=l[1],this._bbox=l[2],this._colorStops=l[3],this._p0=l[4],this._p1=l[5],this._r0=l[6],this._r1=l[7],this.matrix=null}_createGradient(l){let c;this._type==="axial"?c=l.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(c=l.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)c.addColorStop(n[0],n[1]);return c}getPattern(l,c,n,s){let t;if(s===V.STROKE||s===V.FILL){const e=c.current.getClippedPathBoundingBox(s,(0,w.getCurrentTransform)(l))||[0,0,0,0],d=Math.ceil(e[2]-e[0])||1,v=Math.ceil(e[3]-e[1])||1,P=c.cachedCanvases.getCanvas("pattern",d,v,!0),N=P.context;N.clearRect(0,0,N.canvas.width,N.canvas.height),N.beginPath(),N.rect(0,0,N.canvas.width,N.canvas.height),N.translate(-e[0],-e[1]),n=b.Util.transform(n,[1,0,0,1,e[0],e[1]]),N.transform(...c.baseTransform),this.matrix&&N.transform(...this.matrix),G(N,this._bbox),N.fillStyle=this._createGradient(N),N.fill(),t=l.createPattern(P.canvas,"no-repeat");const p=new DOMMatrix(n);t.setTransform(p)}else G(l,this._bbox),t=this._createGradient(l);return t}}function y(i,l,c,n,s,t,e,d){const v=l.coords,P=l.colors,N=i.data,p=i.width*4;let q;v[c+1]>v[n+1]&&(q=c,c=n,n=q,q=t,t=e,e=q),v[n+1]>v[s+1]&&(q=n,n=s,s=q,q=e,e=d,d=q),v[c+1]>v[n+1]&&(q=c,c=n,n=q,q=t,t=e,e=q);const lt=(v[c]+l.offsetX)*l.scaleX,tt=(v[c+1]+l.offsetY)*l.scaleY,at=(v[n]+l.offsetX)*l.scaleX,X=(v[n+1]+l.offsetY)*l.scaleY,W=(v[s]+l.offsetX)*l.scaleX,H=(v[s+1]+l.offsetY)*l.scaleY;if(tt>=H)return;const rt=P[t],ht=P[t+1],k=P[t+2],o=P[e],r=P[e+1],A=P[e+2],x=P[d],M=P[d+1],I=P[d+2],U=Math.round(tt),z=Math.round(H);let it,J,et,Y,a,h,S,R;for(let T=U;T<=z;T++){if(T<X){let K;T<tt?K=0:K=(tt-T)/(tt-X),it=lt-(lt-at)*K,J=rt-(rt-o)*K,et=ht-(ht-r)*K,Y=k-(k-A)*K}else{let K;T>H?K=1:X===H?K=0:K=(X-T)/(X-H),it=at-(at-W)*K,J=o-(o-x)*K,et=r-(r-M)*K,Y=A-(A-I)*K}let B;T<tt?B=0:T>H?B=1:B=(tt-T)/(tt-H),a=lt-(lt-W)*B,h=rt-(rt-x)*B,S=ht-(ht-M)*B,R=k-(k-I)*B;const nt=Math.round(Math.min(it,a)),ot=Math.round(Math.max(it,a));let ut=p*T+nt*4;for(let K=nt;K<=ot;K++)B=(it-K)/(it-a),B<0?B=0:B>1&&(B=1),N[ut++]=J-(J-h)*B|0,N[ut++]=et-(et-S)*B|0,N[ut++]=Y-(Y-R)*B|0,N[ut++]=255}}function E(i,l,c){const n=l.coords,s=l.colors;let t,e;switch(l.type){case"lattice":const d=l.verticesPerRow,v=Math.floor(n.length/d)-1,P=d-1;for(t=0;t<v;t++){let N=t*d;for(let p=0;p<P;p++,N++)y(i,c,n[N],n[N+1],n[N+d],s[N],s[N+1],s[N+d]),y(i,c,n[N+d+1],n[N+1],n[N+d],s[N+d+1],s[N+1],s[N+d])}break;case"triangles":for(t=0,e=n.length;t<e;t+=3)y(i,c,n[t],n[t+1],n[t+2],s[t],s[t+1],s[t+2]);break;default:throw new Error("illegal figure")}}class O extends Q{constructor(l){super(),this._coords=l[2],this._colors=l[3],this._figures=l[4],this._bounds=l[5],this._bbox=l[7],this._background=l[8],this.matrix=null}_createMeshCanvas(l,c,n){const d=Math.floor(this._bounds[0]),v=Math.floor(this._bounds[1]),P=Math.ceil(this._bounds[2])-d,N=Math.ceil(this._bounds[3])-v,p=Math.min(Math.ceil(Math.abs(P*l[0]*1.1)),3e3),q=Math.min(Math.ceil(Math.abs(N*l[1]*1.1)),3e3),lt=P/p,tt=N/q,at={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-v,scaleX:1/lt,scaleY:1/tt},X=p+2*2,W=q+2*2,H=n.getCanvas("mesh",X,W,!1),rt=H.context,ht=rt.createImageData(p,q);if(c){const o=ht.data;for(let r=0,A=o.length;r<A;r+=4)o[r]=c[0],o[r+1]=c[1],o[r+2]=c[2],o[r+3]=255}for(const o of this._figures)E(ht,o,at);return rt.putImageData(ht,2,2),{canvas:H.canvas,offsetX:d-2*lt,offsetY:v-2*tt,scaleX:lt,scaleY:tt}}getPattern(l,c,n,s){G(l,this._bbox);let t;if(s===V.SHADING)t=b.Util.singularValueDecompose2dScale((0,w.getCurrentTransform)(l));else if(t=b.Util.singularValueDecompose2dScale(c.baseTransform),this.matrix){const d=b.Util.singularValueDecompose2dScale(this.matrix);t=[t[0]*d[0],t[1]*d[1]]}const e=this._createMeshCanvas(t,s===V.SHADING?null:this._background,c.cachedCanvases);return s!==V.SHADING&&(l.setTransform(...c.baseTransform),this.matrix&&l.transform(...this.matrix)),l.translate(e.offsetX,e.offsetY),l.scale(e.scaleX,e.scaleY),l.createPattern(e.canvas,"no-repeat")}}class C extends Q{getPattern(){return"hotpink"}}function _(i){switch(i[0]){case"RadialAxial":return new j(i);case"Mesh":return new O(i);case"Dummy":return new C}throw new Error(`Unknown IR type: ${i[0]}`)}const f={COLORED:1,UNCOLORED:2};class u{static get MAX_PATTERN_SIZE(){return(0,b.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(l,c,n,s,t){this.operatorList=l[2],this.matrix=l[3]||[1,0,0,1,0,0],this.bbox=l[4],this.xstep=l[5],this.ystep=l[6],this.paintType=l[7],this.tilingType=l[8],this.color=c,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=t}createPatternCanvas(l){const c=this.operatorList,n=this.bbox,s=this.xstep,t=this.ystep,e=this.paintType,d=this.tilingType,v=this.color,P=this.canvasGraphicsFactory;(0,b.info)("TilingType: "+d);const N=n[0],p=n[1],q=n[2],lt=n[3],tt=b.Util.singularValueDecompose2dScale(this.matrix),at=b.Util.singularValueDecompose2dScale(this.baseTransform),X=[tt[0]*at[0],tt[1]*at[1]],W=this.getSizeAndScale(s,this.ctx.canvas.width,X[0]),H=this.getSizeAndScale(t,this.ctx.canvas.height,X[1]),rt=l.cachedCanvases.getCanvas("pattern",W.size,H.size,!0),ht=rt.context,k=P.createCanvasGraphics(ht);k.groupLevel=l.groupLevel,this.setFillAndStrokeStyleToContext(k,e,v);let o=N,r=p,A=q,x=lt;return N<0&&(o=0,A+=Math.abs(N)),p<0&&(r=0,x+=Math.abs(p)),ht.translate(-(W.scale*o),-(H.scale*r)),k.transform(W.scale,0,0,H.scale,0,0),ht.save(),this.clipBbox(k,o,r,A,x),k.baseTransform=(0,w.getCurrentTransform)(k.ctx),k.executeOperatorList(c),k.endDrawing(),{canvas:rt.canvas,scaleX:W.scale,scaleY:H.scale,offsetX:o,offsetY:r}}getSizeAndScale(l,c,n){l=Math.abs(l);const s=Math.max(u.MAX_PATTERN_SIZE,c);let t=Math.ceil(l*n);return t>=s?t=s:n=t/l,{scale:n,size:t}}clipBbox(l,c,n,s,t){const e=s-c,d=t-n;l.ctx.rect(c,n,e,d),l.current.updateRectMinMax((0,w.getCurrentTransform)(l.ctx),[c,n,s,t]),l.clip(),l.endPath()}setFillAndStrokeStyleToContext(l,c,n){const s=l.ctx,t=l.current;switch(c){case f.COLORED:const e=this.ctx;s.fillStyle=e.fillStyle,s.strokeStyle=e.strokeStyle,t.fillColor=e.fillStyle,t.strokeColor=e.strokeStyle;break;case f.UNCOLORED:const d=b.Util.makeHexColor(n[0],n[1],n[2]);s.fillStyle=d,s.strokeStyle=d,t.fillColor=d,t.strokeColor=d;break;default:throw new b.FormatError(`Unsupported paint type: ${c}`)}}getPattern(l,c,n,s){let t=n;s!==V.SHADING&&(t=b.Util.transform(t,c.baseTransform),this.matrix&&(t=b.Util.transform(t,this.matrix)));const e=this.createPatternCanvas(c);let d=new DOMMatrix(t);d=d.translate(e.offsetX,e.offsetY),d=d.scale(1/e.scaleX,1/e.scaleY);const v=l.createPattern(e.canvas,"repeat");return v.setTransform(d),v}}m.TilingPattern=u},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.applyMaskImageData=w;var b=Z(1);function w({src:V,srcPos:G=0,dest:Q,destPos:j=0,width:y,height:E,inverseDecode:O=!1}){const C=b.FeatureTest.isLittleEndian?4278190080:255,[_,f]=O?[0,C]:[C,0],u=y>>3,i=y&7,l=V.length;Q=new Uint32Array(Q.buffer);for(let c=0;c<E;c++){for(const s=G+u;G<s;G++){const t=G<l?V[G]:255;Q[j++]=t&128?f:_,Q[j++]=t&64?f:_,Q[j++]=t&32?f:_,Q[j++]=t&16?f:_,Q[j++]=t&8?f:_,Q[j++]=t&4?f:_,Q[j++]=t&2?f:_,Q[j++]=t&1?f:_}if(i===0)continue;const n=G<l?V[G++]:255;for(let s=0;s<i;s++)Q[j++]=n&1<<7-s?f:_}return{srcPos:G,destPos:j}}},(ct,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.GlobalWorkerOptions=void 0;const Z=Object.create(null);m.GlobalWorkerOptions=Z,Z.workerPort=null,Z.workerSrc=""},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.MessageHandler=void 0;var b=Z(1);const w={UNKNOWN:0,DATA:1,ERROR:2},V={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function G(j){switch(j instanceof Error||typeof j=="object"&&j!==null||(0,b.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),j.name){case"AbortException":return new b.AbortException(j.message);case"MissingPDFException":return new b.MissingPDFException(j.message);case"PasswordException":return new b.PasswordException(j.message,j.code);case"UnexpectedResponseException":return new b.UnexpectedResponseException(j.message,j.status);case"UnknownErrorException":return new b.UnknownErrorException(j.message,j.details);default:return new b.UnknownErrorException(j.message,j.toString())}}class Q{constructor(y,E,O){this.sourceName=y,this.targetName=E,this.comObj=O,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=C=>{const _=C.data;if(_.targetName!==this.sourceName)return;if(_.stream){this._processStreamMessage(_);return}if(_.callback){const u=_.callbackId,i=this.callbackCapabilities[u];if(!i)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],_.callback===w.DATA)i.resolve(_.data);else if(_.callback===w.ERROR)i.reject(G(_.reason));else throw new Error("Unexpected callback case");return}const f=this.actionHandler[_.action];if(!f)throw new Error(`Unknown action from worker: ${_.action}`);if(_.callbackId){const u=this.sourceName,i=_.sourceName;new Promise(function(l){l(f(_.data))}).then(function(l){O.postMessage({sourceName:u,targetName:i,callback:w.DATA,callbackId:_.callbackId,data:l})},function(l){O.postMessage({sourceName:u,targetName:i,callback:w.ERROR,callbackId:_.callbackId,reason:G(l)})});return}if(_.streamId){this._createStreamSink(_);return}f(_.data)},O.addEventListener("message",this._onComObjOnMessage)}on(y,E){const O=this.actionHandler;if(O[y])throw new Error(`There is already an actionName called "${y}"`);O[y]=E}send(y,E,O){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:E},O)}sendWithPromise(y,E,O){const C=this.callbackId++,_=(0,b.createPromiseCapability)();this.callbackCapabilities[C]=_;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:C,data:E},O)}catch(f){_.reject(f)}return _.promise}sendWithStream(y,E,O,C){const _=this.streamId++,f=this.sourceName,u=this.targetName,i=this.comObj;return new ReadableStream({start:l=>{const c=(0,b.createPromiseCapability)();return this.streamControllers[_]={controller:l,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:f,targetName:u,action:y,streamId:_,data:E,desiredSize:l.desiredSize},C),c.promise},pull:l=>{const c=(0,b.createPromiseCapability)();return this.streamControllers[_].pullCall=c,i.postMessage({sourceName:f,targetName:u,stream:V.PULL,streamId:_,desiredSize:l.desiredSize}),c.promise},cancel:l=>{(0,b.assert)(l instanceof Error,"cancel must have a valid reason");const c=(0,b.createPromiseCapability)();return this.streamControllers[_].cancelCall=c,this.streamControllers[_].isClosed=!0,i.postMessage({sourceName:f,targetName:u,stream:V.CANCEL,streamId:_,reason:G(l)}),c.promise}},O)}_createStreamSink(y){const E=y.streamId,O=this.sourceName,C=y.sourceName,_=this.comObj,f=this,u=this.actionHandler[y.action],i={enqueue(l,c=1,n){if(this.isCancelled)return;const s=this.desiredSize;this.desiredSize-=c,s>0&&this.desiredSize<=0&&(this.sinkCapability=(0,b.createPromiseCapability)(),this.ready=this.sinkCapability.promise),_.postMessage({sourceName:O,targetName:C,stream:V.ENQUEUE,streamId:E,chunk:l},n)},close(){this.isCancelled||(this.isCancelled=!0,_.postMessage({sourceName:O,targetName:C,stream:V.CLOSE,streamId:E}),delete f.streamSinks[E])},error(l){(0,b.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,_.postMessage({sourceName:O,targetName:C,stream:V.ERROR,streamId:E,reason:G(l)}))},sinkCapability:(0,b.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[E]=i,new Promise(function(l){l(u(y.data,i))}).then(function(){_.postMessage({sourceName:O,targetName:C,stream:V.START_COMPLETE,streamId:E,success:!0})},function(l){_.postMessage({sourceName:O,targetName:C,stream:V.START_COMPLETE,streamId:E,reason:G(l)})})}_processStreamMessage(y){const E=y.streamId,O=this.sourceName,C=y.sourceName,_=this.comObj,f=this.streamControllers[E],u=this.streamSinks[E];switch(y.stream){case V.START_COMPLETE:y.success?f.startCall.resolve():f.startCall.reject(G(y.reason));break;case V.PULL_COMPLETE:y.success?f.pullCall.resolve():f.pullCall.reject(G(y.reason));break;case V.PULL:if(!u){_.postMessage({sourceName:O,targetName:C,stream:V.PULL_COMPLETE,streamId:E,success:!0});break}u.desiredSize<=0&&y.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=y.desiredSize,new Promise(function(i){i(u.onPull&&u.onPull())}).then(function(){_.postMessage({sourceName:O,targetName:C,stream:V.PULL_COMPLETE,streamId:E,success:!0})},function(i){_.postMessage({sourceName:O,targetName:C,stream:V.PULL_COMPLETE,streamId:E,reason:G(i)})});break;case V.ENQUEUE:if((0,b.assert)(f,"enqueue should have stream controller"),f.isClosed)break;f.controller.enqueue(y.chunk);break;case V.CLOSE:if((0,b.assert)(f,"close should have stream controller"),f.isClosed)break;f.isClosed=!0,f.controller.close(),this._deleteStreamController(f,E);break;case V.ERROR:(0,b.assert)(f,"error should have stream controller"),f.controller.error(G(y.reason)),this._deleteStreamController(f,E);break;case V.CANCEL_COMPLETE:y.success?f.cancelCall.resolve():f.cancelCall.reject(G(y.reason)),this._deleteStreamController(f,E);break;case V.CANCEL:if(!u)break;new Promise(function(i){i(u.onCancel&&u.onCancel(G(y.reason)))}).then(function(){_.postMessage({sourceName:O,targetName:C,stream:V.CANCEL_COMPLETE,streamId:E,success:!0})},function(i){_.postMessage({sourceName:O,targetName:C,stream:V.CANCEL_COMPLETE,streamId:E,reason:G(i)})}),u.sinkCapability.reject(G(y.reason)),u.isCancelled=!0,delete this.streamSinks[E];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(y,E){await Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete this.streamControllers[E]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}m.MessageHandler=Q},(ct,m,Z)=>{var V,G;Object.defineProperty(m,"__esModule",{value:!0}),m.Metadata=void 0;var b=Z(1);class w{constructor({parsedData:j,rawData:y}){st(this,V,void 0);st(this,G,void 0);_t(this,V,j),_t(this,G,y)}getRaw(){return g(this,G)}get(j){return g(this,V).get(j)??null}getAll(){return(0,b.objectFromMap)(g(this,V))}has(j){return g(this,V).has(j)}}V=new WeakMap,G=new WeakMap,m.Metadata=w},(ct,m,Z)=>{var j,y,E,O,C,_,fe;Object.defineProperty(m,"__esModule",{value:!0}),m.OptionalContentConfig=void 0;var b=Z(1),w=Z(8);const V=Symbol("INTERNAL");class G{constructor(i,l){st(this,j,!0);this.name=i,this.intent=l}get visible(){return g(this,j)}_setVisible(i,l){i!==V&&(0,b.unreachable)("Internal method `_setVisible` called."),_t(this,j,l)}}j=new WeakMap;class Q{constructor(i){st(this,_);st(this,y,null);st(this,E,new Map);st(this,O,null);st(this,C,null);if(this.name=null,this.creator=null,i!==null){this.name=i.name,this.creator=i.creator,_t(this,C,i.order);for(const l of i.groups)g(this,E).set(l.id,new G(l.name,l.intent));if(i.baseState==="OFF")for(const l of g(this,E).values())l._setVisible(V,!1);for(const l of i.on)g(this,E).get(l)._setVisible(V,!0);for(const l of i.off)g(this,E).get(l)._setVisible(V,!1);_t(this,O,this.getHash())}}isVisible(i){if(g(this,E).size===0)return!0;if(!i)return(0,b.warn)("Optional content group not defined."),!0;if(i.type==="OCG")return g(this,E).has(i.id)?g(this,E).get(i.id).visible:((0,b.warn)(`Optional content group not found: ${i.id}`),!0);if(i.type==="OCMD"){if(i.expression)return dt(this,_,fe).call(this,i.expression);if(!i.policy||i.policy==="AnyOn"){for(const l of i.ids){if(!g(this,E).has(l))return(0,b.warn)(`Optional content group not found: ${l}`),!0;if(g(this,E).get(l).visible)return!0}return!1}else if(i.policy==="AllOn"){for(const l of i.ids){if(!g(this,E).has(l))return(0,b.warn)(`Optional content group not found: ${l}`),!0;if(!g(this,E).get(l).visible)return!1}return!0}else if(i.policy==="AnyOff"){for(const l of i.ids){if(!g(this,E).has(l))return(0,b.warn)(`Optional content group not found: ${l}`),!0;if(!g(this,E).get(l).visible)return!0}return!1}else if(i.policy==="AllOff"){for(const l of i.ids){if(!g(this,E).has(l))return(0,b.warn)(`Optional content group not found: ${l}`),!0;if(g(this,E).get(l).visible)return!1}return!0}return(0,b.warn)(`Unknown optional content policy ${i.policy}.`),!0}return(0,b.warn)(`Unknown group type ${i.type}.`),!0}setVisibility(i,l=!0){if(!g(this,E).has(i)){(0,b.warn)(`Optional content group not found: ${i}`);return}g(this,E).get(i)._setVisible(V,!!l),_t(this,y,null)}get hasInitialVisibility(){return this.getHash()===g(this,O)}getOrder(){return g(this,E).size?g(this,C)?g(this,C).slice():[...g(this,E).keys()]:null}getGroups(){return g(this,E).size>0?(0,b.objectFromMap)(g(this,E)):null}getGroup(i){return g(this,E).get(i)||null}getHash(){if(g(this,y)!==null)return g(this,y);const i=new w.MurmurHash3_64;for(const[l,c]of g(this,E))i.update(`${l}:${c.visible}`);return _t(this,y,i.hexdigest())}}y=new WeakMap,E=new WeakMap,O=new WeakMap,C=new WeakMap,_=new WeakSet,fe=function(i){const l=i.length;if(l<2)return!0;const c=i[0];for(let n=1;n<l;n++){const s=i[n];let t;if(Array.isArray(s))t=dt(this,_,fe).call(this,s);else if(g(this,E).has(s))t=g(this,E).get(s).visible;else return(0,b.warn)(`Optional content group not found: ${s}`),!0;switch(c){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return c==="And"},m.OptionalContentConfig=Q},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFDataTransportStream=void 0;var b=Z(1),w=Z(6);class V{constructor({length:y,initialData:E,progressiveDone:O=!1,contentDispositionFilename:C=null,disableRange:_=!1,disableStream:f=!1},u){if((0,b.assert)(u,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=O,this._contentDispositionFilename=C,(E==null?void 0:E.length)>0){const i=E instanceof Uint8Array&&E.byteLength===E.buffer.byteLength?E.buffer:new Uint8Array(E).buffer;this._queuedChunks.push(i)}this._pdfDataRangeTransport=u,this._isStreamingSupported=!f,this._isRangeSupported=!_,this._contentLength=y,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((i,l)=>{this._onReceiveData({begin:i,chunk:l})}),this._pdfDataRangeTransport.addProgressListener((i,l)=>{this._onProgress({loaded:i,total:l})}),this._pdfDataRangeTransport.addProgressiveReadListener(i=>{this._onReceiveData({chunk:i})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:y,chunk:E}){const O=E instanceof Uint8Array&&E.byteLength===E.buffer.byteLength?E.buffer:new Uint8Array(E).buffer;if(y===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(O):this._queuedChunks.push(O);else{const C=this._rangeReaders.some(function(_){return _._begin!==y?!1:(_._enqueue(O),!0)});(0,b.assert)(C,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}_onProgress(y){var E,O,C,_;y.total===void 0?(O=(E=this._rangeReaders[0])==null?void 0:E.onProgress)==null||O.call(E,{loaded:y.loaded}):(_=(C=this._fullRequestReader)==null?void 0:C.onProgress)==null||_.call(C,{loaded:y.loaded,total:y.total})}_onProgressiveDone(){var y;(y=this._fullRequestReader)==null||y.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const E=this._rangeReaders.indexOf(y);E>=0&&this._rangeReaders.splice(E,1)}getFullReader(){(0,b.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new G(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,E){if(E<=this._progressiveDataLength)return null;const O=new Q(this,y,E);return this._pdfDataRangeTransport.requestDataRange(y,E),this._rangeReaders.push(O),O}cancelAllRequests(y){var E;(E=this._fullRequestReader)==null||E.cancel(y);for(const O of this._rangeReaders.slice(0))O.cancel(y);this._pdfDataRangeTransport.abort()}}m.PDFDataTransportStream=V;class G{constructor(y,E,O=!1,C=null){this._stream=y,this._done=O||!1,this._filename=(0,w.isPdfFile)(C)?C:null,this._queuedChunks=E||[],this._loaded=0;for(const _ of this._queuedChunks)this._loaded+=_.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,b.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Q{constructor(y,E,O){this._stream=y,this._begin=E,this._end=O,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,b.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(ct,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaText=void 0;class Z{static textContent(w){const V=[],G={items:V,styles:Object.create(null)};function Q(j){var O;if(!j)return;let y=null;const E=j.name;if(E==="#text")y=j.value;else if(Z.shouldBuildText(E))(O=j==null?void 0:j.attributes)!=null&&O.textContent?y=j.attributes.textContent:j.value&&(y=j.value);else return;if(y!==null&&V.push({str:y}),!!j.children)for(const C of j.children)Q(C)}return Q(w),G}static shouldBuildText(w){return!(w==="textarea"||w==="input"||w==="option"||w==="select")}}m.XfaText=Z},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NodeStandardFontDataFactory=m.NodeCanvasFactory=m.NodeCMapReaderFactory=void 0;var b=Z(7);const w=function(j){return new Promise((y,E)=>{require$$5.readFile(j,(C,_)=>{if(C||!_){E(new Error(C));return}y(new Uint8Array(_))})})};class V extends b.BaseCanvasFactory{_createCanvas(y,E){return require$$5.createCanvas(y,E)}}m.NodeCanvasFactory=V;class G extends b.BaseCMapReaderFactory{_fetchData(y,E){return w(y).then(O=>({cMapData:O,compressionType:E}))}}m.NodeCMapReaderFactory=G;class Q extends b.BaseStandardFontDataFactory{_fetchData(y){return w(y)}}m.NodeStandardFontDataFactory=Q},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNodeStream=void 0;var b=Z(1),w=Z(22);const V=require$$5,G=require$$5,Q=require$$5,j=require$$5,y=/^file:\/\/\/[a-zA-Z]:\//;function E(n){const s=j.parse(n);return s.protocol==="file:"||s.host?s:/^[a-z]:[/\\]/i.test(n)?j.parse(`file:///${n}`):(s.host||(s.protocol="file:"),s)}class O{constructor(s){this.source=s,this.url=E(s.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&s.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var s;return((s=this._fullRequestReader)==null?void 0:s._loaded)??0}getFullReader(){return(0,b.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new u(this),this._fullRequestReader}getRangeReader(s,t){if(t<=this._progressiveDataLength)return null;const e=this.isFsUrl?new c(this,s,t):new i(this,s,t);return this._rangeRequestReaders.push(e),e}cancelAllRequests(s){var t;(t=this._fullRequestReader)==null||t.cancel(s);for(const e of this._rangeRequestReaders.slice(0))e.cancel(s)}}m.PDFNodeStream=O;class C{constructor(s){this._url=s.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=s.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,b.createPromiseCapability)(),this._headersCapability=(0,b.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const s=this._readableStream.read();return s===null?(this._readCapability=(0,b.createPromiseCapability)(),this.read()):(this._loaded+=s.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(s).buffer,done:!1})}cancel(s){if(!this._readableStream){this._error(s);return}this._readableStream.destroy(s)}_error(s){this._storedError=s,this._readCapability.resolve()}_setReadableStream(s){this._readableStream=s,s.on("readable",()=>{this._readCapability.resolve()}),s.on("end",()=>{s.destroy(),this._done=!0,this._readCapability.resolve()}),s.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new b.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(s){this._url=s.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,b.createPromiseCapability)();const t=s.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const s=this._readableStream.read();return s===null?(this._readCapability=(0,b.createPromiseCapability)(),this.read()):(this._loaded+=s.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(s).buffer,done:!1})}cancel(s){if(!this._readableStream){this._error(s);return}this._readableStream.destroy(s)}_error(s){this._storedError=s,this._readCapability.resolve()}_setReadableStream(s){this._readableStream=s,s.on("readable",()=>{this._readCapability.resolve()}),s.on("end",()=>{s.destroy(),this._done=!0,this._readCapability.resolve()}),s.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(n,s){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:s}}class u extends C{constructor(s){super(s);const t=e=>{if(e.statusCode===404){const N=new b.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=N,this._headersCapability.reject(N);return}this._headersCapability.resolve(),this._setReadableStream(e);const d=N=>this._readableStream.headers[N.toLowerCase()],{allowRangeRequests:v,suggestedLength:P}=(0,w.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:s.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=P||this._contentLength,this._filename=(0,w.extractFilenameFromHeader)(d)};this._request=null,this._url.protocol==="http:"?this._request=G.request(f(this._url,s.httpHeaders),t):this._request=Q.request(f(this._url,s.httpHeaders),t),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class i extends _{constructor(s,t,e){super(s),this._httpHeaders={};for(const v in s.httpHeaders){const P=s.httpHeaders[v];P!==void 0&&(this._httpHeaders[v]=P)}this._httpHeaders.Range=`bytes=${t}-${e-1}`;const d=v=>{if(v.statusCode===404){const P=new b.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=P;return}this._setReadableStream(v)};this._request=null,this._url.protocol==="http:"?this._request=G.request(f(this._url,this._httpHeaders),d):this._request=Q.request(f(this._url,this._httpHeaders),d),this._request.on("error",v=>{this._storedError=v}),this._request.end()}}class l extends C{constructor(s){super(s);let t=decodeURIComponent(this._url.path);y.test(this._url.href)&&(t=t.replace(/^\//,"")),V.lstat(t,(e,d)=>{if(e){e.code==="ENOENT"&&(e=new b.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,this._headersCapability.reject(e);return}this._contentLength=d.size,this._setReadableStream(V.createReadStream(t)),this._headersCapability.resolve()})}}class c extends _{constructor(s,t,e){super(s);let d=decodeURIComponent(this._url.path);y.test(this._url.href)&&(d=d.replace(/^\//,"")),this._setReadableStream(V.createReadStream(d,{start:t,end:e-1}))}}},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.createResponseStatusError=j,m.extractFilenameFromHeader=Q,m.validateRangeRequestCapabilities=G,m.validateResponseStatus=y;var b=Z(1),w=Z(23),V=Z(6);function G({getResponseHeader:E,isHttp:O,rangeChunkSize:C,disableRange:_}){const f={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(E("Content-Length"),10);return!Number.isInteger(u)||(f.suggestedLength=u,u<=2*C)||_||!O||E("Accept-Ranges")!=="bytes"||(E("Content-Encoding")||"identity")!=="identity"||(f.allowRangeRequests=!0),f}function Q(E){const O=E("Content-Disposition");if(O){let C=(0,w.getFilenameFromContentDispositionHeader)(O);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if((0,V.isPdfFile)(C))return C}return null}function j(E,O){return E===404||E===0&&O.startsWith("file:")?new b.MissingPDFException('Missing PDF "'+O+'".'):new b.UnexpectedResponseException(`Unexpected server response (${E}) while retrieving PDF "${O}".`,E)}function y(E){return E===200||E===206}},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.getFilenameFromContentDispositionHeader=w;var b=Z(1);function w(V){let G=!0,Q=j("filename\\*","i").exec(V);if(Q){Q=Q[1];let u=C(Q);return u=unescape(u),u=_(u),u=f(u),E(u)}if(Q=O(V),Q){const u=f(Q);return E(u)}if(Q=j("filename","i").exec(V),Q){Q=Q[1];let u=C(Q);return u=f(u),E(u)}function j(u,i){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',i)}function y(u,i){if(u){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const l=new TextDecoder(u,{fatal:!0}),c=(0,b.stringToBytes)(i);i=l.decode(c),G=!1}catch{}}return i}function E(u){return G&&/[\x80-\xff]/.test(u)&&(u=y("utf-8",u),G&&(u=y("iso-8859-1",u))),u}function O(u){const i=[];let l;const c=j("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=c.exec(u))!==null;){let[,s,t,e]=l;if(s=parseInt(s,10),s in i){if(s===0)break;continue}i[s]=[t,e]}const n=[];for(let s=0;s<i.length&&s in i;++s){let[t,e]=i[s];e=C(e),t&&(e=unescape(e),s===0&&(e=_(e))),n.push(e)}return n.join("")}function C(u){if(u.startsWith('"')){const i=u.slice(1).split('\\"');for(let l=0;l<i.length;++l){const c=i[l].indexOf('"');c!==-1&&(i[l]=i[l].slice(0,c),i.length=l+1),i[l]=i[l].replace(/\\(.)/g,"$1")}u=i.join('"')}return u}function _(u){const i=u.indexOf("'");if(i===-1)return u;const l=u.slice(0,i),n=u.slice(i+1).replace(/^[^']*'/,"");return y(l,n)}function f(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(i,l,c,n){if(c==="q"||c==="Q")return n=n.replace(/_/g," "),n=n.replace(/=([0-9a-fA-F]{2})/g,function(s,t){return String.fromCharCode(parseInt(t,16))}),y(l,n);try{n=atob(n)}catch{}return y(l,n)})}return""}},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNetworkStream=void 0;var b=Z(1),w=Z(22);const V=200,G=206;function Q(C){const _=C.response;return typeof _!="string"?_:(0,b.stringToBytes)(_).buffer}class j{constructor(_,f={}){this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&f.httpHeaders||Object.create(null),this.withCredentials=f.withCredentials||!1,this.getXhr=f.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_,f,u){const i={begin:_,end:f};for(const l in u)i[l]=u[l];return this.request(i)}requestFull(_){return this.request(_)}request(_){const f=this.getXhr(),u=this.currXhrId++,i=this.pendingRequests[u]={xhr:f};f.open("GET",this.url),f.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const c=this.httpHeaders[l];c!==void 0&&f.setRequestHeader(l,c)}return this.isHttp&&"begin"in _&&"end"in _?(f.setRequestHeader("Range",`bytes=${_.begin}-${_.end-1}`),i.expectedStatus=G):i.expectedStatus=V,f.responseType="arraybuffer",_.onError&&(f.onerror=function(l){_.onError(f.status)}),f.onreadystatechange=this.onStateChange.bind(this,u),f.onprogress=this.onProgress.bind(this,u),i.onHeadersReceived=_.onHeadersReceived,i.onDone=_.onDone,i.onError=_.onError,i.onProgress=_.onProgress,f.send(null),u}onProgress(_,f){var i;const u=this.pendingRequests[_];u&&((i=u.onProgress)==null||i.call(u,f))}onStateChange(_,f){var s,t,e;const u=this.pendingRequests[_];if(!u)return;const i=u.xhr;if(i.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),i.readyState!==4||!(_ in this.pendingRequests))return;if(delete this.pendingRequests[_],i.status===0&&this.isHttp){(s=u.onError)==null||s.call(u,i.status);return}const l=i.status||V;if(!(l===V&&u.expectedStatus===G)&&l!==u.expectedStatus){(t=u.onError)==null||t.call(u,i.status);return}const n=Q(i);if(l===G){const d=i.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);u.onDone({begin:parseInt(v[1],10),chunk:n})}else n?u.onDone({begin:0,chunk:n}):(e=u.onError)==null||e.call(u,i.status)}getRequestXhr(_){return this.pendingRequests[_].xhr}isPendingRequest(_){return _ in this.pendingRequests}abortRequest(_){const f=this.pendingRequests[_].xhr;delete this.pendingRequests[_],f.abort()}}class y{constructor(_){this._source=_,this._manager=new j(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_){const f=this._rangeRequestReaders.indexOf(_);f>=0&&this._rangeRequestReaders.splice(f,1)}getFullReader(){return(0,b.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new E(this._manager,this._source),this._fullRequestReader}getRangeReader(_,f){const u=new O(this._manager,_,f);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(_){var f;(f=this._fullRequestReader)==null||f.cancel(_);for(const u of this._rangeRequestReaders.slice(0))u.cancel(_)}}m.PDFNetworkStream=y;class E{constructor(_,f){this._manager=_;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=_.requestFull(u),this._headersReceivedCapability=(0,b.createPromiseCapability)(),this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _=this._fullRequestId,f=this._manager.getRequestXhr(_),u=c=>f.getResponseHeader(c),{allowRangeRequests:i,suggestedLength:l}=(0,w.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,w.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(_),this._headersReceivedCapability.resolve()}_onDone(_){if(_&&(this._requests.length>0?this._requests.shift().resolve({value:_.chunk,done:!1}):this._cachedChunks.push(_.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_){this._storedError=(0,w.createResponseStatusError)(_,this._url),this._headersReceivedCapability.reject(this._storedError);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_){var f;(f=this.onProgress)==null||f.call(this,{loaded:_.loaded,total:_.lengthComputable?_.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=(0,b.createPromiseCapability)();return this._requests.push(_),_.promise}cancel(_){this._done=!0,this._headersReceivedCapability.reject(_);for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class O{constructor(_,f,u){this._manager=_;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._requestId=_.requestRange(f,u,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _;(_=this.onClosed)==null||_.call(this,this)}_onDone(_){const f=_.chunk;this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunk=f,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_){this._storedError=(0,w.createResponseStatusError)(_,this._url);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_){var f;this.isStreamingSupported||(f=this.onProgress)==null||f.call(this,{loaded:_.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const _=(0,b.createPromiseCapability)();return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFFetchStream=void 0;var b=Z(1),w=Z(22);function V(O,C,_){return{method:"GET",headers:O,signal:_.signal,mode:"cors",credentials:C?"include":"same-origin",redirect:"follow"}}function G(O){const C=new Headers;for(const _ in O){const f=O[_];f!==void 0&&C.append(_,f)}return C}function Q(O){return O instanceof Uint8Array?O.buffer:O instanceof ArrayBuffer?O:((0,b.warn)(`getArrayBuffer - unexpected data format: ${O}`),new Uint8Array(O).buffer)}class j{constructor(C){this.source=C,this.isHttp=/^https?:/i.test(C.url),this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,b.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}getRangeReader(C,_){if(_<=this._progressiveDataLength)return null;const f=new E(this,C,_);return this._rangeRequestReaders.push(f),f}cancelAllRequests(C){var _;(_=this._fullRequestReader)==null||_.cancel(C);for(const f of this._rangeRequestReaders.slice(0))f.cancel(C)}}m.PDFFetchStream=j;class y{constructor(C){this._stream=C,this._reader=null,this._loaded=0,this._filename=null;const _=C.source;this._withCredentials=_.withCredentials||!1,this._contentLength=_.length,this._headersCapability=(0,b.createPromiseCapability)(),this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._headers=G(this._stream.httpHeaders);const f=_.url;fetch(f,V(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,w.validateResponseStatus)(u.status))throw(0,w.createResponseStatusError)(u.status,f);this._reader=u.body.getReader(),this._headersCapability.resolve();const i=n=>u.headers.get(n),{allowRangeRequests:l,suggestedLength:c}=(0,w.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=(0,w.extractFilenameFromHeader)(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new b.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var f;await this._headersCapability.promise;const{value:C,done:_}=await this._reader.read();return _?{value:C,done:_}:(this._loaded+=C.byteLength,(f=this.onProgress)==null||f.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Q(C),done:!1})}cancel(C){var _;(_=this._reader)==null||_.cancel(C),this._abortController.abort()}}class E{constructor(C,_,f){this._stream=C,this._reader=null,this._loaded=0;const u=C.source;this._withCredentials=u.withCredentials||!1,this._readCapability=(0,b.createPromiseCapability)(),this._isStreamingSupported=!u.disableStream,this._abortController=new AbortController,this._headers=G(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_}-${f-1}`);const i=u.url;fetch(i,V(this._headers,this._withCredentials,this._abortController)).then(l=>{if(!(0,w.validateResponseStatus)(l.status))throw(0,w.createResponseStatusError)(l.status,i);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var f;await this._readCapability.promise;const{value:C,done:_}=await this._reader.read();return _?{value:C,done:_}:(this._loaded+=C.byteLength,(f=this.onProgress)==null||f.call(this,{loaded:this._loaded}),{value:Q(C),done:!1})}cancel(C){var _;(_=this._reader)==null||_.cancel(C),this._abortController.abort()}}},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TextLayerRenderTask=void 0,m.renderTextLayer=u,m.updateTextLayer=i;var b=Z(1),w=Z(6);const V=1e5,G=30,Q=.8,j=new Map;function y(l,c){let n;if(c&&b.FeatureTest.isOffscreenCanvasSupported)n=new OffscreenCanvas(l,l).getContext("2d",{alpha:!1});else{const s=document.createElement("canvas");s.width=s.height=l,n=s.getContext("2d",{alpha:!1})}return n}function E(l,c){const n=j.get(l);if(n)return n;const s=y(G,c);s.font=`${G}px ${l}`;const t=s.measureText("");let e=t.fontBoundingBoxAscent,d=Math.abs(t.fontBoundingBoxDescent);if(e){const P=e/(e+d);return j.set(l,P),s.canvas.width=s.canvas.height=0,P}s.strokeStyle="red",s.clearRect(0,0,G,G),s.strokeText("g",0,0);let v=s.getImageData(0,0,G,G).data;d=0;for(let P=v.length-1-3;P>=0;P-=4)if(v[P]>0){d=Math.ceil(P/4/G);break}s.clearRect(0,0,G,G),s.strokeText("A",0,G),v=s.getImageData(0,0,G,G).data,e=0;for(let P=0,N=v.length;P<N;P+=4)if(v[P]>0){e=G-Math.floor(P/4/G);break}if(s.canvas.width=s.canvas.height=0,e){const P=e/(e+d);return j.set(l,P),P}return j.set(l,Q),Q}function O(l,c,n){const s=document.createElement("span"),t={angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,fontSize:0};l._textDivs.push(s);const e=b.Util.transform(l._transform,c.transform);let d=Math.atan2(e[1],e[0]);const v=n[c.fontName];v.vertical&&(d+=Math.PI/2);const P=Math.hypot(e[2],e[3]),N=P*E(v.fontFamily,l._isOffscreenCanvasSupported);let p,q;d===0?(p=e[4],q=e[5]-N):(p=e[4]+N*Math.sin(d),q=e[5]-N*Math.cos(d));const lt="calc(var(--scale-factor)*",tt=s.style;l._container===l._rootContainer?(tt.left=`${(100*p/l._pageWidth).toFixed(2)}%`,tt.top=`${(100*q/l._pageHeight).toFixed(2)}%`):(tt.left=`${lt}${p.toFixed(2)}px)`,tt.top=`${lt}${q.toFixed(2)}px)`),tt.fontSize=`${lt}${P.toFixed(2)}px)`,tt.fontFamily=v.fontFamily,t.fontSize=P,s.setAttribute("role","presentation"),s.textContent=c.str,s.dir=c.dir,l._fontInspectorEnabled&&(s.dataset.fontName=c.fontName),d!==0&&(t.angle=d*(180/Math.PI));let at=!1;if(c.str.length>1)at=!0;else if(c.str!==" "&&c.transform[0]!==c.transform[3]){const X=Math.abs(c.transform[0]),W=Math.abs(c.transform[3]);X!==W&&Math.max(X,W)/Math.min(X,W)>1.5&&(at=!0)}at&&(t.canvasWidth=v.vertical?c.height:c.width),l._textDivProperties.set(s,t),l._isReadableStream&&l._layoutText(s)}function C(l){const{div:c,scale:n,properties:s,ctx:t,prevFontSize:e,prevFontFamily:d}=l,{style:v}=c;let P="";if(s.canvasWidth!==0&&s.hasText){const{fontFamily:N}=v,{canvasWidth:p,fontSize:q}=s;(e!==q||d!==N)&&(t.font=`${q*n}px ${N}`,l.prevFontSize=q,l.prevFontFamily=N);const{width:lt}=t.measureText(c.textContent);lt>0&&(P=`scaleX(${p*n/lt})`)}s.angle!==0&&(P=`rotate(${s.angle}deg) ${P}`),P.length>0&&(v.transform=P)}function _(l){if(l._canceled)return;const c=l._textDivs,n=l._capability;if(c.length>V){n.resolve();return}if(!l._isReadableStream)for(const t of c)l._layoutText(t);n.resolve()}class f{constructor({textContentSource:c,container:n,viewport:s,textDivs:t,textDivProperties:e,textContentItemsStr:d,isOffscreenCanvasSupported:v}){var lt;this._textContentSource=c,this._isReadableStream=c instanceof ReadableStream,this._container=this._rootContainer=n,this._textDivs=t||[],this._textContentItemsStr=d||[],this._isOffscreenCanvasSupported=v,this._fontInspectorEnabled=!!((lt=globalThis.FontInspector)!=null&&lt.enabled),this._reader=null,this._textDivProperties=e||new WeakMap,this._canceled=!1,this._capability=(0,b.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:s.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y(0,v)};const{pageWidth:P,pageHeight:N,pageX:p,pageY:q}=s.rawDims;this._transform=[1,0,0,-1,-p,q+N],this._pageWidth=P,this._pageHeight=N,(0,w.setLayerDimensions)(n,s),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new b.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new b.AbortException("TextLayer task cancelled."))}_processItems(c,n){for(const s of c){if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),s.id!==null&&this._container.setAttribute("id",`${s.id}`),t.append(this._container)}else s.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(s.str),O(this,s,n)}}_layoutText(c){const n=this._layoutTextParams.properties=this._textDivProperties.get(c);if(this._layoutTextParams.div=c,C(this._layoutTextParams),n.hasText&&this._container.append(c),n.hasEOL){const s=document.createElement("br");s.setAttribute("role","presentation"),this._container.append(s)}}_render(){const c=(0,b.createPromiseCapability)();let n=Object.create(null);if(this._isReadableStream){const s=()=>{this._reader.read().then(({value:t,done:e})=>{if(e){c.resolve();return}Object.assign(n,t.styles),this._processItems(t.items,n),s()},c.reject)};this._reader=this._textContentSource.getReader(),s()}else if(this._textContentSource){const{items:s,styles:t}=this._textContentSource;this._processItems(s,t),c.resolve()}else throw new Error('No "textContentSource" parameter specified.');c.promise.then(()=>{n=null,_(this)},this._capability.reject)}}m.TextLayerRenderTask=f;function u(l){!l.textContentSource&&(l.textContent||l.textContentStream)&&((0,w.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),l.textContentSource=l.textContent||l.textContentStream);const c=new f(l);return c._render(),c}function i({container:l,viewport:c,textDivs:n,textDivProperties:s,isOffscreenCanvasSupported:t,mustRotate:e=!0,mustRescale:d=!0}){if(e&&(0,w.setLayerDimensions)(l,{rotation:c.rotation}),d){const v=y(0,t),N={prevFontSize:null,prevFontFamily:null,div:null,scale:c.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v};for(const p of n)N.properties=s.get(p),N.div=p,C(N)}}},(ct,m,Z)=>{var y,E,O,C,_,f,u,i,l,pe,n,Ie,t,ge,d,me;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditorLayer=void 0;var b=Z(1),w=Z(5),V=Z(28),G=Z(29),Q=Z(6);const P=class{constructor(p){st(this,l);st(this,n);st(this,t);st(this,d);st(this,y,void 0);st(this,E,!1);st(this,O,this.pointerup.bind(this));st(this,C,this.pointerdown.bind(this));st(this,_,new Map);st(this,f,!1);st(this,u,!1);st(this,i,void 0);P._initialized||(P._initialized=!0,V.FreeTextEditor.initialize(p.l10n),G.InkEditor.initialize(p.l10n)),p.uiManager.registerEditorTypes([V.FreeTextEditor,G.InkEditor]),_t(this,i,p.uiManager),this.pageIndex=p.pageIndex,this.div=p.div,_t(this,y,p.accessibilityManager),g(this,i).addLayer(this)}get isEmpty(){return g(this,_).size===0}updateToolbar(p){g(this,i).updateToolbar(p)}updateMode(p=g(this,i).getMode()){dt(this,d,me).call(this),p===b.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),g(this,i).unselectAll(),p!==b.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",p===b.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",p===b.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(p){if(!p&&g(this,i).getMode()!==b.AnnotationEditorType.INK)return;if(!p){for(const lt of g(this,_).values())if(lt.isEmpty()){lt.setInBackground();return}}dt(this,t,ge).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(p){g(this,i).setEditingState(p)}addCommands(p){g(this,i).addCommands(p)}enable(){this.div.style.pointerEvents="auto";for(const p of g(this,_).values())p.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const p of g(this,_).values())p.disableEditing();dt(this,d,me).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(p){g(this,i).getActive()!==p&&g(this,i).setActiveEditor(p)}enableClick(){this.div.addEventListener("pointerdown",g(this,C)),this.div.addEventListener("pointerup",g(this,O))}disableClick(){this.div.removeEventListener("pointerdown",g(this,C)),this.div.removeEventListener("pointerup",g(this,O))}attach(p){g(this,_).set(p.id,p)}detach(p){var q;g(this,_).delete(p.id),(q=g(this,y))==null||q.removePointerInTextLayer(p.contentDiv)}remove(p){g(this,i).removeEditor(p),this.detach(p),p.div.style.display="none",setTimeout(()=>{p.div.style.display="",p.div.remove(),p.isAttachedToDOM=!1,document.activeElement===document.body&&g(this,i).focusMainContainer()},0),g(this,u)||this.addInkEditorIfNeeded(!1)}add(p){if(dt(this,l,pe).call(this,p),g(this,i).addEditor(p),this.attach(p),!p.isAttachedToDOM){const q=p.render();this.div.append(q),p.isAttachedToDOM=!0}this.moveEditorInDOM(p),p.onceAdded(),g(this,i).addToAnnotationStorage(p)}moveEditorInDOM(p){var q;(q=g(this,y))==null||q.moveElementInDOM(this.div,p.div,p.contentDiv,!0)}addOrRebuild(p){p.needsToBeRebuilt()?p.rebuild():this.add(p)}addANewEditor(p){const q=()=>{this.addOrRebuild(p)},lt=()=>{p.remove()};this.addCommands({cmd:q,undo:lt,mustExec:!0})}addUndoableEditor(p){const q=()=>{this.addOrRebuild(p)},lt=()=>{p.remove()};this.addCommands({cmd:q,undo:lt,mustExec:!1})}getNextId(){return g(this,i).getId()}deserialize(p){switch(p.annotationType){case b.AnnotationEditorType.FREETEXT:return V.FreeTextEditor.deserialize(p,this,g(this,i));case b.AnnotationEditorType.INK:return G.InkEditor.deserialize(p,this,g(this,i))}return null}setSelected(p){g(this,i).setSelected(p)}toggleSelected(p){g(this,i).toggleSelected(p)}isSelected(p){return g(this,i).isSelected(p)}unselect(p){g(this,i).unselect(p)}pointerup(p){const{isMac:q}=b.FeatureTest.platform;if(!(p.button!==0||p.ctrlKey&&q)&&p.target===this.div&&g(this,f)){if(_t(this,f,!1),!g(this,E)){_t(this,E,!0);return}dt(this,t,ge).call(this,p)}}pointerdown(p){const{isMac:q}=b.FeatureTest.platform;if(p.button!==0||p.ctrlKey&&q||p.target!==this.div)return;_t(this,f,!0);const lt=g(this,i).getActive();_t(this,E,!lt||lt.isEmpty())}drop(p){const q=p.dataTransfer.getData("text/plain"),lt=g(this,i).getEditor(q);if(!lt)return;p.preventDefault(),p.dataTransfer.dropEffect="move",dt(this,l,pe).call(this,lt);const tt=this.div.getBoundingClientRect(),at=p.clientX-tt.x,X=p.clientY-tt.y;lt.translate(at-lt.startX,X-lt.startY),this.moveEditorInDOM(lt),lt.div.focus()}dragover(p){p.preventDefault()}destroy(){var p,q;((p=g(this,i).getActive())==null?void 0:p.parent)===this&&g(this,i).setActiveEditor(null);for(const lt of g(this,_).values())(q=g(this,y))==null||q.removePointerInTextLayer(lt.contentDiv),lt.setParent(null),lt.isAttachedToDOM=!1,lt.div.remove();this.div=null,g(this,_).clear(),g(this,i).removeLayer(this)}render({viewport:p}){this.viewport=p,(0,Q.setLayerDimensions)(this.div,p),(0,w.bindEvents)(this,this.div,["dragover","drop"]);for(const q of g(this,i).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:p}){g(this,i).commitOrRemove(),this.viewport=p,(0,Q.setLayerDimensions)(this.div,{rotation:p.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:p,pageHeight:q}=this.viewport.rawDims;return[p,q]}};let j=P;y=new WeakMap,E=new WeakMap,O=new WeakMap,C=new WeakMap,_=new WeakMap,f=new WeakMap,u=new WeakMap,i=new WeakMap,l=new WeakSet,pe=function(p){var q;p.parent!==this&&(this.attach(p),(q=p.parent)==null||q.detach(p),p.setParent(this),p.div&&p.isAttachedToDOM&&(p.div.remove(),this.div.append(p.div)))},n=new WeakSet,Ie=function(p){switch(g(this,i).getMode()){case b.AnnotationEditorType.FREETEXT:return new V.FreeTextEditor(p);case b.AnnotationEditorType.INK:return new G.InkEditor(p)}return null},t=new WeakSet,ge=function(p){const q=this.getNextId(),lt=dt(this,n,Ie).call(this,{parent:this,id:q,x:p.offsetX,y:p.offsetY,uiManager:g(this,i)});return lt&&this.add(lt),lt},d=new WeakSet,me=function(){_t(this,u,!0);for(const p of g(this,_).values())p.isEmpty()&&p.remove();_t(this,u,!1)},Ot(j,"_initialized",!1),m.AnnotationEditorLayer=j},(ct,m,Z)=>{var Q,j,y,E,O,C,_,f,u,i,Le,c,Ne,s,Ue,e,be;Object.defineProperty(m,"__esModule",{value:!0}),m.FreeTextEditor=void 0;var b=Z(1),w=Z(5),V=Z(4);const v=class extends V.AnnotationEditor{constructor(p){super({...p,name:"freeTextEditor"});st(this,i);st(this,c);st(this,s);st(this,e);st(this,Q,this.editorDivBlur.bind(this));st(this,j,this.editorDivFocus.bind(this));st(this,y,this.editorDivInput.bind(this));st(this,E,this.editorDivKeydown.bind(this));st(this,O,void 0);st(this,C,"");st(this,_,`${this.id}-editor`);st(this,f,!1);st(this,u,void 0);_t(this,O,p.color||v._defaultColor||V.AnnotationEditor._defaultLineColor),_t(this,u,p.fontSize||v._defaultFontSize)}static initialize(p){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(lt=>[lt,p.get(lt)]));const q=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(q.getPropertyValue("--freetext-padding"))}static updateDefaultParams(p,q){switch(p){case b.AnnotationEditorParamsType.FREETEXT_SIZE:v._defaultFontSize=q;break;case b.AnnotationEditorParamsType.FREETEXT_COLOR:v._defaultColor=q;break}}updateParams(p,q){switch(p){case b.AnnotationEditorParamsType.FREETEXT_SIZE:dt(this,i,Le).call(this,q);break;case b.AnnotationEditorParamsType.FREETEXT_COLOR:dt(this,c,Ne).call(this,q);break}}static get defaultPropertiesToUpdate(){return[[b.AnnotationEditorParamsType.FREETEXT_SIZE,v._defaultFontSize],[b.AnnotationEditorParamsType.FREETEXT_COLOR,v._defaultColor||V.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[b.AnnotationEditorParamsType.FREETEXT_SIZE,g(this,u)],[b.AnnotationEditorParamsType.FREETEXT_COLOR,g(this,O)]]}getInitialTranslation(){const p=this.parentScale;return[-v._internalPadding*p,-(v._internalPadding+g(this,u))*p]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(b.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",g(this,E)),this.editorDiv.addEventListener("focus",g(this,j)),this.editorDiv.addEventListener("blur",g(this,Q)),this.editorDiv.addEventListener("input",g(this,y)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",g(this,_)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",g(this,E)),this.editorDiv.removeEventListener("focus",g(this,j)),this.editorDiv.removeEventListener("blur",g(this,Q)),this.editorDiv.removeEventListener("input",g(this,y)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(p){super.focusin(p),p.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),g(this,f)||(_t(this,f,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_t(this,C,dt(this,s,Ue).call(this).trimEnd()),dt(this,e,be).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(p){this.enableEditMode(),this.editorDiv.focus()}keydown(p){p.target===this.div&&p.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(p){v._keyboardManager.exec(this,p)}editorDivFocus(p){this.isEditing=!0}editorDivBlur(p){this.isEditing=!1}editorDivInput(p){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let p,q;this.width&&(p=this.x,q=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",g(this,_)),this.enableEditing(),v._l10nPromise.get("editor_free_text2_aria_label").then(tt=>{var at;return(at=this.editorDiv)==null?void 0:at.setAttribute("aria-label",tt)}),v._l10nPromise.get("free_text2_default_content").then(tt=>{var at;return(at=this.editorDiv)==null?void 0:at.setAttribute("default-content",tt)}),this.editorDiv.contentEditable=!0;const{style:lt}=this.editorDiv;if(lt.fontSize=`calc(${g(this,u)}px * var(--scale-factor))`,lt.color=g(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,w.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[tt,at]=this.parentDimensions;this.setAt(p*tt,q*at,this.width*tt,this.height*at);for(const X of g(this,C).split(`
`)){const W=document.createElement("div");W.append(X?document.createTextNode(X):document.createElement("br")),this.editorDiv.append(W)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(p,q,lt){const tt=super.deserialize(p,q,lt);return _t(tt,u,p.fontSize),_t(tt,O,b.Util.makeHexColor(...p.color)),_t(tt,C,p.value),tt}serialize(){if(this.isEmpty())return null;const p=v._internalPadding*this.parentScale,q=this.getRect(p,p),lt=V.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:g(this,O));return{annotationType:b.AnnotationEditorType.FREETEXT,color:lt,fontSize:g(this,u),value:g(this,C),pageIndex:this.pageIndex,rect:q,rotation:this.rotation}}};let G=v;Q=new WeakMap,j=new WeakMap,y=new WeakMap,E=new WeakMap,O=new WeakMap,C=new WeakMap,_=new WeakMap,f=new WeakMap,u=new WeakMap,i=new WeakSet,Le=function(p){const q=tt=>{this.editorDiv.style.fontSize=`calc(${tt}px * var(--scale-factor))`,this.translate(0,-(tt-g(this,u))*this.parentScale),_t(this,u,tt),dt(this,e,be).call(this)},lt=g(this,u);this.addCommands({cmd:()=>{q(p)},undo:()=>{q(lt)},mustExec:!0,type:b.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Ne=function(p){const q=g(this,O);this.addCommands({cmd:()=>{_t(this,O,this.editorDiv.style.color=p)},undo:()=>{_t(this,O,this.editorDiv.style.color=q)},mustExec:!0,type:b.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},s=new WeakSet,Ue=function(){const p=this.editorDiv.getElementsByTagName("div");if(p.length===0)return this.editorDiv.innerText;const q=[];for(const lt of p)q.push(lt.innerText.replace(/\r\n?|\n/,""));return q.join(`
`)},e=new WeakSet,be=function(){const[p,q]=this.parentDimensions;let lt;if(this.isAttachedToDOM)lt=this.div.getBoundingClientRect();else{const{currentLayer:tt,div:at}=this,X=at.style.display;at.style.display="hidden",tt.div.append(this.div),lt=at.getBoundingClientRect(),at.remove(),at.style.display=X}this.width=lt.width/p,this.height=lt.height/q},Ot(G,"_freeTextDefaultContent",""),Ot(G,"_l10nPromise"),Ot(G,"_internalPadding",0),Ot(G,"_defaultColor",null),Ot(G,"_defaultFontSize",10),Ot(G,"_keyboardManager",new w.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],v.prototype.commitOrRemove]])),Ot(G,"_type","freetext"),m.FreeTextEditor=G},(ct,m,Z)=>{var E,O,C,_,f,u,i,l,c,n,s,t,e,d,v,je,N,Be,q,We,tt,He,X,_e,H,qe,ht,Ge,o,Xe,A,qt,M,Ae,U,ee,it,se,et,Vt,a,ye,S,ne,T,ve,nt,Ve,ut,ze,mt,$e,bt,Se,Et,ie,St,zt,D,Ee;Object.defineProperty(m,"__esModule",{value:!0}),m.InkEditor=void 0,Object.defineProperty(m,"fitCurve",{enumerable:!0,get:function(){return V.fitCurve}});var b=Z(1),w=Z(4),V=Z(30),G=Z(5);const Q=16,j=100,pt=class extends w.AnnotationEditor{constructor($){super({...$,name:"inkEditor"});st(this,v);st(this,N);st(this,q);st(this,tt);st(this,X);st(this,H);st(this,ht);st(this,o);st(this,A);st(this,M);st(this,U);st(this,it);st(this,et);st(this,a);st(this,S);st(this,nt);st(this,ut);st(this,mt);st(this,bt);st(this,Et);st(this,St);st(this,D);st(this,E,0);st(this,O,0);st(this,C,0);st(this,_,this.canvasPointermove.bind(this));st(this,f,this.canvasPointerleave.bind(this));st(this,u,this.canvasPointerup.bind(this));st(this,i,this.canvasPointerdown.bind(this));st(this,l,!1);st(this,c,!1);st(this,n,null);st(this,s,null);st(this,t,0);st(this,e,0);st(this,d,null);this.color=$.color||null,this.thickness=$.thickness||null,this.opacity=$.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize($){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(ft=>[ft,$.get(ft)]))}static updateDefaultParams($,ft){switch($){case b.AnnotationEditorParamsType.INK_THICKNESS:pt._defaultThickness=ft;break;case b.AnnotationEditorParamsType.INK_COLOR:pt._defaultColor=ft;break;case b.AnnotationEditorParamsType.INK_OPACITY:pt._defaultOpacity=ft/100;break}}updateParams($,ft){switch($){case b.AnnotationEditorParamsType.INK_THICKNESS:dt(this,v,je).call(this,ft);break;case b.AnnotationEditorParamsType.INK_COLOR:dt(this,N,Be).call(this,ft);break;case b.AnnotationEditorParamsType.INK_OPACITY:dt(this,q,We).call(this,ft);break}}static get defaultPropertiesToUpdate(){return[[b.AnnotationEditorParamsType.INK_THICKNESS,pt._defaultThickness],[b.AnnotationEditorParamsType.INK_COLOR,pt._defaultColor||w.AnnotationEditor._defaultLineColor],[b.AnnotationEditorParamsType.INK_OPACITY,Math.round(pt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[b.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||pt._defaultThickness],[b.AnnotationEditorParamsType.INK_COLOR,this.color||pt._defaultColor||w.AnnotationEditor._defaultLineColor],[b.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??pt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(dt(this,U,ee).call(this),dt(this,it,se).call(this)),this.isAttachedToDOM||(this.parent.add(this),dt(this,et,Vt).call(this)),dt(this,St,zt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,g(this,s).disconnect(),_t(this,s,null),super.remove())}setParent($){!this.parent&&$?this._uiManager.removeShouldRescale(this):this.parent&&$===null&&this._uiManager.addShouldRescale(this),super.setParent($)}onScaleChanging(){const[$,ft]=this.parentDimensions,yt=this.width*$,vt=this.height*ft;this.setDimensions(yt,vt)}enableEditMode(){g(this,l)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",g(this,i)),this.canvas.addEventListener("pointerup",g(this,u)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",g(this,i)),this.canvas.removeEventListener("pointerup",g(this,u)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){g(this,l)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_t(this,l,!0),this.div.classList.add("disabled"),dt(this,St,zt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin($){super.focusin($),this.enableEditMode()}canvasPointerdown($){$.button!==0||!this.isInEditMode()||g(this,l)||(this.setInForeground(),$.type!=="mouse"&&this.div.focus(),$.stopPropagation(),this.canvas.addEventListener("pointerleave",g(this,f)),this.canvas.addEventListener("pointermove",g(this,_)),dt(this,H,qe).call(this,$.offsetX,$.offsetY))}canvasPointermove($){$.stopPropagation(),dt(this,ht,Ge).call(this,$.offsetX,$.offsetY)}canvasPointerup($){$.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&($.stopPropagation(),dt(this,M,Ae).call(this,$),this.setInBackground())}canvasPointerleave($){dt(this,M,Ae).call(this,$),this.setInBackground()}render(){if(this.div)return this.div;let $,ft;this.width&&($=this.x,ft=this.y),super.render(),pt._l10nPromise.get("editor_ink2_aria_label").then(xt=>{var kt;return(kt=this.div)==null?void 0:kt.setAttribute("aria-label",xt)});const[yt,vt,Pt,Ft]=dt(this,tt,He).call(this);if(this.setAt(yt,vt,0,0),this.setDims(Pt,Ft),dt(this,U,ee).call(this),this.width){const[xt,kt]=this.parentDimensions;this.setAt($*xt,ft*kt,this.width*xt,this.height*kt),_t(this,c,!0),dt(this,et,Vt).call(this),this.setDims(this.width*xt,this.height*kt),dt(this,A,qt).call(this),dt(this,D,Ee).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return dt(this,it,se).call(this),this.div}setDimensions($,ft){const yt=Math.round($),vt=Math.round(ft);if(g(this,t)===yt&&g(this,e)===vt)return;_t(this,t,yt),_t(this,e,vt),this.canvas.style.visibility="hidden",g(this,E)&&Math.abs(g(this,E)-$/ft)>.01&&(ft=Math.ceil($/g(this,E)),this.setDims($,ft));const[Pt,Ft]=this.parentDimensions;this.width=$/Pt,this.height=ft/Ft,g(this,l)&&dt(this,a,ye).call(this,$,ft),dt(this,et,Vt).call(this),dt(this,A,qt).call(this),this.canvas.style.visibility="visible"}static deserialize($,ft,yt){var It,Lt;const vt=super.deserialize($,ft,yt);vt.thickness=$.thickness,vt.color=b.Util.makeHexColor(...$.color),vt.opacity=$.opacity;const[Pt,Ft]=vt.pageDimensions,xt=vt.width*Pt,kt=vt.height*Ft,wt=vt.parentScale,Rt=$.thickness/2;_t(vt,E,xt/kt),_t(vt,l,!0),_t(vt,t,Math.round(xt)),_t(vt,e,Math.round(kt));for(const{bezier:Nt}of $.paths){const Dt=[];vt.paths.push(Dt);let jt=wt*(Nt[0]-Rt),Bt=wt*(kt-Nt[1]-Rt);for(let Wt=2,Kt=Nt.length;Wt<Kt;Wt+=6){const Jt=wt*(Nt[Wt]-Rt),Qt=wt*(kt-Nt[Wt+1]-Rt),Zt=wt*(Nt[Wt+2]-Rt),te=wt*(kt-Nt[Wt+3]-Rt),Pe=wt*(Nt[Wt+4]-Rt),xe=wt*(kt-Nt[Wt+5]-Rt);Dt.push([[jt,Bt],[Jt,Qt],[Zt,te],[Pe,xe]]),jt=Pe,Bt=xe}const Gt=dt(this,T,ve).call(this,Dt);vt.bezierPath2D.push(Gt)}const Ut=dt(It=vt,bt,Se).call(It);return _t(vt,C,Math.max(Q,Ut[2]-Ut[0])),_t(vt,O,Math.max(Q,Ut[3]-Ut[1])),dt(Lt=vt,a,ye).call(Lt,xt,kt),vt}serialize(){if(this.isEmpty())return null;const $=this.getRect(0,0),ft=this.rotation%180===0?$[3]-$[1]:$[2]-$[0],yt=w.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:b.AnnotationEditorType.INK,color:yt,thickness:this.thickness,opacity:this.opacity,paths:dt(this,nt,Ve).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ft),pageIndex:this.pageIndex,rect:$,rotation:this.rotation}}};let y=pt;E=new WeakMap,O=new WeakMap,C=new WeakMap,_=new WeakMap,f=new WeakMap,u=new WeakMap,i=new WeakMap,l=new WeakMap,c=new WeakMap,n=new WeakMap,s=new WeakMap,t=new WeakMap,e=new WeakMap,d=new WeakMap,v=new WeakSet,je=function($){const ft=this.thickness;this.addCommands({cmd:()=>{this.thickness=$,dt(this,St,zt).call(this)},undo:()=>{this.thickness=ft,dt(this,St,zt).call(this)},mustExec:!0,type:b.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},N=new WeakSet,Be=function($){const ft=this.color;this.addCommands({cmd:()=>{this.color=$,dt(this,A,qt).call(this)},undo:()=>{this.color=ft,dt(this,A,qt).call(this)},mustExec:!0,type:b.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},q=new WeakSet,We=function($){$/=100;const ft=this.opacity;this.addCommands({cmd:()=>{this.opacity=$,dt(this,A,qt).call(this)},undo:()=>{this.opacity=ft,dt(this,A,qt).call(this)},mustExec:!0,type:b.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},tt=new WeakSet,He=function(){const{parentRotation:$,parentDimensions:[ft,yt]}=this;switch($){case 90:return[0,yt,yt,ft];case 180:return[ft,yt,ft,yt];case 270:return[ft,0,yt,ft];default:return[0,0,ft,yt]}},X=new WeakSet,_e=function(){const{ctx:$,color:ft,opacity:yt,thickness:vt,parentScale:Pt,scaleFactor:Ft}=this;$.lineWidth=vt*Pt/Ft,$.lineCap="round",$.lineJoin="round",$.miterLimit=10,$.strokeStyle=`${ft}${(0,G.opacityToHex)(yt)}`},H=new WeakSet,qe=function($,ft){this.isEditing=!0,g(this,c)||(_t(this,c,!0),dt(this,et,Vt).call(this),this.thickness||(this.thickness=pt._defaultThickness),this.color||(this.color=pt._defaultColor||w.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=pt._defaultOpacity)),this.currentPath.push([$,ft]),_t(this,n,null),dt(this,X,_e).call(this),this.ctx.beginPath(),this.ctx.moveTo($,ft),_t(this,d,()=>{g(this,d)&&(g(this,n)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):dt(this,A,qt).call(this),this.ctx.lineTo(...g(this,n)),_t(this,n,null),this.ctx.stroke()),window.requestAnimationFrame(g(this,d)))}),window.requestAnimationFrame(g(this,d))},ht=new WeakSet,Ge=function($,ft){const[yt,vt]=this.currentPath.at(-1);$===yt&&ft===vt||(this.currentPath.push([$,ft]),_t(this,n,[$,ft]))},o=new WeakSet,Xe=function($,ft){var wt;this.ctx.closePath(),_t(this,d,null),$=Math.min(Math.max($,0),this.canvas.width),ft=Math.min(Math.max(ft,0),this.canvas.height);const[yt,vt]=this.currentPath.at(-1);($!==yt||ft!==vt)&&this.currentPath.push([$,ft]);let Pt;if(this.currentPath.length!==1)Pt=(0,V.fitCurve)(this.currentPath,30,null);else{const Rt=[$,ft];Pt=[[Rt,Rt.slice(),Rt.slice(),Rt]]}const Ft=dt(wt=pt,T,ve).call(wt,Pt);this.currentPath.length=0;const xt=()=>{this.paths.push(Pt),this.bezierPath2D.push(Ft),this.rebuild()},kt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(dt(this,U,ee).call(this),dt(this,it,se).call(this)),dt(this,St,zt).call(this))};this.addCommands({cmd:xt,undo:kt,mustExec:!0})},A=new WeakSet,qt=function(){if(this.isEmpty()){dt(this,S,ne).call(this);return}dt(this,X,_e).call(this);const{canvas:$,ctx:ft}=this;ft.setTransform(1,0,0,1,0,0),ft.clearRect(0,0,$.width,$.height),dt(this,S,ne).call(this);for(const yt of this.bezierPath2D)ft.stroke(yt)},M=new WeakSet,Ae=function($){dt(this,o,Xe).call(this,$.offsetX,$.offsetY),this.canvas.removeEventListener("pointerleave",g(this,f)),this.canvas.removeEventListener("pointermove",g(this,_)),this.addToAnnotationStorage()},U=new WeakSet,ee=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",pt._l10nPromise.get("editor_ink_canvas_aria_label").then($=>{var ft;return(ft=this.canvas)==null?void 0:ft.setAttribute("aria-label",$)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},it=new WeakSet,se=function(){let $=null;_t(this,s,new ResizeObserver(ft=>{const yt=ft[0].contentRect;yt.width&&yt.height&&($!==null&&clearTimeout($),$=setTimeout(()=>{this.fixDims(),$=null},j),this.setDimensions(yt.width,yt.height))})),g(this,s).observe(this.div)},et=new WeakSet,Vt=function(){if(!g(this,c))return;const[$,ft]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*$),this.canvas.height=Math.ceil(this.height*ft),dt(this,S,ne).call(this)},a=new WeakSet,ye=function($,ft){const yt=dt(this,Et,ie).call(this),vt=($-yt)/g(this,C),Pt=(ft-yt)/g(this,O);this.scaleFactor=Math.min(vt,Pt)},S=new WeakSet,ne=function(){const $=dt(this,Et,ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+$,this.translationY*this.scaleFactor+$)},T=new WeakSet,ve=function($){const ft=new Path2D;for(let yt=0,vt=$.length;yt<vt;yt++){const[Pt,Ft,xt,kt]=$[yt];yt===0&&ft.moveTo(...Pt),ft.bezierCurveTo(Ft[0],Ft[1],xt[0],xt[1],kt[0],kt[1])}return ft},nt=new WeakSet,Ve=function($,ft,yt,vt){const Ft=[],xt=this.thickness/2;let kt,wt;for(const Rt of this.paths){kt=[],wt=[];for(let Ut=0,It=Rt.length;Ut<It;Ut++){const[Lt,Nt,Dt,jt]=Rt[Ut],Bt=$*(Lt[0]+ft)+xt,Gt=vt-$*(Lt[1]+yt)-xt,Wt=$*(Nt[0]+ft)+xt,Kt=vt-$*(Nt[1]+yt)-xt,Jt=$*(Dt[0]+ft)+xt,Qt=vt-$*(Dt[1]+yt)-xt,Zt=$*(jt[0]+ft)+xt,te=vt-$*(jt[1]+yt)-xt;Ut===0&&(kt.push(Bt,Gt),wt.push(Bt,Gt)),kt.push(Wt,Kt,Jt,Qt,Zt,te),dt(this,ut,ze).call(this,Bt,Gt,Wt,Kt,Jt,Qt,Zt,te,4,wt)}Ft.push({bezier:kt,points:wt})}return Ft},ut=new WeakSet,ze=function($,ft,yt,vt,Pt,Ft,xt,kt,wt,Rt){if(dt(this,mt,$e).call(this,$,ft,yt,vt,Pt,Ft,xt,kt)){Rt.push(xt,kt);return}for(let Ut=1;Ut<wt-1;Ut++){const It=Ut/wt,Lt=1-It;let Nt=It*$+Lt*yt,Dt=It*ft+Lt*vt,jt=It*yt+Lt*Pt,Bt=It*vt+Lt*Ft;const Gt=It*Pt+Lt*xt,Wt=It*Ft+Lt*kt;Nt=It*Nt+Lt*jt,Dt=It*Dt+Lt*Bt,jt=It*jt+Lt*Gt,Bt=It*Bt+Lt*Wt,Nt=It*Nt+Lt*jt,Dt=It*Dt+Lt*Bt,Rt.push(Nt,Dt)}Rt.push(xt,kt)},mt=new WeakSet,$e=function($,ft,yt,vt,Pt,Ft,xt,kt){const Rt=(3*yt-2*$-xt)**2,Ut=(3*vt-2*ft-kt)**2,It=(3*Pt-$-2*xt)**2,Lt=(3*Ft-ft-2*kt)**2;return Math.max(Rt,It)+Math.max(Ut,Lt)<=10},bt=new WeakSet,Se=function(){let $=1/0,ft=-1/0,yt=1/0,vt=-1/0;for(const Pt of this.paths)for(const[Ft,xt,kt,wt]of Pt){const Rt=b.Util.bezierBoundingBox(...Ft,...xt,...kt,...wt);$=Math.min($,Rt[0]),yt=Math.min(yt,Rt[1]),ft=Math.max(ft,Rt[2]),vt=Math.max(vt,Rt[3])}return[$,yt,ft,vt]},Et=new WeakSet,ie=function(){return g(this,l)?Math.ceil(this.thickness*this.parentScale):0},St=new WeakSet,zt=function($=!1){if(this.isEmpty())return;if(!g(this,l)){dt(this,A,qt).call(this);return}const ft=dt(this,bt,Se).call(this),yt=dt(this,Et,ie).call(this);_t(this,C,Math.max(Q,ft[2]-ft[0])),_t(this,O,Math.max(Q,ft[3]-ft[1]));const vt=Math.ceil(yt+g(this,C)*this.scaleFactor),Pt=Math.ceil(yt+g(this,O)*this.scaleFactor),[Ft,xt]=this.parentDimensions;this.width=vt/Ft,this.height=Pt/xt,_t(this,E,vt/Pt),dt(this,D,Ee).call(this);const kt=this.translationX,wt=this.translationY;this.translationX=-ft[0],this.translationY=-ft[1],dt(this,et,Vt).call(this),dt(this,A,qt).call(this),_t(this,t,vt),_t(this,e,Pt),this.setDims(vt,Pt);const Rt=$?yt/this.scaleFactor/2:0;this.translate(kt-this.translationX-Rt,wt-this.translationY-Rt)},D=new WeakSet,Ee=function(){const{style:$}=this.div;g(this,E)>=1?($.minHeight=`${Q}px`,$.minWidth=`${Math.round(g(this,E)*Q)}px`):($.minWidth=`${Q}px`,$.minHeight=`${Math.round(Q/g(this,E))}px`)},st(y,T),Ot(y,"_defaultColor",null),Ot(y,"_defaultOpacity",1),Ot(y,"_defaultThickness",1),Ot(y,"_l10nPromise"),Ot(y,"_type","ink"),m.InkEditor=y},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.fitCurve=void 0;const b=Z(31);m.fitCurve=b},ct=>{function m(f,u,i){if(!Array.isArray(f))throw new TypeError("First argument should be an array");if(f.forEach(s=>{if(!Array.isArray(s)||s.some(t=>typeof t!="number")||s.length!==f[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),f=f.filter((s,t)=>t===0||!s.every((e,d)=>e===f[t-1][d])),f.length<2)return[];const l=f.length,c=O(f[1],f[0]),n=O(f[l-2],f[l-1]);return Z(f,c,n,u,i)}function Z(f,u,i,l,c){var s,t,e,d,v,P,N,p,q,lt,tt,at,X;if(f.length===2)return at=C.vectorLen(C.subtract(f[0],f[1]))/3,s=[f[0],C.addArrays(f[0],C.mulItems(u,at)),C.addArrays(f[1],C.mulItems(i,at)),f[1]],[s];if(t=Q(f),[s,d,P]=b(f,t,t,u,i,c),d===0||d<l)return[s];if(d<l*l)for(e=t,v=d,N=P,X=0;X<20;X++){if(e=V(s,f,e),[s,d,P]=b(f,t,e,u,i,c),d<l)return[s];if(P===N){let W=d/v;if(W>.9999&&W<1.0001)break}v=d,N=P}return tt=[],p=C.subtract(f[P-1],f[P+1]),p.every(W=>W===0)&&(p=C.subtract(f[P-1],f[P]),[p[0],p[1]]=[-p[1],p[0]]),q=C.normalize(p),lt=C.mulItems(q,-1),tt=tt.concat(Z(f.slice(0,P+1),u,q,l,c)),tt=tt.concat(Z(f.slice(P),lt,i,l,c)),tt}function b(f,u,i,l,c,n){var s,t,e;return s=w(f,i,l,c),[t,e]=j(f,s,u),n&&n({bez:s,points:f,params:u,maxErr:t,maxPoint:e}),[s,t,e]}function w(f,u,i,l){var c,n,s,t,e,d,v,P,N,p,q,lt,tt,at,X,W,H,rt=f[0],ht=f[f.length-1];for(c=[rt,null,null,ht],n=C.zeros_Xx2x2(u.length),tt=0,at=u.length;tt<at;tt++)W=u[tt],H=1-W,s=n[tt],s[0]=C.mulItems(i,3*W*(H*H)),s[1]=C.mulItems(l,3*H*(W*W));for(t=[[0,0],[0,0]],e=[0,0],tt=0,at=f.length;tt<at;tt++)W=u[tt],s=n[tt],t[0][0]+=C.dot(s[0],s[0]),t[0][1]+=C.dot(s[0],s[1]),t[1][0]+=C.dot(s[0],s[1]),t[1][1]+=C.dot(s[1],s[1]),X=C.subtract(f[tt],_.q([rt,rt,ht,ht],W)),e[0]+=C.dot(s[0],X),e[1]+=C.dot(s[1],X);return d=t[0][0]*t[1][1]-t[1][0]*t[0][1],v=t[0][0]*e[1]-t[1][0]*e[0],P=e[0]*t[1][1]-e[1]*t[0][1],N=d===0?0:P/d,p=d===0?0:v/d,lt=C.vectorLen(C.subtract(rt,ht)),q=1e-6*lt,N<q||p<q?(c[1]=C.addArrays(rt,C.mulItems(i,lt/3)),c[2]=C.addArrays(ht,C.mulItems(l,lt/3))):(c[1]=C.addArrays(rt,C.mulItems(i,N)),c[2]=C.addArrays(ht,C.mulItems(l,p))),c}function V(f,u,i){return i.map((l,c)=>G(f,u[c],l))}function G(f,u,i){var l=C.subtract(_.q(f,i),u),c=_.qprime(f,i),n=C.mulMatrix(l,c),s=C.sum(C.squareItems(c))+2*C.mulMatrix(l,_.qprimeprime(f,i));return s===0?i:i-n/s}function Q(f){var u=[],i,l,c;return f.forEach((n,s)=>{i=s?l+C.vectorLen(C.subtract(n,c)):0,u.push(i),l=i,c=n}),u=u.map(n=>n/l),u}function j(f,u,i){var l,c,n,s,t,e,d,v;c=0,n=Math.floor(f.length/2);const P=y(u,10);for(t=0,e=f.length;t<e;t++)d=f[t],v=E(u,i[t],P,10),s=C.subtract(_.q(u,v),d),l=s[0]*s[0]+s[1]*s[1],l>c&&(c=l,n=t);return[c,n]}var y=function(f,u){for(var i,l=[0],c=f[0],n=0,s=1;s<=u;s++)i=_.q(f,s/u),n+=C.vectorLen(C.subtract(i,c)),l.push(n),c=i;return l=l.map(t=>t/n),l};function E(f,u,i,l){if(u<0)return 0;if(u>1)return 1;for(var c,n,s,t,e,d=1;d<=l;d++)if(u<=i[d]){t=(d-1)/l,s=d/l,n=i[d-1],c=i[d],e=(u-n)/(c-n)*(s-t)+t;break}return e}function O(f,u){return C.normalize(C.subtract(f,u))}class C{static zeros_Xx2x2(u){for(var i=[];u--;)i.push([0,0]);return i}static mulItems(u,i){return u.map(l=>l*i)}static mulMatrix(u,i){return u.reduce((l,c,n)=>l+c*i[n],0)}static subtract(u,i){return u.map((l,c)=>l-i[c])}static addArrays(u,i){return u.map((l,c)=>l+i[c])}static addItems(u,i){return u.map(l=>l+i)}static sum(u){return u.reduce((i,l)=>i+l)}static dot(u,i){return C.mulMatrix(u,i)}static vectorLen(u){return Math.hypot(...u)}static divItems(u,i){return u.map(l=>l/i)}static squareItems(u){return u.map(i=>i*i)}static normalize(u){return this.divItems(u,this.vectorLen(u))}}class _{static q(u,i){var l=1-i,c=C.mulItems(u[0],l*l*l),n=C.mulItems(u[1],3*l*l*i),s=C.mulItems(u[2],3*l*i*i),t=C.mulItems(u[3],i*i*i);return C.addArrays(C.addArrays(c,n),C.addArrays(s,t))}static qprime(u,i){var l=1-i,c=C.mulItems(C.subtract(u[1],u[0]),3*l*l),n=C.mulItems(C.subtract(u[2],u[1]),6*l*i),s=C.mulItems(C.subtract(u[3],u[2]),3*i*i);return C.addArrays(C.addArrays(c,n),s)}static qprimeprime(u,i){return C.addArrays(C.mulItems(C.addArrays(C.subtract(u[2],C.mulItems(u[1],2)),u[0]),6*(1-i)),C.mulItems(C.addArrays(C.subtract(u[3],C.mulItems(u[2],2)),u[1]),6*i))}}ct.exports=m,ct.exports.fitCubic=Z,ct.exports.createTangent=O},(ct,m,Z)=>{var r,Xt,x,Ye,U,Ce,it,Te;Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationLayer=void 0;var b=Z(1),w=Z(6),V=Z(3),G=Z(33),Q=Z(34);const j=1e3,y=9,E=new WeakSet;function O(Y){return{width:Y[2]-Y[0],height:Y[3]-Y[1]}}class C{static create(a){switch(a.data.annotationType){case b.AnnotationType.LINK:return new f(a);case b.AnnotationType.TEXT:return new u(a);case b.AnnotationType.WIDGET:switch(a.data.fieldType){case"Tx":return new l(a);case"Btn":return a.data.radioButton?new n(a):a.data.checkBox?new c(a):new s(a);case"Ch":return new t(a)}return new i(a);case b.AnnotationType.POPUP:return new e(a);case b.AnnotationType.FREETEXT:return new v(a);case b.AnnotationType.LINE:return new P(a);case b.AnnotationType.SQUARE:return new N(a);case b.AnnotationType.CIRCLE:return new p(a);case b.AnnotationType.POLYLINE:return new q(a);case b.AnnotationType.CARET:return new tt(a);case b.AnnotationType.INK:return new at(a);case b.AnnotationType.POLYGON:return new lt(a);case b.AnnotationType.HIGHLIGHT:return new X(a);case b.AnnotationType.UNDERLINE:return new W(a);case b.AnnotationType.SQUIGGLY:return new H(a);case b.AnnotationType.STRIKEOUT:return new rt(a);case b.AnnotationType.STAMP:return new ht(a);case b.AnnotationType.FILEATTACHMENT:return new k(a);default:return new _(a)}}}class _{constructor(a,{isRenderable:h=!1,ignoreBorder:S=!1,createQuadrilaterals:R=!1}={}){this.isRenderable=h,this.data=a.data,this.layer=a.layer,this.page=a.page,this.viewport=a.viewport,this.linkService=a.linkService,this.downloadManager=a.downloadManager,this.imageResourcesPath=a.imageResourcesPath,this.renderForms=a.renderForms,this.svgFactory=a.svgFactory,this.annotationStorage=a.annotationStorage,this.enableScripting=a.enableScripting,this.hasJSActions=a.hasJSActions,this._fieldObjects=a.fieldObjects,h&&(this.container=this._createContainer(S)),R&&(this.quadrilaterals=this._createQuadrilaterals(S))}_createContainer(a=!1){const{data:h,page:S,viewport:R}=this,T=document.createElement("section");T.setAttribute("data-annotation-id",h.id);const{pageWidth:B,pageHeight:nt,pageX:ot,pageY:ut}=R.rawDims,{width:K,height:mt}=O(h.rect),gt=b.Util.normalizeRect([h.rect[0],S.view[3]-h.rect[1]+S.view[1],h.rect[2],S.view[3]-h.rect[3]+S.view[1]]);if(!a&&h.borderStyle.width>0){T.style.borderWidth=`${h.borderStyle.width}px`;const At=h.borderStyle.horizontalCornerRadius,Et=h.borderStyle.verticalCornerRadius;if(At>0||Et>0){const St=`calc(${At}px * var(--scale-factor)) / calc(${Et}px * var(--scale-factor))`;T.style.borderRadius=St}else if(this instanceof n){const St=`calc(${K}px * var(--scale-factor)) / calc(${mt}px * var(--scale-factor))`;T.style.borderRadius=St}switch(h.borderStyle.style){case b.AnnotationBorderStyleType.SOLID:T.style.borderStyle="solid";break;case b.AnnotationBorderStyleType.DASHED:T.style.borderStyle="dashed";break;case b.AnnotationBorderStyleType.BEVELED:(0,b.warn)("Unimplemented border style: beveled");break;case b.AnnotationBorderStyleType.INSET:(0,b.warn)("Unimplemented border style: inset");break;case b.AnnotationBorderStyleType.UNDERLINE:T.style.borderBottomStyle="solid";break}const Tt=h.borderColor||null;Tt?T.style.borderColor=b.Util.makeHexColor(Tt[0]|0,Tt[1]|0,Tt[2]|0):T.style.borderWidth=0}T.style.left=`${100*(gt[0]-ot)/B}%`,T.style.top=`${100*(gt[1]-ut)/nt}%`;const{rotation:bt}=h;return h.hasOwnCanvas||bt===0?(T.style.width=`${100*K/B}%`,T.style.height=`${100*mt/nt}%`):this.setRotation(bt,T),T}setRotation(a,h=this.container){const{pageWidth:S,pageHeight:R}=this.viewport.rawDims,{width:T,height:B}=O(this.data.rect);let nt,ot;a%180===0?(nt=100*T/S,ot=100*B/R):(nt=100*B/S,ot=100*T/R),h.style.width=`${nt}%`,h.style.height=`${ot}%`,h.setAttribute("data-main-rotation",(360-a)%360)}get _commonActions(){const a=(h,S,R)=>{const T=R.detail[h];R.target.style[S]=G.ColorConverters[`${T[0]}_HTML`](T.slice(1))};return(0,b.shadow)(this,"_commonActions",{display:h=>{const S=h.detail.display%2===1;this.container.style.visibility=S?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:S,print:h.detail.display===0||h.detail.display===3})},print:h=>{this.annotationStorage.setValue(this.data.id,{print:h.detail.print})},hidden:h=>{this.container.style.visibility=h.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h.detail.hidden})},focus:h=>{setTimeout(()=>h.target.focus({preventScroll:!1}),0)},userName:h=>{h.target.title=h.detail.userName},readonly:h=>{h.detail.readonly?h.target.setAttribute("readonly",""):h.target.removeAttribute("readonly")},required:h=>{this._setRequired(h.target,h.detail.required)},bgColor:h=>{a("bgColor","backgroundColor",h)},fillColor:h=>{a("fillColor","backgroundColor",h)},fgColor:h=>{a("fgColor","color",h)},textColor:h=>{a("textColor","color",h)},borderColor:h=>{a("borderColor","borderColor",h)},strokeColor:h=>{a("strokeColor","borderColor",h)},rotation:h=>{const S=h.detail.rotation;this.setRotation(S),this.annotationStorage.setValue(this.data.id,{rotation:S})}})}_dispatchEventFromSandbox(a,h){const S=this._commonActions;for(const R of Object.keys(h.detail)){const T=a[R]||S[R];T==null||T(h)}}_setDefaultPropertiesFromJS(a){if(!this.enableScripting)return;const h=this.annotationStorage.getRawValue(this.data.id);if(!h)return;const S=this._commonActions;for(const[R,T]of Object.entries(h)){const B=S[R];if(B){const nt={detail:{[R]:T},target:a};B(nt),delete h[R]}}}_createQuadrilaterals(a=!1){if(!this.data.quadPoints)return null;const h=[],S=this.data.rect;for(const R of this.data.quadPoints)this.data.rect=[R[2].x,R[2].y,R[1].x,R[1].y],h.push(this._createContainer(a));return this.data.rect=S,h}_createPopup(a,h){let S=this.container;this.quadrilaterals&&(a=a||this.quadrilaterals,S=this.quadrilaterals[0]),a||(a=document.createElement("div"),a.className="popupTriggerArea",S.append(a));const T=new d({container:S,trigger:a,color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,hideWrapper:!0}).render();T.style.left="100%",S.append(T)}_renderQuadrilaterals(a){for(const h of this.quadrilaterals)h.className=a;return this.quadrilaterals}render(){(0,b.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(a,h=null){const S=[];if(this._fieldObjects){const R=this._fieldObjects[a];if(R)for(const{page:T,id:B,exportValues:nt}of R){if(T===-1||B===h)continue;const ot=typeof nt=="string"?nt:null,ut=document.querySelector(`[data-element-id="${B}"]`);if(ut&&!E.has(ut)){(0,b.warn)(`_getElementsByName - element not allowed: ${B}`);continue}S.push({id:B,exportValue:ot,domElement:ut})}return S}for(const R of document.getElementsByName(a)){const{exportValue:T}=R,B=R.getAttribute("data-element-id");B!==h&&E.has(R)&&S.push({id:B,exportValue:T,domElement:R})}return S}}class f extends _{constructor(h,S=null){super(h,{isRenderable:!0,ignoreBorder:!!(S!=null&&S.ignoreBorder),createQuadrilaterals:!0});st(this,r);st(this,x);this.isTooltipOnly=h.data.isTooltipOnly}render(){const{data:h,linkService:S}=this,R=document.createElement("a");R.setAttribute("data-element-id",h.id);let T=!1;return h.url?(S.addLinkAttributes(R,h.url,h.newWindow),T=!0):h.action?(this._bindNamedAction(R,h.action),T=!0):h.attachment?(this._bindAttachment(R,h.attachment),T=!0):h.setOCGState?(dt(this,x,Ye).call(this,R,h.setOCGState),T=!0):h.dest?(this._bindLink(R,h.dest),T=!0):(h.actions&&(h.actions.Action||h.actions["Mouse Up"]||h.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(R,h),T=!0),h.resetForm?(this._bindResetFormAction(R,h.resetForm),T=!0):this.isTooltipOnly&&!T&&(this._bindLink(R,""),T=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((B,nt)=>{const ot=nt===0?R:R.cloneNode();return B.append(ot),B}):(this.container.className="linkAnnotation",T&&this.container.append(R),this.container)}_bindLink(h,S){h.href=this.linkService.getDestinationHash(S),h.onclick=()=>(S&&this.linkService.goToDestination(S),!1),(S||S==="")&&dt(this,r,Xt).call(this)}_bindNamedAction(h,S){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>(this.linkService.executeNamedAction(S),!1),dt(this,r,Xt).call(this)}_bindAttachment(h,S){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>{var R;return(R=this.downloadManager)==null||R.openOrDownloadData(this.container,S.content,S.filename),!1},dt(this,r,Xt).call(this)}_bindJSAction(h,S){h.href=this.linkService.getAnchorUrl("");const R=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const T of Object.keys(S.actions)){const B=R.get(T);B&&(h[B]=()=>{var nt;return(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S.id,name:T}}),!1})}h.onclick||(h.onclick=()=>!1),dt(this,r,Xt).call(this)}_bindResetFormAction(h,S){const R=h.onclick;if(R||(h.href=this.linkService.getAnchorUrl("")),dt(this,r,Xt).call(this),!this._fieldObjects){(0,b.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),R||(h.onclick=()=>!1);return}h.onclick=()=>{var mt;R==null||R();const{fields:T,refs:B,include:nt}=S,ot=[];if(T.length!==0||B.length!==0){const gt=new Set(B);for(const bt of T){const At=this._fieldObjects[bt]||[];for(const{id:Et}of At)gt.add(Et)}for(const bt of Object.values(this._fieldObjects))for(const At of bt)gt.has(At.id)===nt&&ot.push(At)}else for(const gt of Object.values(this._fieldObjects))ot.push(...gt);const ut=this.annotationStorage,K=[];for(const gt of ot){const{id:bt}=gt;switch(K.push(bt),gt.type){case"text":{const Et=gt.defaultValue||"";ut.setValue(bt,{value:Et});break}case"checkbox":case"radiobutton":{const Et=gt.defaultValue===gt.exportValues;ut.setValue(bt,{value:Et});break}case"combobox":case"listbox":{const Et=gt.defaultValue||"";ut.setValue(bt,{value:Et});break}default:continue}const At=document.querySelector(`[data-element-id="${bt}"]`);if(At){if(!E.has(At)){(0,b.warn)(`_bindResetFormAction - element not allowed: ${bt}`);continue}}else continue;At.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((mt=this.linkService.eventBus)==null||mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:K,name:"ResetForm"}})),!1}}}r=new WeakSet,Xt=function(){this.container.setAttribute("data-internal-link","")},x=new WeakSet,Ye=function(h,S){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>(this.linkService.executeSetOCGState(S),!1),dt(this,r,Xt).call(this)};class u extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h})}render(){this.container.className="textAnnotation";const a=document.createElement("img");return a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",a.alt="[{{type}} Annotation]",a.dataset.l10nId="text_annotation_type",a.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(a,this.data),this.container.append(a),this.container}}class i extends _{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(a){const{isWin:h,isMac:S}=b.FeatureTest.platform;return h&&a.ctrlKey||S&&a.metaKey}_setEventListener(a,h,S,R){h.includes("mouse")?a.addEventListener(h,T=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:R(T),shift:T.shiftKey,modifier:this._getKeyModifier(T)}})}):a.addEventListener(h,T=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:R(T)}})})}_setEventListeners(a,h,S){var R;for(const[T,B]of h)(B==="Action"||(R=this.data.actions)!=null&&R[B])&&this._setEventListener(a,T,B,S)}_setBackgroundColor(a){const h=this.data.backgroundColor||null;a.style.backgroundColor=h===null?"transparent":b.Util.makeHexColor(h[0],h[1],h[2])}_setTextStyle(a){const h=["left","center","right"],{fontColor:S}=this.data.defaultAppearanceData,R=this.data.defaultAppearanceData.fontSize||y,T=a.style;let B;const nt=2,ot=ut=>Math.round(10*ut)/10;if(this.data.multiLine){const ut=Math.abs(this.data.rect[3]-this.data.rect[1]-nt),K=Math.round(ut/(b.LINE_FACTOR*R))||1,mt=ut/K;B=Math.min(R,ot(mt/b.LINE_FACTOR))}else{const ut=Math.abs(this.data.rect[3]-this.data.rect[1]-nt);B=Math.min(R,ot(ut/b.LINE_FACTOR))}T.fontSize=`calc(${B}px * var(--scale-factor))`,T.color=b.Util.makeHexColor(S[0],S[1],S[2]),this.data.textAlignment!==null&&(T.textAlign=h[this.data.textAlignment])}_setRequired(a,h){h?a.setAttribute("required",!0):a.removeAttribute("required"),a.setAttribute("aria-required",h)}}class l extends i{constructor(a){const h=a.renderForms||!a.data.hasAppearance&&!!a.data.fieldValue;super(a,{isRenderable:h})}setPropertyOnSiblings(a,h,S,R){const T=this.annotationStorage;for(const B of this._getElementsByName(a.name,a.id))B.domElement&&(B.domElement[h]=S),T.setValue(B.id,{[R]:S})}render(){var R;const a=this.annotationStorage,h=this.data.id;this.container.className="textWidgetAnnotation";let S=null;if(this.renderForms){const T=a.getValue(h,{value:this.data.fieldValue});let B=T.formattedValue||T.value||"";const nt=a.getValue(h,{charLimit:this.data.maxLen}).charLimit;nt&&B.length>nt&&(B=B.slice(0,nt));const ot={userValue:B,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(S=document.createElement("textarea"),S.textContent=B,this.data.doNotScroll&&(S.style.overflowY="hidden")):(S=document.createElement("input"),S.type="text",S.setAttribute("value",B),this.data.doNotScroll&&(S.style.overflowX="hidden")),E.add(S),S.setAttribute("data-element-id",h),S.disabled=this.data.readOnly,S.name=this.data.fieldName,S.tabIndex=j,this._setRequired(S,this.data.required),nt&&(S.maxLength=nt),S.addEventListener("input",K=>{a.setValue(h,{value:K.target.value}),this.setPropertyOnSiblings(S,"value",K.target.value,"value")}),S.addEventListener("resetform",K=>{const mt=this.data.defaultFieldValue??"";S.value=ot.userValue=mt,ot.formattedValue=null});let ut=K=>{const{formattedValue:mt}=ot;mt!=null&&(K.target.value=mt),K.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){S.addEventListener("focus",mt=>{const{target:gt}=mt;ot.userValue&&(gt.value=ot.userValue),ot.lastCommittedValue=gt.value,ot.commitKey=1}),S.addEventListener("updatefromsandbox",mt=>{const gt={value(bt){ot.userValue=bt.detail.value??"",a.setValue(h,{value:ot.userValue.toString()}),bt.target.value=ot.userValue},formattedValue(bt){const{formattedValue:At}=bt.detail;ot.formattedValue=At,At!=null&&bt.target!==document.activeElement&&(bt.target.value=At),a.setValue(h,{formattedValue:At})},selRange(bt){bt.target.setSelectionRange(...bt.detail.selRange)},charLimit:bt=>{var St;const{charLimit:At}=bt.detail,{target:Et}=bt;if(At===0){Et.removeAttribute("maxLength");return}Et.setAttribute("maxLength",At);let Tt=ot.userValue;!Tt||Tt.length<=At||(Tt=Tt.slice(0,At),Et.value=ot.userValue=Tt,a.setValue(h,{value:Tt}),(St=this.linkService.eventBus)==null||St.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:Tt,willCommit:!0,commitKey:1,selStart:Et.selectionStart,selEnd:Et.selectionEnd}}))}};this._dispatchEventFromSandbox(gt,mt)}),S.addEventListener("keydown",mt=>{var At;ot.commitKey=1;let gt=-1;if(mt.key==="Escape"?gt=0:mt.key==="Enter"&&!this.data.multiLine?gt=2:mt.key==="Tab"&&(ot.commitKey=3),gt===-1)return;const{value:bt}=mt.target;ot.lastCommittedValue!==bt&&(ot.lastCommittedValue=bt,ot.userValue=bt,(At=this.linkService.eventBus)==null||At.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:bt,willCommit:!0,commitKey:gt,selStart:mt.target.selectionStart,selEnd:mt.target.selectionEnd}}))});const K=ut;ut=null,S.addEventListener("blur",mt=>{var bt;if(!mt.relatedTarget)return;const{value:gt}=mt.target;ot.userValue=gt,ot.lastCommittedValue!==gt&&((bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:gt,willCommit:!0,commitKey:ot.commitKey,selStart:mt.target.selectionStart,selEnd:mt.target.selectionEnd}})),K(mt)}),(R=this.data.actions)!=null&&R.Keystroke&&S.addEventListener("beforeinput",mt=>{var D;ot.lastCommittedValue=null;const{data:gt,target:bt}=mt,{value:At,selectionStart:Et,selectionEnd:Tt}=bt;let St=Et,F=Tt;switch(mt.inputType){case"deleteWordBackward":{const L=At.substring(0,Et).match(/\w*[^\w]*$/);L&&(St-=L[0].length);break}case"deleteWordForward":{const L=At.substring(Et).match(/^[^\w]*\w*/);L&&(F+=L[0].length);break}case"deleteContentBackward":Et===Tt&&(St-=1);break;case"deleteContentForward":Et===Tt&&(F+=1);break}mt.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:At,change:gt||"",willCommit:!1,selStart:St,selEnd:F}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],mt=>mt.target.value)}if(ut&&S.addEventListener("blur",ut),this.data.comb){const mt=(this.data.rect[2]-this.data.rect[0])/nt;S.classList.add("comb"),S.style.letterSpacing=`calc(${mt}px * var(--scale-factor) - 1ch)`}}else S=document.createElement("div"),S.textContent=this.data.fieldValue,S.style.verticalAlign="middle",S.style.display="table-cell";return this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class c extends i{constructor(a){super(a,{isRenderable:a.renderForms})}render(){const a=this.annotationStorage,h=this.data,S=h.id;let R=a.getValue(S,{value:h.exportValue===h.fieldValue}).value;typeof R=="string"&&(R=R!=="Off",a.setValue(S,{value:R})),this.container.className="buttonWidgetAnnotation checkBox";const T=document.createElement("input");return E.add(T),T.setAttribute("data-element-id",S),T.disabled=h.readOnly,this._setRequired(T,this.data.required),T.type="checkbox",T.name=h.fieldName,R&&T.setAttribute("checked",!0),T.setAttribute("exportValue",h.exportValue),T.tabIndex=j,T.addEventListener("change",B=>{const{name:nt,checked:ot}=B.target;for(const ut of this._getElementsByName(nt,S)){const K=ot&&ut.exportValue===h.exportValue;ut.domElement&&(ut.domElement.checked=K),a.setValue(ut.id,{value:K})}a.setValue(S,{value:ot})}),T.addEventListener("resetform",B=>{const nt=h.defaultFieldValue||"Off";B.target.checked=nt===h.exportValue}),this.enableScripting&&this.hasJSActions&&(T.addEventListener("updatefromsandbox",B=>{const nt={value(ot){ot.target.checked=ot.detail.value!=="Off",a.setValue(S,{value:ot.target.checked})}};this._dispatchEventFromSandbox(nt,B)}),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.checked)),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class n extends i{constructor(a){super(a,{isRenderable:a.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const a=this.annotationStorage,h=this.data,S=h.id;let R=a.getValue(S,{value:h.fieldValue===h.buttonValue}).value;typeof R=="string"&&(R=R!==h.buttonValue,a.setValue(S,{value:R}));const T=document.createElement("input");if(E.add(T),T.setAttribute("data-element-id",S),T.disabled=h.readOnly,this._setRequired(T,this.data.required),T.type="radio",T.name=h.fieldName,R&&T.setAttribute("checked",!0),T.tabIndex=j,T.addEventListener("change",B=>{const{name:nt,checked:ot}=B.target;for(const ut of this._getElementsByName(nt,S))a.setValue(ut.id,{value:!1});a.setValue(S,{value:ot})}),T.addEventListener("resetform",B=>{const nt=h.defaultFieldValue;B.target.checked=nt!=null&&nt===h.buttonValue}),this.enableScripting&&this.hasJSActions){const B=h.buttonValue;T.addEventListener("updatefromsandbox",nt=>{const ot={value:ut=>{const K=B===ut.detail.value;for(const mt of this._getElementsByName(ut.target.name)){const gt=K&&mt.id===S;mt.domElement&&(mt.domElement.checked=gt),a.setValue(mt.id,{value:gt})}}};this._dispatchEventFromSandbox(ot,nt)}),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.checked)}return this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class s extends f{constructor(a){super(a,{ignoreBorder:a.data.hasAppearance})}render(){const a=super.render();a.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(a.title=this.data.alternativeText);const h=a.lastChild;return this.enableScripting&&this.hasJSActions&&h&&(this._setDefaultPropertiesFromJS(h),h.addEventListener("updatefromsandbox",S=>{this._dispatchEventFromSandbox({},S)})),a}}class t extends i{constructor(a){super(a,{isRenderable:a.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const a=this.annotationStorage,h=this.data.id,S=a.getValue(h,{value:this.data.fieldValue}),R=document.createElement("select");E.add(R),R.setAttribute("data-element-id",h),R.disabled=this.data.readOnly,this._setRequired(R,this.data.required),R.name=this.data.fieldName,R.tabIndex=j;let T=this.data.combo&&this.data.options.length>0;this.data.combo||(R.size=this.data.options.length,this.data.multiSelect&&(R.multiple=!0)),R.addEventListener("resetform",K=>{const mt=this.data.defaultFieldValue;for(const gt of R.options)gt.selected=gt.value===mt});for(const K of this.data.options){const mt=document.createElement("option");mt.textContent=K.displayValue,mt.value=K.exportValue,S.value.includes(K.exportValue)&&(mt.setAttribute("selected",!0),T=!1),R.append(mt)}let B=null;if(T){const K=document.createElement("option");K.value=" ",K.setAttribute("hidden",!0),K.setAttribute("selected",!0),R.prepend(K),B=()=>{K.remove(),R.removeEventListener("input",B),B=null},R.addEventListener("input",B)}const nt=K=>{const mt=K?"value":"textContent",{options:gt,multiple:bt}=R;return bt?Array.prototype.filter.call(gt,At=>At.selected).map(At=>At[mt]):gt.selectedIndex===-1?null:gt[gt.selectedIndex][mt]};let ot=nt(!1);const ut=K=>{const mt=K.target.options;return Array.prototype.map.call(mt,gt=>({displayValue:gt.textContent,exportValue:gt.value}))};return this.enableScripting&&this.hasJSActions?(R.addEventListener("updatefromsandbox",K=>{const mt={value(gt){B==null||B();const bt=gt.detail.value,At=new Set(Array.isArray(bt)?bt:[bt]);for(const Et of R.options)Et.selected=At.has(Et.value);a.setValue(h,{value:nt(!0)}),ot=nt(!1)},multipleSelection(gt){R.multiple=!0},remove(gt){const bt=R.options,At=gt.detail.remove;bt[At].selected=!1,R.remove(At),bt.length>0&&Array.prototype.findIndex.call(bt,Tt=>Tt.selected)===-1&&(bt[0].selected=!0),a.setValue(h,{value:nt(!0),items:ut(gt)}),ot=nt(!1)},clear(gt){for(;R.length!==0;)R.remove(0);a.setValue(h,{value:null,items:[]}),ot=nt(!1)},insert(gt){const{index:bt,displayValue:At,exportValue:Et}=gt.detail.insert,Tt=R.children[bt],St=document.createElement("option");St.textContent=At,St.value=Et,Tt?Tt.before(St):R.append(St),a.setValue(h,{value:nt(!0),items:ut(gt)}),ot=nt(!1)},items(gt){const{items:bt}=gt.detail;for(;R.length!==0;)R.remove(0);for(const At of bt){const{displayValue:Et,exportValue:Tt}=At,St=document.createElement("option");St.textContent=Et,St.value=Tt,R.append(St)}R.options.length>0&&(R.options[0].selected=!0),a.setValue(h,{value:nt(!0),items:ut(gt)}),ot=nt(!1)},indices(gt){const bt=new Set(gt.detail.indices);for(const At of gt.target.options)At.selected=bt.has(At.index);a.setValue(h,{value:nt(!0)}),ot=nt(!1)},editable(gt){gt.target.disabled=!gt.detail.editable}};this._dispatchEventFromSandbox(mt,K)}),R.addEventListener("input",K=>{var gt;const mt=nt(!0);a.setValue(h,{value:mt}),K.preventDefault(),(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:ot,changeEx:mt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(R,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],K=>K.target.value)):R.addEventListener("input",function(K){a.setValue(h,{value:nt(!0)})}),this.data.combo&&this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}const I=class extends _{constructor(a){var R,T,B;const{data:h}=a,S=!I.IGNORE_TYPES.has(h.parentType)&&!!((R=h.titleObj)!=null&&R.str||(T=h.contentsObj)!=null&&T.str||(B=h.richText)!=null&&B.str);super(a,{isRenderable:S})}render(){this.container.className="popupAnnotation";const a=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(a.length===0)return this.container;const h=new d({container:this.container,trigger:Array.from(a),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),S=this.page,R=b.Util.normalizeRect([this.data.parentRect[0],S.view[3]-this.data.parentRect[1]+S.view[1],this.data.parentRect[2],S.view[3]-this.data.parentRect[3]+S.view[1]]),T=R[0]+this.data.parentRect[2]-this.data.parentRect[0],B=R[1],{pageWidth:nt,pageHeight:ot,pageX:ut,pageY:K}=this.viewport.rawDims;return this.container.style.left=`${100*(T-ut)/nt}%`,this.container.style.top=`${100*(B-K)/ot}%`,this.container.append(h.render()),this.container}};let e=I;Ot(e,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class d{constructor(a){this.container=a.container,this.trigger=a.trigger,this.color=a.color,this.titleObj=a.titleObj,this.modificationDate=a.modificationDate,this.contentsObj=a.contentsObj,this.richText=a.richText,this.hideWrapper=a.hideWrapper||!1,this.pinned=!1}render(){var nt,ot;const h=document.createElement("div");h.className="popupWrapper",this.hideElement=this.hideWrapper?h:this.container,this.hideElement.hidden=!0;const S=document.createElement("div");S.className="popup";const R=this.color;if(R){const ut=.7*(255-R[0])+R[0],K=.7*(255-R[1])+R[1],mt=.7*(255-R[2])+R[2];S.style.backgroundColor=b.Util.makeHexColor(ut|0,K|0,mt|0)}const T=document.createElement("h1");T.dir=this.titleObj.dir,T.textContent=this.titleObj.str,S.append(T);const B=w.PDFDateString.toDateObject(this.modificationDate);if(B){const ut=document.createElement("span");ut.className="popupDate",ut.textContent="{{date}}, {{time}}",ut.dataset.l10nId="annotation_date_string",ut.dataset.l10nArgs=JSON.stringify({date:B.toLocaleDateString(),time:B.toLocaleTimeString()}),S.append(ut)}if((nt=this.richText)!=null&&nt.str&&(!((ot=this.contentsObj)!=null&&ot.str)||this.contentsObj.str===this.richText.str))Q.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:S}),S.lastChild.className="richText popupContent";else{const ut=this._formatContents(this.contentsObj);S.append(ut)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ut of this.trigger)ut.addEventListener("click",this._toggle.bind(this)),ut.addEventListener("mouseover",this._show.bind(this,!1)),ut.addEventListener("mouseout",this._hide.bind(this,!1));return S.addEventListener("click",this._hide.bind(this,!0)),h.append(S),h}_formatContents({str:a,dir:h}){const S=document.createElement("p");S.className="popupContent",S.dir=h;const R=a.split(/(?:\r\n?|\n)/);for(let T=0,B=R.length;T<B;++T){const nt=R[T];S.append(document.createTextNode(nt)),T<B-1&&S.append(document.createElement("br"))}return S}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(a=!1){a&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(a=!0){a&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class v extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0}),this.textContent=a.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const a=document.createElement("div");a.className="annotationTextContent",a.setAttribute("role","comment");for(const h of this.textContent){const S=document.createElement("span");S.textContent=h,a.append(S)}this.container.append(a)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const a=this.data,{width:h,height:S}=O(a.rect),R=this.svgFactory.create(h,S,!0),T=this.svgFactory.createElement("svg:line");return T.setAttribute("x1",a.rect[2]-a.lineCoordinates[0]),T.setAttribute("y1",a.rect[3]-a.lineCoordinates[1]),T.setAttribute("x2",a.rect[2]-a.lineCoordinates[2]),T.setAttribute("y2",a.rect[3]-a.lineCoordinates[3]),T.setAttribute("stroke-width",a.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),R.append(T),this.container.append(R),this._createPopup(T,a),this.container}}class N extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const a=this.data,{width:h,height:S}=O(a.rect),R=this.svgFactory.create(h,S,!0),T=a.borderStyle.width,B=this.svgFactory.createElement("svg:rect");return B.setAttribute("x",T/2),B.setAttribute("y",T/2),B.setAttribute("width",h-T),B.setAttribute("height",S-T),B.setAttribute("stroke-width",T||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),this._createPopup(B,a),this.container}}class p extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const a=this.data,{width:h,height:S}=O(a.rect),R=this.svgFactory.create(h,S,!0),T=a.borderStyle.width,B=this.svgFactory.createElement("svg:ellipse");return B.setAttribute("cx",h/2),B.setAttribute("cy",S/2),B.setAttribute("rx",h/2-T/2),B.setAttribute("ry",S/2-T/2),B.setAttribute("stroke-width",T||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),this._createPopup(B,a),this.container}}class q extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const a=this.data,{width:h,height:S}=O(a.rect),R=this.svgFactory.create(h,S,!0);let T=[];for(const nt of a.vertices){const ot=nt.x-a.rect[0],ut=a.rect[3]-nt.y;T.push(ot+","+ut)}T=T.join(" ");const B=this.svgFactory.createElement(this.svgElementName);return B.setAttribute("points",T),B.setAttribute("stroke-width",a.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),this._createPopup(B,a),this.container}}class lt extends q{constructor(a){super(a),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class tt extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class at extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const a=this.data,{width:h,height:S}=O(a.rect),R=this.svgFactory.create(h,S,!0);for(const T of a.inkLists){let B=[];for(const ot of T){const ut=ot.x-a.rect[0],K=a.rect[3]-ot.y;B.push(`${ut},${K}`)}B=B.join(" ");const nt=this.svgFactory.createElement(this.svgElementName);nt.setAttribute("points",B),nt.setAttribute("stroke-width",a.borderStyle.width||1),nt.setAttribute("stroke","transparent"),nt.setAttribute("fill","transparent"),this._createPopup(nt,a),R.append(nt)}return this.container.append(R),this.container}}class X extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class W extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class H extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class rt extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ht extends _{constructor(a){var S,R,T;const h=!!(a.data.hasPopup||(S=a.data.titleObj)!=null&&S.str||(R=a.data.contentsObj)!=null&&R.str||(T=a.data.richText)!=null&&T.str);super(a,{isRenderable:h,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends _{constructor(a){var R;super(a,{isRenderable:!0});const{filename:h,content:S}=this.data.file;this.filename=(0,w.getFilenameFromUrl)(h,!0),this.content=S,(R=this.linkService.eventBus)==null||R.dispatch("fileattachmentannotation",{source:this,filename:h,content:S})}render(){var h,S;this.container.className="fileAttachmentAnnotation";let a;return this.data.hasAppearance?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),a.className="popupTriggerArea",a.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((h=this.data.titleObj)!=null&&h.str||(S=this.data.contentsObj)!=null&&S.str||this.data.richText)&&this._createPopup(a,this.data),this.container.append(a),this.container}_download(){var a;(a=this.downloadManager)==null||a.openOrDownloadData(this.container,this.content,this.filename)}}const et=class{static render(a){var ot,ut;const{annotations:h,div:S,viewport:R,accessibilityManager:T}=a;(0,w.setLayerDimensions)(S,R);const B={data:null,layer:S,page:a.page,viewport:R,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||"",renderForms:a.renderForms!==!1,svgFactory:new w.DOMSVGFactory,annotationStorage:a.annotationStorage||new V.AnnotationStorage,enableScripting:a.enableScripting===!0,hasJSActions:a.hasJSActions,fieldObjects:a.fieldObjects};let nt=0;for(const K of h){if(K.annotationType!==b.AnnotationType.POPUP){const{width:bt,height:At}=O(K.rect);if(bt<=0||At<=0)continue}B.data=K;const mt=C.create(B);if(!mt.isRenderable)continue;const gt=mt.render();if(K.hidden&&(gt.style.visibility="hidden"),Array.isArray(gt))for(const bt of gt)bt.style.zIndex=nt++,dt(ot=et,U,Ce).call(ot,bt,K.id,S,T);else gt.style.zIndex=nt++,mt instanceof e?S.prepend(gt):dt(ut=et,U,Ce).call(ut,gt,K.id,S,T)}dt(this,it,Te).call(this,S,a.annotationCanvasMap)}static update(a){const{annotationCanvasMap:h,div:S,viewport:R}=a;(0,w.setLayerDimensions)(S,{rotation:R.rotation}),dt(this,it,Te).call(this,S,h),S.hidden=!1}};let o=et;U=new WeakSet,Ce=function(a,h,S,R){const T=a.firstChild||a;T.id=`${w.AnnotationPrefix}${h}`,S.append(a),R==null||R.moveElementInDOM(S,a,T,!1)},it=new WeakSet,Te=function(a,h){if(h){for(const[S,R]of h){const T=a.querySelector(`[data-annotation-id="${S}"]`);if(!T)continue;const{firstChild:B}=T;B?B.nodeName==="CANVAS"?B.replaceWith(R):B.before(R):T.append(R)}h.clear()}},st(o,U),st(o,it),m.AnnotationLayer=o},(ct,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.ColorConverters=void 0;function Z(w){return Math.floor(Math.max(0,Math.min(1,w))*255).toString(16).padStart(2,"0")}class b{static CMYK_G([V,G,Q,j]){return["G",1-Math.min(1,.3*V+.59*Q+.11*G+j)]}static G_CMYK([V]){return["CMYK",0,0,0,1-V]}static G_RGB([V]){return["RGB",V,V,V]}static G_HTML([V]){const G=Z(V);return`#${G}${G}${G}`}static RGB_G([V,G,Q]){return["G",.3*V+.59*G+.11*Q]}static RGB_HTML([V,G,Q]){const j=Z(V),y=Z(G),E=Z(Q);return`#${j}${y}${E}`}static T_HTML(){return"#00000000"}static CMYK_RGB([V,G,Q,j]){return["RGB",1-Math.min(1,V+j),1-Math.min(1,Q+j),1-Math.min(1,G+j)]}static CMYK_HTML(V){const G=this.CMYK_RGB(V).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([V,G,Q]){const j=1-V,y=1-G,E=1-Q,O=Math.min(j,y,E);return["CMYK",j,y,E,O]}}m.ColorConverters=b},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaLayer=void 0;var b=Z(19);class w{static setupStorage(G,Q,j,y,E){const O=y.getValue(Q,{value:null});switch(j.name){case"textarea":if(O.value!==null&&(G.textContent=O.value),E==="print")break;G.addEventListener("input",C=>{y.setValue(Q,{value:C.target.value})});break;case"input":if(j.attributes.type==="radio"||j.attributes.type==="checkbox"){if(O.value===j.attributes.xfaOn?G.setAttribute("checked",!0):O.value===j.attributes.xfaOff&&G.removeAttribute("checked"),E==="print")break;G.addEventListener("change",C=>{y.setValue(Q,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(O.value!==null&&G.setAttribute("value",O.value),E==="print")break;G.addEventListener("input",C=>{y.setValue(Q,{value:C.target.value})})}break;case"select":if(O.value!==null)for(const C of j.children)C.attributes.value===O.value&&(C.attributes.selected=!0);G.addEventListener("input",C=>{const _=C.target.options,f=_.selectedIndex===-1?"":_[_.selectedIndex].value;y.setValue(Q,{value:f})});break}}static setAttributes({html:G,element:Q,storage:j=null,intent:y,linkService:E}){const{attributes:O}=Q,C=G instanceof HTMLAnchorElement;O.type==="radio"&&(O.name=`${O.name}-${y}`);for(const[_,f]of Object.entries(O))if(f!=null)switch(_){case"class":f.length&&G.setAttribute(_,f.join(" "));break;case"dataId":break;case"id":G.setAttribute("data-element-id",f);break;case"style":Object.assign(G.style,f);break;case"textContent":G.textContent=f;break;default:(!C||_!=="href"&&_!=="newWindow")&&G.setAttribute(_,f)}C&&E.addLinkAttributes(G,O.href,O.newWindow),j&&O.dataId&&this.setupStorage(G,O.dataId,Q,j)}static render(G){var u;const Q=G.annotationStorage,j=G.linkService,y=G.xfaHtml,E=G.intent||"display",O=document.createElement(y.name);y.attributes&&this.setAttributes({html:O,element:y,intent:E,linkService:j});const C=[[y,-1,O]],_=G.div;if(_.append(O),G.viewport){const i=`matrix(${G.viewport.transform.join(",")})`;_.style.transform=i}E!=="richText"&&_.setAttribute("class","xfaLayer xfaFont");const f=[];for(;C.length>0;){const[i,l,c]=C.at(-1);if(l+1===i.children.length){C.pop();continue}const n=i.children[++C.at(-1)[1]];if(n===null)continue;const{name:s}=n;if(s==="#text"){const e=document.createTextNode(n.value);f.push(e),c.append(e);continue}let t;if((u=n==null?void 0:n.attributes)!=null&&u.xmlns?t=document.createElementNS(n.attributes.xmlns,s):t=document.createElement(s),c.append(t),n.attributes&&this.setAttributes({html:t,element:n,storage:Q,intent:E,linkService:j}),n.children&&n.children.length>0)C.push([n,-1,t]);else if(n.value){const e=document.createTextNode(n.value);b.XfaText.shouldBuildText(s)&&f.push(e),t.append(e)}}for(const i of _.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))i.setAttribute("readOnly",!0);return{textDivs:f}}static update(G){const Q=`matrix(${G.viewport.transform.join(",")})`;G.div.style.transform=Q,G.div.hidden=!1}}m.XfaLayer=w},(ct,m,Z)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.SVGGraphics=void 0;var b=Z(6),w=Z(1),V=Z(10);let G=class{constructor(){(0,w.unreachable)("Not implemented: SVGGraphics")}};m.SVGGraphics=G;{let u=function(t){let e=[];const d=[];for(const v of t){if(v.fn==="save"){e.push({fnId:92,fn:"group",items:[]}),d.push(e),e=e.at(-1).items;continue}v.fn==="restore"?e=d.pop():e.push(v)}return e},i=function(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let d=e.length-1;if(e[d]!=="0")return e;do d--;while(e[d]==="0");return e.substring(0,e[d]==="."?d:d+1)},l=function(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":`scale(${i(t[0])} ${i(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const e=Math.acos(t[0])*180/Math.PI;return`rotate(${i(e)})`}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return`translate(${i(t[4])} ${i(t[5])})`;return`matrix(${i(t[0])} ${i(t[1])} ${i(t[2])} ${i(t[3])} ${i(t[4])} ${i(t[5])})`};const Q={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},j="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",E=["butt","round","square"],O=["miter","round","bevel"],C=function(t,e="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([t],{type:e}));const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let P=`data:${e};base64,`;for(let N=0,p=t.length;N<p;N+=3){const q=t[N]&255,lt=t[N+1]&255,tt=t[N+2]&255,at=q>>2,X=(q&3)<<4|lt>>4,W=N+1<p?(lt&15)<<2|tt>>6:64,H=N+2<p?tt&63:64;P+=v[at]+v[X]+v[W]+v[H]}return P},_=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=12,d=new Int32Array(256);for(let tt=0;tt<256;tt++){let at=tt;for(let X=0;X<8;X++)at&1?at=3988292384^at>>1&2147483647:at=at>>1&2147483647;d[tt]=at}function v(tt,at,X){let W=-1;for(let H=at;H<X;H++){const rt=(W^tt[H])&255,ht=d[rt];W=W>>>8^ht}return W^-1}function P(tt,at,X,W){let H=W;const rt=at.length;X[H]=rt>>24&255,X[H+1]=rt>>16&255,X[H+2]=rt>>8&255,X[H+3]=rt&255,H+=4,X[H]=tt.charCodeAt(0)&255,X[H+1]=tt.charCodeAt(1)&255,X[H+2]=tt.charCodeAt(2)&255,X[H+3]=tt.charCodeAt(3)&255,H+=4,X.set(at,H),H+=at.length;const ht=v(X,W+4,H);X[H]=ht>>24&255,X[H+1]=ht>>16&255,X[H+2]=ht>>8&255,X[H+3]=ht&255}function N(tt,at,X){let W=1,H=0;for(let rt=at;rt<X;++rt)W=(W+(tt[rt]&255))%65521,H=(H+W)%65521;return H<<16|W}function p(tt){if(!V.isNodeJS)return q(tt);try{let at;parseInt(process.versions.node)>=8?at=tt:at=Buffer.from(tt);const X=require$$5.deflateSync(at,{level:9});return X instanceof Uint8Array?X:new Uint8Array(X)}catch(at){(0,w.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+at)}return q(tt)}function q(tt){let at=tt.length;const X=65535,W=Math.ceil(at/X),H=new Uint8Array(2+at+W*5+4);let rt=0;H[rt++]=120,H[rt++]=156;let ht=0;for(;at>X;)H[rt++]=0,H[rt++]=255,H[rt++]=255,H[rt++]=0,H[rt++]=0,H.set(tt.subarray(ht,ht+X),rt),rt+=X,ht+=X,at-=X;H[rt++]=1,H[rt++]=at&255,H[rt++]=at>>8&255,H[rt++]=~at&65535&255,H[rt++]=(~at&65535)>>8&255,H.set(tt.subarray(ht),rt),rt+=tt.length-ht;const k=N(tt,0,tt.length);return H[rt++]=k>>24&255,H[rt++]=k>>16&255,H[rt++]=k>>8&255,H[rt++]=k&255,H}function lt(tt,at,X,W){const H=tt.width,rt=tt.height;let ht,k,o;const r=tt.data;switch(at){case w.ImageKind.GRAYSCALE_1BPP:k=0,ht=1,o=H+7>>3;break;case w.ImageKind.RGB_24BPP:k=2,ht=8,o=H*3;break;case w.ImageKind.RGBA_32BPP:k=6,ht=8,o=H*4;break;default:throw new Error("invalid format")}const A=new Uint8Array((1+o)*rt);let x=0,M=0;for(let et=0;et<rt;++et)A[x++]=0,A.set(r.subarray(M,M+o),x),M+=o,x+=o;if(at===w.ImageKind.GRAYSCALE_1BPP&&W){x=0;for(let et=0;et<rt;et++){x++;for(let Y=0;Y<o;Y++)A[x++]^=255}}const I=new Uint8Array([H>>24&255,H>>16&255,H>>8&255,H&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255,ht,k,0,0,0]),U=p(A),z=t.length+e*3+I.length+U.length,it=new Uint8Array(z);let J=0;return it.set(t,J),J+=t.length,P("IHDR",I,it,J),J+=e+I.length,P("IDATA",U,it,J),J+=e+U.length,P("IEND",new Uint8Array(0),it,J),C(it,"image/png",X)}return function(at,X,W){const H=at.kind===void 0?w.ImageKind.GRAYSCALE_1BPP:at.kind;return lt(at,H,X,W)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=Q.fontWeight,this.fontSize=0,this.textMatrix=w.IDENTITY_MATRIX,this.fontMatrix=w.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=w.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Q.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,d){this.x=e,this.y=d}}let c=0,n=0,s=0;m.SVGGraphics=G=class{constructor(t,e,d=!1){(0,b.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new b.DOMSVGFactory,this.current=new f,this.transformMatrix=w.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[];for(const v in w.OPS)this._operatorIdMapping[w.OPS[v]]=v}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,d=t.argsArray;for(let v=0,P=e.length;v<P;v++)if(e[v]===w.OPS.dependency)for(const N of d[v]){const p=N.startsWith("g_")?this.commonObjs:this.objs,q=new Promise(lt=>{p.get(N,lt)});this.current.dependencies.push(q)}return Promise.all(this.current.dependencies)}transform(t,e,d,v,P,N){const p=[t,e,d,v,P,N];this.transformMatrix=w.Util.transform(this.transformMatrix,p),this.tgrp=null}getSVG(t,e){this.viewport=e;const d=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=w.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),d))}convertOpList(t){const e=this._operatorIdMapping,d=t.argsArray,v=t.fnArray,P=[];for(let N=0,p=v.length;N<p;N++){const q=v[N];P.push({fnId:q,fn:e[q],args:d[N]})}return u(P)}executeOpTree(t){for(const e of t){const d=e.fn,v=e.fnId,P=e.args;switch(v|0){case w.OPS.beginText:this.beginText();break;case w.OPS.dependency:break;case w.OPS.setLeading:this.setLeading(P);break;case w.OPS.setLeadingMoveText:this.setLeadingMoveText(P[0],P[1]);break;case w.OPS.setFont:this.setFont(P);break;case w.OPS.showText:this.showText(P[0]);break;case w.OPS.showSpacedText:this.showText(P[0]);break;case w.OPS.endText:this.endText();break;case w.OPS.moveText:this.moveText(P[0],P[1]);break;case w.OPS.setCharSpacing:this.setCharSpacing(P[0]);break;case w.OPS.setWordSpacing:this.setWordSpacing(P[0]);break;case w.OPS.setHScale:this.setHScale(P[0]);break;case w.OPS.setTextMatrix:this.setTextMatrix(P[0],P[1],P[2],P[3],P[4],P[5]);break;case w.OPS.setTextRise:this.setTextRise(P[0]);break;case w.OPS.setTextRenderingMode:this.setTextRenderingMode(P[0]);break;case w.OPS.setLineWidth:this.setLineWidth(P[0]);break;case w.OPS.setLineJoin:this.setLineJoin(P[0]);break;case w.OPS.setLineCap:this.setLineCap(P[0]);break;case w.OPS.setMiterLimit:this.setMiterLimit(P[0]);break;case w.OPS.setFillRGBColor:this.setFillRGBColor(P[0],P[1],P[2]);break;case w.OPS.setStrokeRGBColor:this.setStrokeRGBColor(P[0],P[1],P[2]);break;case w.OPS.setStrokeColorN:this.setStrokeColorN(P);break;case w.OPS.setFillColorN:this.setFillColorN(P);break;case w.OPS.shadingFill:this.shadingFill(P[0]);break;case w.OPS.setDash:this.setDash(P[0],P[1]);break;case w.OPS.setRenderingIntent:this.setRenderingIntent(P[0]);break;case w.OPS.setFlatness:this.setFlatness(P[0]);break;case w.OPS.setGState:this.setGState(P[0]);break;case w.OPS.fill:this.fill();break;case w.OPS.eoFill:this.eoFill();break;case w.OPS.stroke:this.stroke();break;case w.OPS.fillStroke:this.fillStroke();break;case w.OPS.eoFillStroke:this.eoFillStroke();break;case w.OPS.clip:this.clip("nonzero");break;case w.OPS.eoClip:this.clip("evenodd");break;case w.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case w.OPS.paintImageXObject:this.paintImageXObject(P[0]);break;case w.OPS.paintInlineImageXObject:this.paintInlineImageXObject(P[0]);break;case w.OPS.paintImageMaskXObject:this.paintImageMaskXObject(P[0]);break;case w.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(P[0],P[1]);break;case w.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case w.OPS.closePath:this.closePath();break;case w.OPS.closeStroke:this.closeStroke();break;case w.OPS.closeFillStroke:this.closeFillStroke();break;case w.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case w.OPS.nextLine:this.nextLine();break;case w.OPS.transform:this.transform(P[0],P[1],P[2],P[3],P[4],P[5]);break;case w.OPS.constructPath:this.constructPath(P[0],P[1]);break;case w.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,w.warn)(`Unimplemented operator ${d}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,d,v,P,N){const p=this.current;p.textMatrix=p.lineMatrix=[t,e,d,v,P,N],p.textMatrixScale=Math.hypot(t,e),p.x=p.lineX=0,p.y=p.lineY=0,p.xcoords=[],p.ycoords=[],p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${i(p.fontSize)}px`),p.tspan.setAttributeNS(null,"y",i(-p.y)),p.txtElement=this.svgFactory.createElement("svg:text"),p.txtElement.append(p.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=w.IDENTITY_MATRIX,t.lineMatrix=w.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const d=this.current;d.x=d.lineX+=t,d.y=d.lineY+=e,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${i(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",i(-d.y))}showText(t){const e=this.current,d=e.font,v=e.fontSize;if(v===0)return;const P=e.fontSizeScale,N=e.charSpacing,p=e.wordSpacing,q=e.fontDirection,lt=e.textHScale*q,tt=d.vertical,at=tt?1:-1,X=d.defaultVMetrics,W=v*e.fontMatrix[0];let H=0;for(const k of t){if(k===null){H+=q*p;continue}else if(typeof k=="number"){H+=at*k*v/1e3;continue}const o=(k.isSpace?p:0)+N,r=k.fontChar;let A,x,M=k.width;if(tt){let U;const z=k.vmetric||X;U=k.vmetric?z[1]:M*.5,U=-U*W;const it=z[2]*W;M=z?-z[0]:M,A=U/P,x=(H+it)/P}else A=H/P,x=0;(k.isInFont||d.missingFile)&&(e.xcoords.push(e.x+A),tt&&e.ycoords.push(-e.y+x),e.tspan.textContent+=r);let I;tt?I=M*W-o*q:I=M*W+o*q,H+=I}e.tspan.setAttributeNS(null,"x",e.xcoords.map(i).join(" ")),tt?e.tspan.setAttributeNS(null,"y",e.ycoords.map(i).join(" ")):e.tspan.setAttributeNS(null,"y",i(-e.y)),tt?e.y-=H:e.x+=H*lt,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${i(e.fontSize)}px`),e.fontStyle!==Q.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==Q.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const rt=e.textRenderingMode&w.TextRenderingMode.FILL_STROKE_MASK;if(rt===w.TextRenderingMode.FILL||rt===w.TextRenderingMode.FILL_STROKE?(e.fillColor!==Q.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===w.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),rt===w.TextRenderingMode.STROKE||rt===w.TextRenderingMode.FILL_STROKE){const k=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,k)}let ht=e.textMatrix;e.textRise!==0&&(ht=ht.slice(),ht[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${l(ht)} scale(${i(lt)}, -1)`),e.txtElement.setAttributeNS(j,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=C(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }
`}setFont(t){const e=this.current,d=this.commonObjs.get(t[0]);let v=t[1];e.font=d,this.embedFonts&&!d.missingFile&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),e.fontMatrix=d.fontMatrix||w.FONT_IDENTITY_MATRIX;let P="normal";d.black?P="900":d.bold&&(P="bold");const N=d.italic?"italic":"normal";v<0?(v=-v,e.fontDirection=-1):e.fontDirection=1,e.fontSize=v,e.fontFamily=d.loadedName,e.fontWeight=P,e.fontStyle=N,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",i(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var e;const t=this.current;t.textRenderingMode&w.TextRenderingMode.ADD_TO_PATH_FLAG&&((e=t.txtElement)!=null&&e.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=E[t]}setLineJoin(t){this.current.lineJoin=O[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,d){this.current.strokeColor=w.Util.makeHexColor(t,e,d)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,d){this.current.fillColor=w.Util.makeHexColor(t,e,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,d=this.viewport.height,v=w.Util.inverseTransform(this.transformMatrix),P=w.Util.applyTransform([0,0],v),N=w.Util.applyTransform([0,d],v),p=w.Util.applyTransform([e,0],v),q=w.Util.applyTransform([e,d],v),lt=Math.min(P[0],N[0],p[0],q[0]),tt=Math.min(P[1],N[1],p[1],q[1]),at=Math.max(P[0],N[0],p[0],q[0]),X=Math.max(P[1],N[1],p[1],q[1]),W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x",lt),W.setAttributeNS(null,"y",tt),W.setAttributeNS(null,"width",at-lt),W.setAttributeNS(null,"height",X-tt),W.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&W.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(W)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],d=t[2],v=t[3]||w.IDENTITY_MATRIX,[P,N,p,q]=t[4],lt=t[5],tt=t[6],at=t[7],X=`shading${s++}`,[W,H,rt,ht]=w.Util.normalizeRect([...w.Util.applyTransform([P,N],v),...w.Util.applyTransform([p,q],v)]),[k,o]=w.Util.singularValueDecompose2dScale(v),r=lt*k,A=tt*o,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",X),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",r),x.setAttributeNS(null,"height",A),x.setAttributeNS(null,"x",`${W}`),x.setAttributeNS(null,"y",`${H}`);const M=this.svg,I=this.transformMatrix,U=this.current.fillColor,z=this.current.strokeColor,it=this.svgFactory.create(rt-W,ht-H);if(this.svg=it,this.transformMatrix=v,at===2){const J=w.Util.makeHexColor(...e);this.current.fillColor=J,this.current.strokeColor=J}return this.executeOpTree(this.convertOpList(d)),this.svg=M,this.transformMatrix=I,this.current.fillColor=U,this.current.strokeColor=z,x.append(it.childNodes[0]),this.defs.append(x),`url(#${X})`}_makeShadingPattern(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e=`shading${s++}`,d=t[3];let v;switch(t[1]){case"axial":const P=t[4],N=t[5];v=this.svgFactory.createElement("svg:linearGradient"),v.setAttributeNS(null,"id",e),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"x1",P[0]),v.setAttributeNS(null,"y1",P[1]),v.setAttributeNS(null,"x2",N[0]),v.setAttributeNS(null,"y2",N[1]);break;case"radial":const p=t[4],q=t[5],lt=t[6],tt=t[7];v=this.svgFactory.createElement("svg:radialGradient"),v.setAttributeNS(null,"id",e),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"cx",q[0]),v.setAttributeNS(null,"cy",q[1]),v.setAttributeNS(null,"r",tt),v.setAttributeNS(null,"fx",p[0]),v.setAttributeNS(null,"fy",p[1]),v.setAttributeNS(null,"fr",lt);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const P of d){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",P[0]),N.setAttributeNS(null,"stop-color",P[1]),v.append(N)}return this.defs.append(v),`url(#${e})`;case"Mesh":return(0,w.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const d=this.current;let v=d.x,P=d.y,N=[],p=0;for(const q of t)switch(q|0){case w.OPS.rectangle:v=e[p++],P=e[p++];const lt=e[p++],tt=e[p++],at=v+lt,X=P+tt;N.push("M",i(v),i(P),"L",i(at),i(P),"L",i(at),i(X),"L",i(v),i(X),"Z");break;case w.OPS.moveTo:v=e[p++],P=e[p++],N.push("M",i(v),i(P));break;case w.OPS.lineTo:v=e[p++],P=e[p++],N.push("L",i(v),i(P));break;case w.OPS.curveTo:v=e[p+4],P=e[p+5],N.push("C",i(e[p]),i(e[p+1]),i(e[p+2]),i(e[p+3]),i(v),i(P)),p+=6;break;case w.OPS.curveTo2:N.push("C",i(v),i(P),i(e[p]),i(e[p+1]),i(e[p+2]),i(e[p+3])),v=e[p+2],P=e[p+3],p+=4;break;case w.OPS.curveTo3:v=e[p+2],P=e[p+3],N.push("C",i(e[p]),i(e[p+1]),i(v),i(P),i(v),i(P)),p+=4;break;case w.OPS.closePath:N.push("Z");break}N=N.join(" "),d.path&&t.length>0&&t[0]!==w.OPS.rectangle&&t[0]!==w.OPS.moveTo?N=d.path.getAttributeNS(null,"d")+N:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(d.path)),d.path.setAttributeNS(null,"d",N),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(v,P)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const e=`clippath${c++}`,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",e),d.setAttributeNS(null,"transform",l(this.transformMatrix));const v=t.element.cloneNode(!0);if(this.pendingClip==="evenodd"?v.setAttributeNS(null,"clip-rule","evenodd"):v.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,d.append(v),this.defs.append(d),t.activeClipUrl){t.clipGroup=null;for(const P of this.extraStack)P.clipGroup=null;d.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,d]of t)switch(e){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,w.warn)(`Unimplemented graphic state operator ${e}`);break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const d=this.current;let v=d.dashArray;e!==1&&v.length>0&&(v=v.map(function(P){return e*P})),t.setAttributeNS(null,"stroke",d.strokeColor),t.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",i(d.miterLimit)),t.setAttributeNS(null,"stroke-linecap",d.lineCap),t.setAttributeNS(null,"stroke-linejoin",d.lineJoin),t.setAttributeNS(null,"stroke-width",i(e*d.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",v.map(i).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",i(e*d.dashPhase)+"px")}eoFill(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=this.getObject(t);if(!e){(0,w.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(e)}paintInlineImageXObject(t,e){const d=t.width,v=t.height,P=_(t,this.forceDataSchema,!!e),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",i(d)),N.setAttributeNS(null,"height",i(v)),this.current.element=N,this.clip("nonzero");const p=this.svgFactory.createElement("svg:image");p.setAttributeNS(y,"xlink:href",P),p.setAttributeNS(null,"x","0"),p.setAttributeNS(null,"y",i(-v)),p.setAttributeNS(null,"width",i(d)+"px"),p.setAttributeNS(null,"height",i(v)+"px"),p.setAttributeNS(null,"transform",`scale(${i(1/d)} ${i(-1/v)})`),e?e.append(p):this._ensureTransformGroup().append(p)}paintImageMaskXObject(t){const e=this.getObject(t.data,t);if(e.bitmap){(0,w.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const d=this.current,v=e.width,P=e.height,N=d.fillColor;d.maskId=`mask${n++}`;const p=this.svgFactory.createElement("svg:mask");p.setAttributeNS(null,"id",d.maskId);const q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",i(v)),q.setAttributeNS(null,"height",i(P)),q.setAttributeNS(null,"fill",N),q.setAttributeNS(null,"mask",`url(#${d.maskId})`),this.defs.append(p),this._ensureTransformGroup().append(q),this.paintInlineImageXObject(e,p)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const d=e[2]-e[0],v=e[3]-e[1],P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x",e[0]),P.setAttributeNS(null,"y",e[1]),P.setAttributeNS(null,"width",i(d)),P.setAttributeNS(null,"height",i(v)),this.current.element=P,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),d=this.svgFactory.createElement("svg:defs");e.append(d),this.defs=d;const v=this.svgFactory.createElement("svg:g");return v.setAttributeNS(null,"transform",l(t.transform)),e.append(v),this.svg=v,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(ct){var m=__webpack_module_cache__[ct];if(m!==void 0)return m.exports;var Z=__webpack_module_cache__[ct]={exports:{}};return __webpack_modules__[ct](Z,Z.exports,__w_pdfjs_require__),Z.exports}var __webpack_exports__={};return(()=>{var ct=__webpack_exports__;Object.defineProperty(ct,"__esModule",{value:!0}),Object.defineProperty(ct,"AbortException",{enumerable:!0,get:function(){return m.AbortException}}),Object.defineProperty(ct,"AnnotationEditorLayer",{enumerable:!0,get:function(){return V.AnnotationEditorLayer}}),Object.defineProperty(ct,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return m.AnnotationEditorParamsType}}),Object.defineProperty(ct,"AnnotationEditorType",{enumerable:!0,get:function(){return m.AnnotationEditorType}}),Object.defineProperty(ct,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return G.AnnotationEditorUIManager}}),Object.defineProperty(ct,"AnnotationLayer",{enumerable:!0,get:function(){return Q.AnnotationLayer}}),Object.defineProperty(ct,"AnnotationMode",{enumerable:!0,get:function(){return m.AnnotationMode}}),Object.defineProperty(ct,"CMapCompressionType",{enumerable:!0,get:function(){return m.CMapCompressionType}}),Object.defineProperty(ct,"FeatureTest",{enumerable:!0,get:function(){return m.FeatureTest}}),Object.defineProperty(ct,"GlobalWorkerOptions",{enumerable:!0,get:function(){return j.GlobalWorkerOptions}}),Object.defineProperty(ct,"InvalidPDFException",{enumerable:!0,get:function(){return m.InvalidPDFException}}),Object.defineProperty(ct,"MissingPDFException",{enumerable:!0,get:function(){return m.MissingPDFException}}),Object.defineProperty(ct,"OPS",{enumerable:!0,get:function(){return m.OPS}}),Object.defineProperty(ct,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Z.PDFDataRangeTransport}}),Object.defineProperty(ct,"PDFDateString",{enumerable:!0,get:function(){return b.PDFDateString}}),Object.defineProperty(ct,"PDFWorker",{enumerable:!0,get:function(){return Z.PDFWorker}}),Object.defineProperty(ct,"PasswordResponses",{enumerable:!0,get:function(){return m.PasswordResponses}}),Object.defineProperty(ct,"PermissionFlag",{enumerable:!0,get:function(){return m.PermissionFlag}}),Object.defineProperty(ct,"PixelsPerInch",{enumerable:!0,get:function(){return b.PixelsPerInch}}),Object.defineProperty(ct,"RenderingCancelledException",{enumerable:!0,get:function(){return b.RenderingCancelledException}}),Object.defineProperty(ct,"SVGGraphics",{enumerable:!0,get:function(){return y.SVGGraphics}}),Object.defineProperty(ct,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return m.UNSUPPORTED_FEATURES}}),Object.defineProperty(ct,"UnexpectedResponseException",{enumerable:!0,get:function(){return m.UnexpectedResponseException}}),Object.defineProperty(ct,"Util",{enumerable:!0,get:function(){return m.Util}}),Object.defineProperty(ct,"VerbosityLevel",{enumerable:!0,get:function(){return m.VerbosityLevel}}),Object.defineProperty(ct,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(ct,"build",{enumerable:!0,get:function(){return Z.build}}),Object.defineProperty(ct,"createPromiseCapability",{enumerable:!0,get:function(){return m.createPromiseCapability}}),Object.defineProperty(ct,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return m.createValidAbsoluteUrl}}),Object.defineProperty(ct,"getDocument",{enumerable:!0,get:function(){return Z.getDocument}}),Object.defineProperty(ct,"getFilenameFromUrl",{enumerable:!0,get:function(){return b.getFilenameFromUrl}}),Object.defineProperty(ct,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return b.getPdfFilenameFromUrl}}),Object.defineProperty(ct,"getXfaPageViewport",{enumerable:!0,get:function(){return b.getXfaPageViewport}}),Object.defineProperty(ct,"isDataScheme",{enumerable:!0,get:function(){return b.isDataScheme}}),Object.defineProperty(ct,"isPdfFile",{enumerable:!0,get:function(){return b.isPdfFile}}),Object.defineProperty(ct,"loadScript",{enumerable:!0,get:function(){return b.loadScript}}),Object.defineProperty(ct,"renderTextLayer",{enumerable:!0,get:function(){return w.renderTextLayer}}),Object.defineProperty(ct,"setLayerDimensions",{enumerable:!0,get:function(){return b.setLayerDimensions}}),Object.defineProperty(ct,"shadow",{enumerable:!0,get:function(){return m.shadow}}),Object.defineProperty(ct,"updateTextLayer",{enumerable:!0,get:function(){return w.updateTextLayer}}),Object.defineProperty(ct,"version",{enumerable:!0,get:function(){return Z.version}});var m=__w_pdfjs_require__(1),Z=__w_pdfjs_require__(2),b=__w_pdfjs_require__(6),w=__w_pdfjs_require__(26),V=__w_pdfjs_require__(27),G=__w_pdfjs_require__(5),Q=__w_pdfjs_require__(32),j=__w_pdfjs_require__(14),y=__w_pdfjs_require__(35),E=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);export{pdfExports as p};
