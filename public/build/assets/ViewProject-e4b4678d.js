import{s as T,r as U,x as d,v as M,C as E,J as b,c as h,h as l,b as _,T as A,a as n,w as u,z as m,g as i,F as I,i as N,o as s,D as z}from"./app-6ca4d7f9.js";import{a as H,r as f}from"./AuthStore-87755225.js";import{M as L,a as R}from"./MobileDashboardHeader-62b789db.js";import W from"./ProjectDisplay-9f70c4af.js";import{B as J}from"./BidDisplay-6ffb4b37.js";import O from"./mediaDispay-c0b4d899.js";import q from"./chatsDisplay-08cf48cd.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./MobileProjectBreakdownDisplayCard-0ffd4ac0.js";import"./followersFormat-58554cdc.js";import"./Modal-cb95c12b.js";import"./pdf-ac36aa31.js";import"./convertDate-873f89eb.js";const K={class:"w-[100%] h-[50px] items-center flex justify-around"},Q={class:"container"},X={__name:"ViewProject",props:{canLogin:Boolean,canRegister:Boolean,laravelVersion:String,phpVersion:String,project:Object,chats:[],marketerStatus:String},setup(C){const a=C,D=N("currentUser"),k=H();D!=null&&k.authenticate(),T(k);const o=U("Project");console.log(a.marketerStatus);const g=d(a.project),c={properties:d({visible:!1,bid:null}),openModal:t=>{document.body.style.overflow="hidden",c.properties.visible=!0,c.properties.bid=t},closeModal:()=>{document.body.style.overflow="auto",c.properties.visible=!1,c.properties.bid=null}};M({amount:null,comment:null});const y=M({fileUpload:null}),v=d({is_assigned:j(),assignment:B()});let x=d([]);E(()=>{b().props.errors!=null&&b().props.errors.WorkspaceError!=null&&(x[0]=b().props.errors)});function p(t){o.value=t}function j(){let t=!1;if(a.project!=null&&a.project.bids!=null){for(let e of a.project.bids)if(e.assignment!=null){t=!0;break}}return t}function B(){let t=null;if(a.project!=null&&a.project.bids!=null){for(let e of a.project.bids)if(e.assignment!=null){t=e.assignment;break}}return t}function P(t){y.fileUpload=t,axios.post(f("uploadFile"),{project:a.project,fileData:y.fileUpload},{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.status?(alert("File Uploaded"),window.location.reload()):alert(e.data.error)}).catch(e=>{alert("File is missing or is unsupported")})}function S(t){let e={project:g,message:t.message};axios.post(f("sendMessage"),e).then(r=>{let w=$("#chatWindow");a.project.chats||(a.project.chats=[]),a.project.chats.push(r.data.chat),w.animate({scrollTop:w.get(0).scrollHeight},1e3)}).catch(r=>{console.log(r)})}function F(t){confirm("Are you sure you want to delete this media?")&&axios.delete(f("DeleteMedia",{media:t})).then(e=>{e.data.status?(alert("Media deleted successfully."),window.location.reload()):alert("Error deleting media.")}).catch(e=>{alert("Error deleting media.")})}z("assignmentDetails",v);function V(t){axios.post(f("InfluencerMarkAsComplete",t)).then(e=>{e.data.status?(alert("Project was marked as complete."),window.location.reload()):alert("Error marking project as complete.")}).catch(e=>{alert("Error marking project as complete.")})}return(t,e)=>(s(),h(I,null,[(s(),l(A,{to:"body"},[_(L,{activePage:"Projects"})])),_(R,{backButton:!0,title:"Projects"}),n("nav",null,[n("ul",K,[n("li",{onClick:e[0]||(e[0]=u(r=>p("Project"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Project"?"active-tab":""])},"Project ",2),n("li",{onClick:e[1]||(e[1]=u(r=>p("Bids"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Bids"?"active-tab":""])},"Bids ",2),j()?(s(),h("li",{key:0,onClick:e[2]||(e[2]=u(r=>p("Media"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Media"?"active-tab":""])},"Media ",2)):i("",!0),j()?(s(),h("li",{key:1,onClick:e[3]||(e[3]=u(r=>p("Chat"),["prevent"])),class:m(["w-[33.3%]","text-center",o.value==="Chat"?"active-tab":""])},"Chat ",2)):i("",!0)])]),n("div",Q,[o.value=="Project"?(s(),l(W,{key:0,project:g,marketerStatus:a.marketerStatus,assignmentDetails:v,onMarkAsComplete:V},null,8,["project","marketerStatus","assignmentDetails"])):i("",!0),o.value=="Bids"?(s(),l(J,{key:1,bids:a.project.bids,influencer:g},null,8,["bids","influencer"])):i("",!0),o.value=="Media"?(s(),l(O,{key:2,onUploadFile:P,onDeleteMedia:F,assignmentDetails:v},null,8,["assignmentDetails"])):i("",!0),o.value=="Chat"?(s(),l(q,{key:3,onSendMessage:S,chats:a.project.chats},null,8,["chats"])):i("",!0)])],64))}},de=G(X,[["__scopeId","data-v-85bca22a"]]);export{de as default};
